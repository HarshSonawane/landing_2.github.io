!function(a,b,c){"use strict";b.Confused=b.Confused||{},b.Confused.CookieManager=function(){},b.Confused.CookieManager.prototype.getItem=function(a){return decodeURIComponent(c.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},b.Confused.CookieManager.prototype.setItem=function(a,b,d,e,f,g){if(!a||/^(?:expires|max\-age|path|domain|secure)$/i.test(a))return!1;var h="";if(d)switch(d.constructor){case Number:h=d===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+d;break;case String:h="; expires="+d;break;case Date:h="; expires="+d.toUTCString()}return c.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+h+(f?"; domain="+f:"")+(e?"; path="+e:"")+(g?"; secure":""),!0},b.Confused.CookieManager.prototype.removeItem=function(a,b,d){return!(!a||!this.hasItem(a))&&(c.cookie=encodeURIComponent(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(d?"; domain="+d:"")+(b?"; path="+b:""),!0)},b.Confused.CookieManager.prototype.hasItem=function(a){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(c.cookie)},b.Confused.CookieManager.prototype.keys=function(){for(var a=c.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),b=0;b<a.length;b++)a[b]=decodeURIComponent(a[b]);return a}}(window.jQuery,window,document),function(a){"use strict";a.Confused=a.Confused||{},a.Confused.DomainProvider=function(){this.domainRegex=/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])(\.([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9]))*$/i},a.Confused.DomainProvider.prototype.getDomain=function(a){return a.hostname},a.Confused.DomainProvider.prototype.getParentDomain=function(a){var b=a.hostname;if(this.domainRegex.test(b)){var c=b.split(".");c.shift(),b=c.join(".")}return b}}(window),function(a,b){"use strict";b.Confused=b.Confused||{},b.Confused.LabelProvider=function(a){this.lookupService=a},b.Confused.LabelProvider.prototype.getLabels=function(b){var c,d,e=[],f=[],g=[],h={};for(c in b)b.hasOwnProperty(c)&&(e.push(c),f.push(b[c]),g.push(this.lookupService.getLabel(b[c])));var i=a.Deferred();return a.when.apply(a,g).then(function(){for(d=0;d<arguments.length;d++){var a=JSON.parse(arguments[d][0]);h[e[d]]=a}i.resolve(h)}),i}}(window.jQuery,window),function(a,b){b.Confused=b.Confused||{},b.Confused.LookupServiceProxy=function(c){var d={endpoint:"Services/Lookup/LookupService.aspx",timeout:300},e=a.extend(!0,d,c);this.serviceProxy=new b.Confused.ServiceProxy(e.endpoint,e.timeout)},b.Confused.LookupServiceProxy.prototype.getLabel=function(b,c){var d=a.extend({},c,{method:"Label",data:{path:b}});return this.serviceProxy.invoke(d)}}(window.jQuery,window),function(a,b){"use strict";b.Confused=b.Confused||{},b.Confused.ServiceProxy=function(a,b){this.endpoint=a,this.timeout=b||300},b.Confused.ServiceProxy.prototype.invoke=function(b){var c,d;if(!b.method)throw this.endpoint?new Error("method not specified for service: "+this.endpoint):new Error("Error invoking service");return c="/"+this.endpoint+"/"+b.method,d="object"==typeof b.data?JSON.stringify(b.data):b.data,a.ajax({type:"POST",url:c,data:d,contentType:"application/json; charset=utf-8",dataType:"json",converters:{"text json":function(b){var c=window.JSON&&window.JSON.parse?JSON.parse(b):a.parseJSON(b);return c.hasOwnProperty("d")?c.d:c}}})}}(window.jQuery,window),function(a,b){"use strict";b.Confused=b.Confused||{},b.Confused.StaticLabelProvider=function(){var a=(new b.Confused.DomainProvider).getDomain(b.location);this.labels={policyText:"We use cookies to give you the best experience on our site. If you continue browsing, we'll assume you're happy to receive all cookies from our site. ",policyLinkText:"Read our cookie policy to learn more.",policyLinkUrl:"http://"+a+"/cookie-policy"}},b.Confused.StaticLabelProvider.prototype.getLabels=function(){var b=a.Deferred();return b.resolve(this.labels),b}}(window.jQuery,window);var CONFUSEDCMS=CONFUSEDCMS||{},CSSCONSTANTS=CSSCONSTANTS||{};CONFUSEDCMS.eventDecorator=CONFUSEDCMS.eventDecorator||{},CONFUSEDCMS.eventDecorator.events=CONFUSEDCMS.eventDecorator.events||{},CONFUSEDCMS.eventDecorator.functions=CONFUSEDCMS.eventDecorator.functions||{},jQuery(document).ready(function(){!function(a){"use strict";a.LogToConsole=function(a){window.console.log(a)}}(CONFUSEDCMS.eventDecorator.functions,window.jQuery),function(a,b,c,d){"use strict";function e(a){var b,c,d={};for(b in a)a.hasOwnProperty(b)&&"miEventType"!==b&&"miClickLabel"!==b&&b.match(/^mi/)&&(c=b.replace("mi",""),d[c]=a[b]);return d}a.miClickEvent=function(){try{var a=d(this).data(),f="not-set",g="not-set";""!==a.miClickCategory&&(f=a.miClickCategory),""!==a.miClickLabel&&(g=a.miClickLabel);var h="CMS::"+f+"::"+g+"::click";if(b.postEvent(h,e(a)),!c)return void console.log("Error calling Google Analytics in CONFUSEDCMS.eventDecorator.events.miClickEvent: gaq undefined");c("send",a.gaClickCategory,"click",a.gaClickLabel)}catch(a){console.log("Error calling MI Click Event in CONFUSEDCMS.eventDecorator.events.miClickEvent: "+a)}}}(CONFUSEDCMS.eventDecorator.events,CONFUSEDCORE.MI.MiListener,window.ga,jQuery),function(a){jQuery("#html").hasClass("sitecore-editor")||(a.EventDefinitionList.Add(new a.EventDefinition('[data-mi-event-type="click"]',"click","CONFUSEDCMS.eventDecorator.events.miClickEvent")),a.EventDefinitionList.ProcessAll())}(CONFUSEDCMS.eventDecorator)});var CONFUSEDCMS=CONFUSEDCMS||{},CSSCONSTANTS=CSSCONSTANTS||{};CONFUSEDCMS.eventDecorator=CONFUSEDCMS.eventDecorator||{},CONFUSEDCMS.eventDecorator.extensions=CONFUSEDCMS.eventDecorator.extensions||{},function(a){"use strict";var b=a.fn.show;a.fn.show=function(){var a=b.apply(this,arguments);return this.trigger("show"),a}}(jQuery),function(a){"use strict";var b=a.fn.hide;a.fn.hide=function(){var a=b.apply(this,arguments);return this.trigger("hide"),a}}(jQuery);var CONFUSEDCMS=CONFUSEDCMS||{},CSSCONSTANTS=CSSCONSTANTS||{};CONFUSEDCMS.eventDecorator=CONFUSEDCMS.eventDecorator||{},window.console||(window.console={log:function(){}}),function(a){"use strict";a.EventDefinition=function(b,c,d,e){return this instanceof a.EventDefinition?(this.selector=b,this.eventName=c,this.functionName=d,this.params=e,this):new a.EventDefinition(b,c,d,e)}}(CONFUSEDCMS.eventDecorator),function(a){"use strict";a.EventDefinitionList=[],a.EventDefinitionList.Add=function(b){b.constructor===a.EventDefinition&&this.push(b)},a.EventDefinitionList.ProcessAll=function(){for(var b=a.EventDefinitionList.length,c=0;c<b;c++){var d=a.EventDefinitionList.pop();""===d.selector?a.ProcessFunction(d):a.ProcessEvent(d)}}}(CONFUSEDCMS.eventDecorator),function(a,b,c){"use strict";function d(a,b){for(var c=a.split("."),d=c.pop(),e=0;e<c.length;e++)b=b[c[e]];return b[d]}a.ProcessEvent=function(a){var e=d(a.functionName,b);return"function"==typeof e&&(c(document.body).on(a.eventName,a.selector,function(){e.apply(this,a.params)}),!0)},a.ProcessFunction=function(a){var c=d(a.functionName,b);return"function"==typeof c&&(c.apply(c,a.params),!0)}}(CONFUSEDCMS.eventDecorator,window,jQuery);var CONFUSEDCMS=CONFUSEDCMS||{},CSSCONSTANTS=CSSCONSTANTS||{};CONFUSEDCMS.services=CONFUSEDCMS.services||{},function(a,b){"use strict";a.ServiceProxy=function(c){if(!(this instanceof a.ServiceProxy))return new a.ServiceProxy(c);var d=this;d.endpoint=c,d.invoke=function(a){if(!a.method)throw new Error("method not specified for service: "+d.endpoint);if(!a.success)throw new Error("success handler not supplied for service: "+d.endpoint);var c="/"+d.endpoint+"/"+a.method;console.log(a.data);var e="object"==typeof a.data?JSON.stringify(a.data):a.data;d.xhr=b.ajax({type:"POST",url:c,data:e,contentType:"json",converters:{"text json":function(a){var c=window.JSON&&window.JSON.parse?JSON.parse(a):b.parseJSON("("+a+")");return c.hasOwnProperty("d")?c.d:c}},error:function(b,c,d){a.error&&a.error(b,c,d)},success:function(b,c,d){a.success(b,c,d)}})}},a.MiService=function(){if(!(this instanceof a.MiService))return new a.MiService;var c=new a.ServiceProxy("miv2");this.pageEvent=function(a,d){var e=b.extend({},d,{method:"Event",data:a,success:b.noop});c.invoke(e)}}}(CONFUSEDCMS.services,jQuery),function(){!function(a){var b=this||(0,eval)("this"),c=b.document,d=b.navigator,e=b.jQuery,f=b.JSON;!function(a){"function"==typeof define&&define.amd?define(["exports","require"],a):a("function"==typeof require&&"object"==typeof exports&&"object"==typeof module?module.exports||exports:b.ko={})}(function(g,h){function i(a,b){return(null===a||typeof a in n)&&a===b}function j(b,c){var d;return function(){d||(d=setTimeout(function(){d=a,b()},c))}}function k(a,b){var c;return function(){clearTimeout(c),c=setTimeout(a,b)}}function l(a,b,c,d){m.d[a]={init:function(a,e,f,g,h){var i,j;return m.w(function(){var f=m.a.c(e()),g=!c!=!f,k=!j;(k||b||g!==i)&&(k&&m.Z.oa()&&(j=m.a.la(m.e.childNodes(a),!0)),g?(k||m.e.T(a,m.a.la(j)),m.Ja(d?d(h,f):h,a)):m.e.ma(a),i=g)},null,{q:a}),{controlsDescendantBindings:!0}}},m.h.ka[a]=!1,m.e.R[a]=!0}var m=void 0!==g?g:{};m.b=function(a,b){for(var c=a.split("."),d=m,e=0;e<c.length-1;e++)d=d[c[e]];d[c[c.length-1]]=b},m.D=function(a,b,c){a[b]=c},m.version="3.3.0",m.b("version",m.version),m.a=function(){function g(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])}function h(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function i(a,b){return a.__proto__=b,a}function j(a,b,c,d){var e=a[b].match(q)||[];m.a.o(c.match(q),function(a){m.a.ga(e,a,d)}),a[b]=e.join(" ")}var k={__proto__:[]}instanceof Array,l={},n={};l[d&&/Firefox\/2/i.test(d.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],l.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),g(l,function(a,b){if(b.length)for(var c=0,d=b.length;c<d;c++)n[b[c]]=a});var o={propertychange:!0},p=c&&function(){for(var b=3,d=c.createElement("div"),e=d.getElementsByTagName("i");d.innerHTML="\x3c!--[if gt IE "+ ++b+"]><i></i><![endif]--\x3e",e[0];);return 4<b?b:a}(),q=/\S+/g;return{Bb:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],o:function(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c],c)},m:function(a,b){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(a,b);for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},vb:function(a,b,c){for(var d=0,e=a.length;d<e;d++)if(b.call(c,a[d],d))return a[d];return null},ya:function(a,b){var c=m.a.m(a,b);0<c?a.splice(c,1):0===c&&a.shift()},wb:function(a){a=a||[];for(var b=[],c=0,d=a.length;c<d;c++)0>m.a.m(b,a[c])&&b.push(a[c]);return b},Ka:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;d<e;d++)c.push(b(a[d],d));return c},xa:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;d<e;d++)b(a[d],d)&&c.push(a[d]);return c},ia:function(a,b){if(b instanceof Array)a.push.apply(a,b);else for(var c=0,d=b.length;c<d;c++)a.push(b[c]);return a},ga:function(a,b,c){var d=m.a.m(m.a.cb(a),b);0>d?c&&a.push(b):c||a.splice(d,1)},za:k,extend:h,Fa:i,Ga:k?i:h,A:g,pa:function(a,b){if(!a)return a;var c,d={};for(c in a)a.hasOwnProperty(c)&&(d[c]=b(a[c],c,a));return d},Ra:function(a){for(;a.firstChild;)m.removeNode(a.firstChild)},Jb:function(a){a=m.a.O(a);for(var b=(a[0]&&a[0].ownerDocument||c).createElement("div"),d=0,e=a.length;d<e;d++)b.appendChild(m.S(a[d]));return b},la:function(a,b){for(var c=0,d=a.length,e=[];c<d;c++){var f=a[c].cloneNode(!0);e.push(b?m.S(f):f)}return e},T:function(a,b){if(m.a.Ra(a),b)for(var c=0,d=b.length;c<d;c++)a.appendChild(b[c])},Qb:function(a,b){var c=a.nodeType?[a]:a;if(0<c.length){for(var d=c[0],e=d.parentNode,f=0,g=b.length;f<g;f++)e.insertBefore(b[f],d);for(f=0,g=c.length;f<g;f++)m.removeNode(c[f])}},na:function(a,b){if(a.length){for(b=8===b.nodeType&&b.parentNode||b;a.length&&a[0].parentNode!==b;)a.splice(0,1);if(1<a.length){var c=a[0],d=a[a.length-1];for(a.length=0;c!==d;)if(a.push(c),!(c=c.nextSibling))return;a.push(d)}}return a},Sb:function(a,b){7>p?a.setAttribute("selected",b):a.selected=b},ib:function(b){return null===b||b===a?"":b.trim?b.trim():b.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Dc:function(a,b){return a=a||"",!(b.length>a.length)&&a.substring(0,b.length)===b},jc:function(a,b){if(a===b)return!0;if(11===a.nodeType)return!1;if(b.contains)return b.contains(3===a.nodeType?a.parentNode:a);if(b.compareDocumentPosition)return 16==(16&b.compareDocumentPosition(a));for(;a&&a!=b;)a=a.parentNode;return!!a},Qa:function(a){return m.a.jc(a,a.ownerDocument.documentElement)},tb:function(a){return!!m.a.vb(a,m.a.Qa)},v:function(a){return a&&a.tagName&&a.tagName.toLowerCase()},n:function(a,b,c){var d=p&&o[b];if(!d&&e)e(a).bind(b,c);else if(d||"function"!=typeof a.addEventListener){if(void 0===a.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var f=function(b){c.call(a,b)},g="on"+b;a.attachEvent(g,f),m.a.C.fa(a,function(){a.detachEvent(g,f)})}else a.addEventListener(b,c,!1)},qa:function(a,d){if(!a||!a.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var f;if("input"===m.a.v(a)&&a.type&&"click"==d.toLowerCase()?(f=a.type,f="checkbox"==f||"radio"==f):f=!1,e&&!f)e(a).trigger(d);else if("function"==typeof c.createEvent){if("function"!=typeof a.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");f=c.createEvent(n[d]||"HTMLEvents"),f.initEvent(d,!0,!0,b,0,0,0,0,0,!1,!1,!1,!1,0,a),a.dispatchEvent(f)}else if(f&&a.click)a.click();else{if(void 0===a.fireEvent)throw Error("Browser doesn't support triggering events");a.fireEvent("on"+d)}},c:function(a){return m.F(a)?a():a},cb:function(a){return m.F(a)?a.B():a},Ia:function(a,b,c){var d;b&&("object"==typeof a.classList?(d=a.classList[c?"add":"remove"],m.a.o(b.match(q),function(b){d.call(a.classList,b)})):"string"==typeof a.className.baseVal?j(a.className,"baseVal",b,c):j(a,"className",b,c))},Ha:function(b,c){var d=m.a.c(c);null!==d&&d!==a||(d="");var e=m.e.firstChild(b);!e||3!=e.nodeType||m.e.nextSibling(e)?m.e.T(b,[b.ownerDocument.createTextNode(d)]):e.data=d,m.a.mc(b)},Rb:function(a,b){if(a.name=b,7>=p)try{a.mergeAttributes(c.createElement("<input name='"+a.name+"'/>"),!1)}catch(a){}},mc:function(a){9<=p&&(a=1==a.nodeType?a:a.parentNode,a.style&&(a.style.zoom=a.style.zoom))},kc:function(a){if(p){var b=a.style.width;a.style.width=0,a.style.width=b}},Bc:function(a,b){a=m.a.c(a),b=m.a.c(b);for(var c=[],d=a;d<=b;d++)c.push(d);return c},O:function(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b},Hc:6===p,Ic:7===p,M:p,Db:function(a,b){for(var c=m.a.O(a.getElementsByTagName("input")).concat(m.a.O(a.getElementsByTagName("textarea"))),d="string"==typeof b?function(a){return a.name===b}:function(a){return b.test(a.name)},e=[],f=c.length-1;0<=f;f--)d(c[f])&&e.push(c[f]);return e},yc:function(a){return"string"==typeof a&&(a=m.a.ib(a))?f&&f.parse?f.parse(a):new Function("return "+a)():null},jb:function(a,b,c){if(!f||!f.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return f.stringify(m.a.c(a),b,c)},zc:function(a,b,d){d=d||{};var e=d.params||{},f=d.includeFields||this.Bb,h=a;if("object"==typeof a&&"form"===m.a.v(a))for(var h=a.action,i=f.length-1;0<=i;i--)for(var j=m.a.Db(a,f[i]),k=j.length-1;0<=k;k--)e[j[k].name]=j[k].value;b=m.a.c(b);var l=c.createElement("form");l.style.display="none",l.action=h,l.method="post";for(var n in b)a=c.createElement("input"),a.type="hidden",a.name=n,a.value=m.a.jb(m.a.c(b[n])),l.appendChild(a);g(e,function(a,b){var d=c.createElement("input");d.type="hidden",d.name=a,d.value=b,l.appendChild(d)}),c.body.appendChild(l),d.submitter?d.submitter(l):l.submit(),setTimeout(function(){l.parentNode.removeChild(l)},0)}}}(),m.b("utils",m.a),m.b("utils.arrayForEach",m.a.o),m.b("utils.arrayFirst",m.a.vb),m.b("utils.arrayFilter",m.a.xa),m.b("utils.arrayGetDistinctValues",m.a.wb),m.b("utils.arrayIndexOf",m.a.m),m.b("utils.arrayMap",m.a.Ka),m.b("utils.arrayPushAll",m.a.ia),m.b("utils.arrayRemoveItem",m.a.ya),m.b("utils.extend",m.a.extend),m.b("utils.fieldsIncludedWithJsonPost",m.a.Bb),m.b("utils.getFormFields",m.a.Db),m.b("utils.peekObservable",m.a.cb),m.b("utils.postJson",m.a.zc),m.b("utils.parseJson",m.a.yc),m.b("utils.registerEventHandler",m.a.n),m.b("utils.stringifyJson",m.a.jb),m.b("utils.range",m.a.Bc),m.b("utils.toggleDomNodeCssClass",m.a.Ia),m.b("utils.triggerEvent",m.a.qa),m.b("utils.unwrapObservable",m.a.c),m.b("utils.objectForEach",m.a.A),m.b("utils.addOrRemoveItem",m.a.ga),m.b("utils.setTextContent",m.a.Ha),m.b("unwrap",m.a.c),Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if(1===arguments.length)return function(){return b.apply(a,arguments)};var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice(0);return d.push.apply(d,arguments),b.apply(a,d)}}),m.a.f=new function(){function b(b,f){var g=b[d];if(!g||"null"===g||!e[g]){if(!f)return a;g=b[d]="ko"+c++,e[g]={}}return e[g]}var c=0,d="__ko__"+(new Date).getTime(),e={};return{get:function(c,d){var e=b(c,!1);return e===a?a:e[d]},set:function(c,d,e){e===a&&b(c,!1)===a||(b(c,!0)[d]=e)},clear:function(a){var b=a[d];return!!b&&(delete e[b],a[d]=null,!0)},I:function(){return c+++d}}},m.b("utils.domData",m.a.f),m.b("utils.domData.clear",m.a.f.clear),m.a.C=new function(){function b(b,c){var e=m.a.f.get(b,d);return e===a&&c&&(e=[],m.a.f.set(b,d,e)),e}function c(a){var d=b(a,!1);if(d)for(var d=d.slice(0),e=0;e<d.length;e++)d[e](a);if(m.a.f.clear(a),m.a.C.cleanExternalData(a),g[a.nodeType])for(d=a.firstChild;a=d;)d=a.nextSibling,8===a.nodeType&&c(a)}var d=m.a.f.I(),f={1:!0,8:!0,9:!0},g={1:!0,9:!0};return{fa:function(a,c){if("function"!=typeof c)throw Error("Callback must be a function");b(a,!0).push(c)},Pb:function(c,e){var f=b(c,!1);f&&(m.a.ya(f,e),0==f.length&&m.a.f.set(c,d,a))},S:function(a){if(f[a.nodeType]&&(c(a),g[a.nodeType])){var b=[];m.a.ia(b,a.getElementsByTagName("*"));for(var d=0,e=b.length;d<e;d++)c(b[d])}return a},removeNode:function(a){m.S(a),a.parentNode&&a.parentNode.removeChild(a)},cleanExternalData:function(a){e&&"function"==typeof e.cleanData&&e.cleanData([a])}}},m.S=m.a.C.S,m.removeNode=m.a.C.removeNode,m.b("cleanNode",m.S),m.b("removeNode",m.removeNode),m.b("utils.domNodeDisposal",m.a.C),m.b("utils.domNodeDisposal.addDisposeCallback",m.a.C.fa),m.b("utils.domNodeDisposal.removeDisposeCallback",m.a.C.Pb),function(){m.a.ca=function(a,d){var f;if(e){if(e.parseHTML)f=e.parseHTML(a,d)||[];else if((f=e.clean([a],d))&&f[0]){for(var g=f[0];g.parentNode&&11!==g.parentNode.nodeType;)g=g.parentNode;g.parentNode&&g.parentNode.removeChild(g)}}else{(g=d)||(g=c),f=g.parentWindow||g.defaultView||b;var h=m.a.ib(a).toLowerCase(),g=g.createElement("div"),h=h.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!h.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!h.indexOf("<td")||!h.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],i="ignored<div>"+h[1]+a+h[2]+"</div>";for("function"==typeof f.innerShiv?g.appendChild(f.innerShiv(i)):g.innerHTML=i;h[0]--;)g=g.lastChild;f=m.a.O(g.lastChild.childNodes)}return f},m.a.gb=function(b,c){if(m.a.Ra(b),null!==(c=m.a.c(c))&&c!==a)if("string"!=typeof c&&(c=c.toString()),e)e(b).html(c);else for(var d=m.a.ca(c,b.ownerDocument),f=0;f<d.length;f++)b.appendChild(d[f])}}(),m.b("utils.parseHtmlFragment",m.a.ca),m.b("utils.setHtml",m.a.gb),m.H=function(){function b(a,c){if(a)if(8==a.nodeType){var d=m.H.Lb(a.nodeValue);null!=d&&c.push({ic:a,wc:d})}else if(1==a.nodeType)for(var d=0,e=a.childNodes,f=e.length;d<f;d++)b(e[d],c)}var c={};return{$a:function(a){if("function"!=typeof a)throw Error("You can only pass a function to ko.memoization.memoize()");var b=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return c[b]=a,"\x3c!--[ko_memo:"+b+"]--\x3e"},Wb:function(b,d){var e=c[b];if(e===a)throw Error("Couldn't find any memo with ID "+b+". Perhaps it's already been unmemoized.");try{return e.apply(null,d||[]),!0}finally{delete c[b]}},Xb:function(a,c){var d=[];b(a,d);for(var e=0,f=d.length;e<f;e++){var g=d[e].ic,h=[g];c&&m.a.ia(h,c),m.H.Wb(d[e].wc,h),g.nodeValue="",g.parentNode&&g.parentNode.removeChild(g)}},Lb:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?a[1]:null}}}(),m.b("memoization",m.H),m.b("memoization.memoize",m.H.$a),m.b("memoization.unmemoize",m.H.Wb),m.b("memoization.parseMemoText",m.H.Lb),m.b("memoization.unmemoizeDomNodeAndDescendants",m.H.Xb),m.Sa={throttle:function(a,b){a.throttleEvaluation=b;var c=null;return m.j({read:a,write:function(d){clearTimeout(c),c=setTimeout(function(){a(d)},b)}})},rateLimit:function(a,b){var c,d,e;"number"==typeof b?c=b:(c=b.timeout,d=b.method),e="notifyWhenChangesStop"==d?k:j,a.Za(function(a){return e(a,c)})},notify:function(a,b){a.equalityComparer="always"==b?null:i}};var n={undefined:1,boolean:1,number:1,string:1};m.b("extenders",m.Sa),m.Ub=function(a,b,c){this.da=a,this.La=b,this.hc=c,this.Gb=!1,m.D(this,"dispose",this.p)},m.Ub.prototype.p=function(){this.Gb=!0,this.hc()},m.Q=function(){m.a.Ga(this,m.Q.fn),this.G={},this.rb=1};var o={U:function(a,b,c){var d=this;c=c||"change";var e=new m.Ub(d,b?a.bind(b):a,function(){m.a.ya(d.G[c],e),d.ua&&d.ua(c)});return d.ja&&d.ja(c),d.G[c]||(d.G[c]=[]),d.G[c].push(e),e},notifySubscribers:function(a,b){if(b=b||"change","change"===b&&this.Yb(),this.Ba(b))try{m.k.xb();for(var c,d=this.G[b].slice(0),e=0;c=d[e];++e)c.Gb||c.La(a)}finally{m.k.end()}},Aa:function(){return this.rb},pc:function(a){return this.Aa()!==a},Yb:function(){++this.rb},Za:function(a){var b,c,d,e=this,f=m.F(e);e.ta||(e.ta=e.notifySubscribers,e.notifySubscribers=function(a,b){b&&"change"!==b?"beforeChange"===b?e.pb(a):e.ta(a,b):e.qb(a)});var g=a(function(){f&&d===e&&(d=e()),b=!1,e.Wa(c,d)&&e.ta(c=d)});e.qb=function(a){b=!0,d=a,g()},e.pb=function(a){b||(c=a,e.ta(a,"beforeChange"))}},Ba:function(a){return this.G[a]&&this.G[a].length},nc:function(a){if(a)return this.G[a]&&this.G[a].length||0;var b=0;return m.a.A(this.G,function(a,c){b+=c.length}),b},Wa:function(a,b){return!this.equalityComparer||!this.equalityComparer(a,b)},extend:function(a){var b=this;return a&&m.a.A(a,function(a,c){var d=m.Sa[a];"function"==typeof d&&(b=d(b,c)||b)}),b}};m.D(o,"subscribe",o.U),m.D(o,"extend",o.extend),m.D(o,"getSubscriptionsCount",o.nc),m.a.za&&m.a.Fa(o,Function.prototype),m.Q.fn=o,m.Hb=function(a){return null!=a&&"function"==typeof a.U&&"function"==typeof a.notifySubscribers},m.b("subscribable",m.Q),m.b("isSubscribable",m.Hb),m.Z=m.k=function(){function a(a){d.push(c),c=a}function b(){c=d.pop()}var c,d=[],e=0;return{xb:a,end:b,Ob:function(a){if(c){if(!m.Hb(a))throw Error("Only subscribable things can act as dependencies");c.La(a,a.ac||(a.ac=++e))}},u:function(c,d,e){try{return a(),c.apply(d,e||[])}finally{b()}},oa:function(){if(c)return c.w.oa()},Ca:function(){if(c)return c.Ca}}}(),m.b("computedContext",m.Z),m.b("computedContext.getDependenciesCount",m.Z.oa),m.b("computedContext.isInitial",m.Z.Ca),m.b("computedContext.isSleeping",m.Z.Jc),m.b("ignoreDependencies",m.Gc=m.k.u),m.r=function(a){function b(){return 0<arguments.length?(b.Wa(c,arguments[0])&&(b.X(),c=arguments[0],b.W()),this):(m.k.Ob(b),c)}var c=a;return m.Q.call(b),m.a.Ga(b,m.r.fn),b.B=function(){return c},b.W=function(){b.notifySubscribers(c)},b.X=function(){b.notifySubscribers(c,"beforeChange")},m.D(b,"peek",b.B),m.D(b,"valueHasMutated",b.W),m.D(b,"valueWillMutate",b.X),b},m.r.fn={equalityComparer:i};var p=m.r.Ac="__ko_proto__";m.r.fn[p]=m.r,m.a.za&&m.a.Fa(m.r.fn,m.Q.fn),m.Ta=function(b,c){return null!==b&&b!==a&&b[p]!==a&&(b[p]===c||m.Ta(b[p],c))},m.F=function(a){return m.Ta(a,m.r)},m.Da=function(a){return!!("function"==typeof a&&a[p]===m.r||"function"==typeof a&&a[p]===m.j&&a.qc)},m.b("observable",m.r),m.b("isObservable",m.F),m.b("isWriteableObservable",m.Da),m.b("isWritableObservable",m.Da),m.ba=function(a){if("object"!=typeof(a=a||[])||!("length"in a))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return a=m.r(a),m.a.Ga(a,m.ba.fn),a.extend({trackArrayChanges:!0})},m.ba.fn={remove:function(a){for(var b=this.B(),c=[],d="function"!=typeof a||m.F(a)?function(b){return b===a}:a,e=0;e<b.length;e++){var f=b[e];d(f)&&(0===c.length&&this.X(),c.push(f),b.splice(e,1),e--)}return c.length&&this.W(),c},removeAll:function(b){if(b===a){var c=this.B(),d=c.slice(0);return this.X(),c.splice(0,c.length),this.W(),d}return b?this.remove(function(a){return 0<=m.a.m(b,a)}):[]},destroy:function(a){var b=this.B(),c="function"!=typeof a||m.F(a)?function(b){return b===a}:a;this.X();for(var d=b.length-1;0<=d;d--)c(b[d])&&(b[d]._destroy=!0);this.W()},destroyAll:function(b){return b===a?this.destroy(function(){return!0}):b?this.destroy(function(a){return 0<=m.a.m(b,a)}):[]},indexOf:function(a){var b=this();return m.a.m(b,a)},replace:function(a,b){var c=this.indexOf(a);0<=c&&(this.X(),this.B()[c]=b,this.W())}},m.a.o("pop push reverse shift sort splice unshift".split(" "),function(a){m.ba.fn[a]=function(){var b=this.B();return this.X(),this.yb(b,a,arguments),b=b[a].apply(b,arguments),this.W(),b}}),m.a.o(["slice"],function(a){m.ba.fn[a]=function(){var b=this();return b[a].apply(b,arguments)}}),m.a.za&&m.a.Fa(m.ba.fn,m.r.fn),m.b("observableArray",m.ba),m.Sa.trackArrayChanges=function(a){function b(){if(!d){d=!0;var b=a.notifySubscribers;a.notifySubscribers=function(a,c){return c&&"change"!==c||++f,b.apply(this,arguments)};var g=[].concat(a.B()||[]);e=null,c=a.U(function(b){if(b=[].concat(b||[]),a.Ba("arrayChange")){var c;(!e||1<f)&&(e=m.a.Ma(g,b,{sparse:!0})),c=e}g=b,e=null,f=0,c&&c.length&&a.notifySubscribers(c,"arrayChange")})}}if(!a.yb){var c,d=!1,e=null,f=0,g=a.ja,h=a.ua;a.ja=function(c){g&&g.call(a,c),"arrayChange"===c&&b()},a.ua=function(b){h&&h.call(a,b),"arrayChange"!==b||a.Ba("arrayChange")||(c.p(),d=!1)},a.yb=function(a,b,c){function g(a,b,c){return h[h.length]={status:a,value:b,index:c}}if(d&&!f){var h=[],i=a.length,j=c.length,k=0;switch(b){case"push":k=i;case"unshift":for(b=0;b<j;b++)g("added",c[b],k+b);break;case"pop":k=i-1;case"shift":i&&g("deleted",a[k],k);break;case"splice":b=Math.min(Math.max(0,0>c[0]?i+c[0]:c[0]),i);for(var i=1===j?i:Math.min(b+(c[1]||0),i),j=b+j-2,k=Math.max(i,j),l=[],n=[],o=2;b<k;++b,++o)b<i&&n.push(g("deleted",a[b],b)),b<j&&l.push(g("added",c[o],b));m.a.Cb(n,l);break;default:return}e=h}}}},m.w=m.j=function(b,c,d){function e(a,b,c){if(u&&b===j)throw Error("A 'pure' computed must not be called recursively");B[a]=c,c.sa=C++,c.ea=b.Aa()}function f(){var a,b;for(a in B)if(B.hasOwnProperty(a)&&(b=B[a],b.da.pc(b.ea)))return!0}function g(){!v&&B&&m.a.A(B,function(a,b){b.p&&b.p()}),B=null,C=0,s=!0,v=p=!1}function h(){var a=j.throttleEvaluation;a&&0<=a?(clearTimeout(D),D=setTimeout(function(){i(!0)},a)):j.nb?j.nb():i(!0)}function i(b){if(!q&&!s){if(z&&z()){if(!r)return void A()}else r=!1;q=!0;try{var d=B,f=C,g=u?a:!C;m.k.xb({La:function(a,b){s||(f&&d[b]?(e(b,a,d[b]),delete d[b],--f):B[b]||e(b,a,v?{da:a}:a.U(h)))},w:j,Ca:g}),B={},C=0;try{var i=c?t.call(c):t()}finally{m.k.end(),f&&!v&&m.a.A(d,function(a,b){b.p&&b.p()}),p=!1}j.Wa(o,i)&&(v||n(o,"beforeChange"),o=i,v?j.Yb():b&&n(o)),g&&n(o,"awake")}finally{q=!1}C||A()}}function j(){if(0<arguments.length){if("function"!=typeof w)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return w.apply(c,arguments),this}return m.k.Ob(j),(p||v&&f())&&i(),o}function k(){return(p&&!C||v&&f())&&i(),o}function l(){return p||0<C}function n(a,b){j.notifySubscribers(a,b)}var o,p=!0,q=!1,r=!1,s=!1,t=b,u=!1,v=!1;if(t&&"object"==typeof t?(d=t,t=d.read):(d=d||{},t||(t=d.read)),"function"!=typeof t)throw Error("Pass a function that returns the value of the ko.computed");var w=d.write,x=d.disposeWhenNodeIsRemoved||d.q||null,y=d.disposeWhen||d.Pa,z=y,A=g,B={},C=0,D=null;c||(c=d.owner),m.Q.call(j),m.a.Ga(j,m.j.fn),j.B=k,j.oa=function(){return C},j.qc="function"==typeof w,j.p=function(){A()},j.$=l;var E=j.Za;return j.Za=function(a){E.call(j,a),j.nb=function(){j.pb(o),p=!0,j.qb(j)}},d.pure?(v=u=!0,j.ja=function(a){if(!s&&v&&"change"==a){if(v=!1,p||f())B=null,C=0,p=!0,i();else{var b=[];m.a.A(B,function(a,c){b[c.sa]=a}),m.a.o(b,function(a,b){var c=B[a],d=c.da.U(h);d.sa=b,d.ea=c.ea,B[a]=d})}s||n(o,"awake")}},j.ua=function(b){s||"change"!=b||j.Ba("change")||(m.a.A(B,function(a,b){b.p&&(B[a]={da:b.da,sa:b.sa,ea:b.ea},b.p())}),v=!0,n(a,"asleep"))},j.bc=j.Aa,j.Aa=function(){return v&&(p||f())&&i(),j.bc()}):d.deferEvaluation&&(j.ja=function(a){"change"!=a&&"beforeChange"!=a||k()}),m.D(j,"peek",j.B),m.D(j,"dispose",j.p),m.D(j,"isActive",j.$),m.D(j,"getDependenciesCount",j.oa),x&&(r=!0,x.nodeType&&(z=function(){return!m.a.Qa(x)||y&&y()})),v||d.deferEvaluation||i(),x&&l()&&x.nodeType&&(A=function(){m.a.C.Pb(x,A),g()},m.a.C.fa(x,A)),j},m.sc=function(a){return m.Ta(a,m.j)},o=m.r.Ac,m.j[o]=m.r,m.j.fn={equalityComparer:i},m.j.fn[o]=m.j,m.a.za&&m.a.Fa(m.j.fn,m.Q.fn),m.b("dependentObservable",m.j),m.b("computed",m.j),m.b("isComputed",m.sc),m.Nb=function(a,b){return"function"==typeof a?m.w(a,b,{pure:!0}):(a=m.a.extend({},a),a.pure=!0,m.w(a,b))},m.b("pureComputed",m.Nb),function(){function b(e,f,g){if(g=g||new d,"object"!=typeof(e=f(e))||null===e||e===a||e instanceof Date||e instanceof String||e instanceof Number||e instanceof Boolean)return e;var h=e instanceof Array?[]:{};return g.save(e,h),c(e,function(c){var d=f(e[c]);switch(typeof d){case"boolean":case"number":case"string":case"function":h[c]=d;break;case"object":case"undefined":var i=g.get(d);h[c]=i!==a?i:b(d,f,g)}}),h}function c(a,b){if(a instanceof Array){for(var c=0;c<a.length;c++)b(c);"function"==typeof a.toJSON&&b("toJSON")}else for(c in a)b(c)}function d(){this.keys=[],this.mb=[]}m.Vb=function(a){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return b(a,function(a){for(var b=0;m.F(a)&&10>b;b++)a=a();return a})},m.toJSON=function(a,b,c){return a=m.Vb(a),m.a.jb(a,b,c)},d.prototype={save:function(a,b){var c=m.a.m(this.keys,a);0<=c?this.mb[c]=b:(this.keys.push(a),this.mb.push(b))},get:function(b){return b=m.a.m(this.keys,b),0<=b?this.mb[b]:a}}}(),m.b("toJS",m.Vb),m.b("toJSON",m.toJSON),function(){m.i={s:function(b){switch(m.a.v(b)){case"option":return!0===b.__ko__hasDomDataOptionValue__?m.a.f.get(b,m.d.options.ab):7>=m.a.M?b.getAttributeNode("value")&&b.getAttributeNode("value").specified?b.value:b.text:b.value;case"select":return 0<=b.selectedIndex?m.i.s(b.options[b.selectedIndex]):a;default:return b.value}},Y:function(b,c,d){switch(m.a.v(b)){case"option":switch(typeof c){case"string":m.a.f.set(b,m.d.options.ab,a),"__ko__hasDomDataOptionValue__"in b&&delete b.__ko__hasDomDataOptionValue__,b.value=c;break;default:m.a.f.set(b,m.d.options.ab,c),b.__ko__hasDomDataOptionValue__=!0,b.value="number"==typeof c?c:""}break;case"select":""!==c&&null!==c||(c=a);for(var e,f=-1,g=0,h=b.options.length;g<h;++g)if((e=m.i.s(b.options[g]))==c||""==e&&c===a){f=g;break}(d||0<=f||c===a&&1<b.size)&&(b.selectedIndex=f);break;default:null!==c&&c!==a||(c=""),b.value=c}}}}(),m.b("selectExtensions",m.i),m.b("selectExtensions.readValue",m.i.s),m.b("selectExtensions.writeValue",m.i.Y),m.h=function(){function a(a){a=m.a.ib(a),123===a.charCodeAt(0)&&(a=a.slice(1,-1));var b,c=[],g=a.match(d),h=[],i=0;if(g){g.push(",");for(var j,k=0;j=g[k];++k){var l=j.charCodeAt(0);if(44===l){if(0>=i){c.push(b&&h.length?{key:b,value:h.join("")}:{unknown:b||h.join("")}),b=i=0,h=[];continue}}else if(58===l){if(!i&&!b&&1===h.length){b=h.pop();continue}}else 47===l&&k&&1<j.length?(l=g[k-1].match(e))&&!f[l[0]]&&(a=a.substr(a.indexOf(j)+1),g=a.match(d),g.push(","),k=-1,j="/"):40===l||123===l||91===l?++i:41===l||125===l||93===l?--i:b||h.length||34!==l&&39!==l||(j=j.slice(1,-1));h.push(j)}}
return c}var b=["true","false","null","undefined"],c=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,d=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),e=/[\])"'A-Za-z0-9_$]+$/,f={in:1,return:1,typeof:1},g={};return{ka:[],V:g,bb:a,Ea:function(d,e){function f(a,d){var e;if(!k){var l=m.getBindingHandler(a);if(l&&l.preprocess&&!(d=l.preprocess(d,a,f)))return;(l=g[a])&&(e=d,0<=m.a.m(b,e)?e=!1:(l=e.match(c),e=null!==l&&(l[1]?"Object("+l[1]+")"+l[2]:e)),l=e),l&&i.push("'"+a+"':function(_z){"+e+"=_z}")}j&&(d="function(){return "+d+" }"),h.push("'"+a+"':"+d)}e=e||{};var h=[],i=[],j=e.valueAccessors,k=e.bindingParams,l="string"==typeof d?a(d):d;return m.a.o(l,function(a){f(a.key||a.unknown,a.value)}),i.length&&f("_ko_property_writers","{"+i.join(",")+" }"),h.join(",")},vc:function(a,b){for(var c=0;c<a.length;c++)if(a[c].key==b)return!0;return!1},ra:function(a,b,c,d,e){a&&m.F(a)?!m.Da(a)||e&&a.B()===d||a(d):(a=b.get("_ko_property_writers"))&&a[c]&&a[c](d)}}}(),m.b("expressionRewriting",m.h),m.b("expressionRewriting.bindingRewriteValidators",m.h.ka),m.b("expressionRewriting.parseObjectLiteral",m.h.bb),m.b("expressionRewriting.preProcessBindings",m.h.Ea),m.b("expressionRewriting._twoWayBindings",m.h.V),m.b("jsonExpressionRewriting",m.h),m.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",m.h.Ea),function(){function a(a){return 8==a.nodeType&&g.test(f?a.text:a.nodeValue)}function b(a){return 8==a.nodeType&&h.test(f?a.text:a.nodeValue)}function d(c,d){for(var e=c,f=1,g=[];e=e.nextSibling;){if(b(e)&&0===--f)return g;g.push(e),a(e)&&f++}if(!d)throw Error("Cannot find closing comment tag to match: "+c.nodeValue);return null}function e(a,b){var c=d(a,b);return c?0<c.length?c[c.length-1].nextSibling:a.nextSibling:null}var f=c&&"\x3c!--test--\x3e"===c.createComment("test").text,g=f?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,h=f?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,i={ul:!0,ol:!0};m.e={R:{},childNodes:function(b){return a(b)?d(b):b.childNodes},ma:function(b){if(a(b)){b=m.e.childNodes(b);for(var c=0,d=b.length;c<d;c++)m.removeNode(b[c])}else m.a.Ra(b)},T:function(b,c){if(a(b)){m.e.ma(b);for(var d=b.nextSibling,e=0,f=c.length;e<f;e++)d.parentNode.insertBefore(c[e],d)}else m.a.T(b,c)},Mb:function(b,c){a(b)?b.parentNode.insertBefore(c,b.nextSibling):b.firstChild?b.insertBefore(c,b.firstChild):b.appendChild(c)},Fb:function(b,c,d){d?a(b)?b.parentNode.insertBefore(c,d.nextSibling):d.nextSibling?b.insertBefore(c,d.nextSibling):b.appendChild(c):m.e.Mb(b,c)},firstChild:function(c){return a(c)?!c.nextSibling||b(c.nextSibling)?null:c.nextSibling:c.firstChild},nextSibling:function(c){return a(c)&&(c=e(c)),c.nextSibling&&b(c.nextSibling)?null:c.nextSibling},oc:a,Fc:function(a){return(a=(f?a.text:a.nodeValue).match(g))?a[1]:null},Kb:function(c){if(i[m.a.v(c)]){var d=c.firstChild;if(d)do{if(1===d.nodeType){var f;f=d.firstChild;var g=null;if(f)do{if(g)g.push(f);else if(a(f)){var h=e(f,!0);h?f=h:g=[f]}else b(f)&&(g=[f])}while(f=f.nextSibling);if(f=g)for(g=d.nextSibling,h=0;h<f.length;h++)g?c.insertBefore(f[h],g):c.appendChild(f[h])}}while(d=d.nextSibling)}}}}(),m.b("virtualElements",m.e),m.b("virtualElements.allowedBindings",m.e.R),m.b("virtualElements.emptyNode",m.e.ma),m.b("virtualElements.insertAfter",m.e.Fb),m.b("virtualElements.prepend",m.e.Mb),m.b("virtualElements.setDomNodeChildren",m.e.T),function(){m.L=function(){this.ec={}},m.a.extend(m.L.prototype,{nodeHasBindings:function(a){switch(a.nodeType){case 1:return null!=a.getAttribute("data-bind")||m.g.getComponentNameForNode(a);case 8:return m.e.oc(a);default:return!1}},getBindings:function(a,b){var c=this.getBindingsString(a,b),c=c?this.parseBindingsString(c,b,a):null;return m.g.sb(c,a,b,!1)},getBindingAccessors:function(a,b){var c=this.getBindingsString(a,b),c=c?this.parseBindingsString(c,b,a,{valueAccessors:!0}):null;return m.g.sb(c,a,b,!0)},getBindingsString:function(a){switch(a.nodeType){case 1:return a.getAttribute("data-bind");case 8:return m.e.Fc(a);default:return null}},parseBindingsString:function(a,b,c,d){try{var e,f=this.ec,g=a+(d&&d.valueAccessors||"");if(!(e=f[g])){var h,i="with($context){with($data||{}){return{"+m.h.Ea(a,d)+"}}}";h=new Function("$context","$element",i),e=f[g]=h}return e(b,c)}catch(b){throw b.message="Unable to parse bindings.\nBindings value: "+a+"\nMessage: "+b.message,b}}}),m.L.instance=new m.L}(),m.b("bindingProvider",m.L),function(){function c(a){return function(){return a}}function d(a){return a()}function f(a){return m.a.pa(m.k.u(a),function(b,c){return function(){return a()[c]}})}function g(a,b,d){return"function"==typeof a?f(a.bind(null,b,d)):m.a.pa(a,c)}function h(a,b){return f(this.getBindings.bind(this,a,b))}function i(a,b,c){var d,e=m.e.firstChild(b),f=m.L.instance,g=f.preprocessNode;if(g){for(;d=e;)e=m.e.nextSibling(d),g.call(f,d);e=m.e.firstChild(b)}for(;d=e;)e=m.e.nextSibling(d),j(a,d,c)}function j(a,b,c){var d=!0,e=1===b.nodeType;e&&m.e.Kb(b),(e&&c||m.L.instance.nodeHasBindings(b))&&(d=l(b,null,a,c).shouldBindDescendants),d&&!o[m.a.v(b)]&&i(a,b,!e)}function k(a){var b=[],c={},d=[];return m.a.A(a,function e(f){if(!c[f]){var g=m.getBindingHandler(f);g&&(g.after&&(d.push(f),m.a.o(g.after,function(b){if(a[b]){if(-1!==m.a.m(d,b))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+d.join(", "));e(b)}}),d.length--),b.push({key:f,Eb:g})),c[f]=!0}}),b}function l(b,c,e,f){var g=m.a.f.get(b,p);if(!c){if(g)throw Error("You cannot apply bindings multiple times to the same element.");m.a.f.set(b,p,!0)}!g&&f&&m.Tb(b,e);var i;if(c&&"function"!=typeof c)i=c;else{var j=m.L.instance,l=j.getBindingAccessors||h,n=m.j(function(){return(i=c?c(e,b):l.call(j,b,e))&&e.K&&e.K(),i},null,{q:b});i&&n.$()||(n=null)}var o;if(i){var q=n?function(a){return function(){return d(n()[a])}}:function(a){return i[a]},r=function(){return m.a.pa(n?n():i,d)};r.get=function(a){return i[a]&&d(q(a))},r.has=function(a){return a in i},f=k(i),m.a.o(f,function(c){var d=c.Eb.init,f=c.Eb.update,g=c.key;if(8===b.nodeType&&!m.e.R[g])throw Error("The binding '"+g+"' cannot be used with virtual elements");try{"function"==typeof d&&m.k.u(function(){var c=d(b,q(g),r,e.$data,e);if(c&&c.controlsDescendantBindings){if(o!==a)throw Error("Multiple bindings ("+o+" and "+g+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");o=g}}),"function"==typeof f&&m.j(function(){f(b,q(g),r,e.$data,e)},null,{q:b})}catch(a){throw a.message='Unable to process binding "'+g+": "+i[g]+'"\nMessage: '+a.message,a}})}return{shouldBindDescendants:o===a}}function n(a){return a&&a instanceof m.N?a:new m.N(a)}m.d={};var o={script:!0,textarea:!0};m.getBindingHandler=function(a){return m.d[a]},m.N=function(b,c,d,e){var f,g=this,h="function"==typeof b&&!m.F(b),i=m.j(function(){var a=h?b():b,f=m.a.c(a);return c?(c.K&&c.K(),m.a.extend(g,c),i&&(g.K=i)):(g.$parents=[],g.$root=f,g.ko=m),g.$rawData=a,g.$data=f,d&&(g[d]=f),e&&e(g,c,f),g.$data},null,{Pa:function(){return f&&!m.a.tb(f)},q:!0});i.$()&&(g.K=i,i.equalityComparer=null,f=[],i.Zb=function(b){f.push(b),m.a.C.fa(b,function(b){m.a.ya(f,b),f.length||(i.p(),g.K=i=a)})})},m.N.prototype.createChildContext=function(a,b,c){return new m.N(a,this,b,function(a,b){a.$parentContext=b,a.$parent=b.$data,a.$parents=(b.$parents||[]).slice(0),a.$parents.unshift(a.$parent),c&&c(a)})},m.N.prototype.extend=function(a){return new m.N(this.K||this.$data,this,null,function(b,c){b.$rawData=c.$rawData,m.a.extend(b,"function"==typeof a?a():a)})};var p=m.a.f.I(),q=m.a.f.I();m.Tb=function(a,b){if(2!=arguments.length)return m.a.f.get(a,q);m.a.f.set(a,q,b),b.K&&b.K.Zb(a)},m.va=function(a,b,c){return 1===a.nodeType&&m.e.Kb(a),l(a,b,n(c),!0)},m.cc=function(a,b,c){return c=n(c),m.va(a,g(b,c,a),c)},m.Ja=function(a,b){1!==b.nodeType&&8!==b.nodeType||i(n(a),b,!0)},m.ub=function(a,c){if(!e&&b.jQuery&&(e=b.jQuery),c&&1!==c.nodeType&&8!==c.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");c=c||b.document.body,j(n(a),c,!0)},m.Oa=function(b){switch(b.nodeType){case 1:case 8:var c=m.Tb(b);if(c)return c;if(b.parentNode)return m.Oa(b.parentNode)}return a},m.gc=function(b){return(b=m.Oa(b))?b.$data:a},m.b("bindingHandlers",m.d),m.b("applyBindings",m.ub),m.b("applyBindingsToDescendants",m.Ja),m.b("applyBindingAccessorsToNode",m.va),m.b("applyBindingsToNode",m.cc),m.b("contextFor",m.Oa),m.b("dataFor",m.gc)}(),function(a){function b(b,d){var g,h=e.hasOwnProperty(b)?e[b]:a;h?h.U(d):(h=e[b]=new m.Q,h.U(d),c(b,function(a,c){var d=!(!c||!c.synchronous);f[b]={definition:a,tc:d},delete e[b],g||d?h.notifySubscribers(a):setTimeout(function(){h.notifySubscribers(a)},0)}),g=!0)}function c(a,b){d("getConfig",[a],function(c){c?d("loadComponent",[a,c],function(a){b(a,c)}):b(null,null)})}function d(b,c,e,f){f||(f=m.g.loaders.slice(0));var g=f.shift();if(g){var h=g[b];if(h){var i=!1;if(h.apply(g,c.concat(function(a){i?e(null):null!==a?e(a):d(b,c,e,f)}))!==a&&(i=!0,!g.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else d(b,c,e,f)}else e(null)}var e={},f={};m.g={get:function(c,d){var e=f.hasOwnProperty(c)?f[c]:a;e?e.tc?m.k.u(function(){d(e.definition)}):setTimeout(function(){d(e.definition)},0):b(c,d)},zb:function(a){delete f[a]},ob:d},m.g.loaders=[],m.b("components",m.g),m.b("components.get",m.g.get),m.b("components.clearCachedDefinition",m.g.zb)}(),function(){function a(a,b,c,d){function e(){0==--h&&d(f)}var f={},h=2,i=c.template;c=c.viewModel,i?g(b,i,function(b){m.g.ob("loadTemplate",[a,b],function(a){f.template=a,e()})}):e(),c?g(b,c,function(b){m.g.ob("loadViewModel",[a,b],function(a){f[k]=a,e()})}):e()}function d(a,b,c){if("function"==typeof b)c(function(a){return new b(a)});else if("function"==typeof b[k])c(b[k]);else if("instance"in b){var e=b.instance;c(function(){return e})}else"viewModel"in b?d(a,b.viewModel,c):a("Unknown viewModel value: "+b)}function e(a){switch(m.a.v(a)){case"script":return m.a.ca(a.text);case"textarea":return m.a.ca(a.value);case"template":if(f(a.content))return m.a.la(a.content.childNodes)}return m.a.la(a.childNodes)}function f(a){return b.DocumentFragment?a instanceof DocumentFragment:a&&11===a.nodeType}function g(a,c,d){"string"==typeof c.require?h||b.require?(h||b.require)([c.require],d):a("Uses require, but no AMD loader is present"):d(c)}function i(a){return function(b){throw Error("Component '"+a+"': "+b)}}var j={};m.g.register=function(a,b){if(!b)throw Error("Invalid configuration for "+a);if(m.g.Xa(a))throw Error("Component "+a+" is already registered");j[a]=b},m.g.Xa=function(a){return a in j},m.g.Ec=function(a){delete j[a],m.g.zb(a)},m.g.Ab={getConfig:function(a,b){b(j.hasOwnProperty(a)?j[a]:null)},loadComponent:function(b,c,d){var e=i(b);g(e,c,function(c){a(b,e,c,d)})},loadTemplate:function(a,d,g){if(a=i(a),"string"==typeof d)g(m.a.ca(d));else if(d instanceof Array)g(d);else if(f(d))g(m.a.O(d.childNodes));else if(d.element)if(d=d.element,b.HTMLElement?d instanceof HTMLElement:d&&d.tagName&&1===d.nodeType)g(e(d));else if("string"==typeof d){var h=c.getElementById(d);h?g(e(h)):a("Cannot find element with ID "+d)}else a("Unknown element type: "+d);else a("Unknown template value: "+d)},loadViewModel:function(a,b,c){d(i(a),b,c)}};var k="createViewModel";m.b("components.register",m.g.register),m.b("components.isRegistered",m.g.Xa),m.b("components.unregister",m.g.Ec),m.b("components.defaultLoader",m.g.Ab),m.g.loaders.push(m.g.Ab),m.g.$b=j}(),function(){function a(a,c){var d=a.getAttribute("params");if(d){var d=b.parseBindingsString(d,c,a,{valueAccessors:!0,bindingParams:!0}),d=m.a.pa(d,function(b){return m.w(b,null,{q:a})}),e=m.a.pa(d,function(b){var c=b.B();return b.$()?m.w({read:function(){return m.a.c(b())},write:m.Da(c)&&function(a){b()(a)},q:a}):c});return e.hasOwnProperty("$raw")||(e.$raw=d),e}return{$raw:{}}}m.g.getComponentNameForNode=function(a){return a=m.a.v(a),m.g.Xa(a)&&a},m.g.sb=function(b,c,d,e){if(1===c.nodeType){var f=m.g.getComponentNameForNode(c);if(f){if(b=b||{},b.component)throw Error('Cannot use the "component" binding on a custom element matching a component');var g={name:f,params:a(c,d)};b.component=e?function(){return g}:g}}return b};var b=new m.L;9>m.a.M&&(m.g.register=function(a){return function(b){return c.createElement(b),a.apply(this,arguments)}}(m.g.register),c.createDocumentFragment=function(a){return function(){var b,c=a(),d=m.g.$b;for(b in d)d.hasOwnProperty(b)&&c.createElement(b);return c}}(c.createDocumentFragment))}(),function(a){function b(a,b,c){if(!(b=b.template))throw Error("Component '"+a+"' has no template");a=m.a.la(b),m.e.T(c,a)}function c(a,b,c,d){var e=a.createViewModel;return e?e.call(a,d,{element:b,templateNodes:c}):d}var d=0;m.d.component={init:function(a,e,f,g,h){function i(){var a=j&&j.dispose;"function"==typeof a&&a.call(j),k=null}var j,k,l=m.a.O(m.e.childNodes(a));return m.a.C.fa(a,i),m.w(function(){var f,g,n=m.a.c(e());if("string"==typeof n?f=n:(f=m.a.c(n.name),g=m.a.c(n.params)),!f)throw Error("No component name specified");var o=k=++d;m.g.get(f,function(d){if(k===o){if(i(),!d)throw Error("Unknown component '"+f+"'");b(f,d,a);var e=c(d,a,l,g);d=h.createChildContext(e,void 0,function(a){a.$component=e,a.$componentTemplateNodes=l}),j=e,m.Ja(d,a)}})},null,{q:a}),{controlsDescendantBindings:!0}}},m.e.R.component=!0}();var q={class:"className",for:"htmlFor"};m.d.attr={update:function(b,c){var d=m.a.c(c())||{};m.a.A(d,function(c,d){d=m.a.c(d);var e=!1===d||null===d||d===a;e&&b.removeAttribute(c),8>=m.a.M&&c in q?(c=q[c],e?b.removeAttribute(c):b[c]=d):e||b.setAttribute(c,d.toString()),"name"===c&&m.a.Rb(b,e?"":d.toString())})}},function(){m.d.checked={after:["value","attr"],init:function(b,c,d){function e(){var a=b.checked,e=l?g():a;if(!m.Z.Ca()&&(!i||a)){var f=m.k.u(c);j?k!==e?(a&&(m.a.ga(f,e,!0),m.a.ga(f,k,!1)),k=e):m.a.ga(f,e,a):m.h.ra(f,d,"checked",e,!0)}}function f(){var a=m.a.c(c());b.checked=j?0<=m.a.m(a,g()):h?a:g()===a}var g=m.Nb(function(){return d.has("checkedValue")?m.a.c(d.get("checkedValue")):d.has("value")?m.a.c(d.get("value")):b.value}),h="checkbox"==b.type,i="radio"==b.type;if(h||i){var j=h&&m.a.c(c())instanceof Array,k=j?g():a,l=i||j;i&&!b.name&&m.d.uniqueName.init(b,function(){return!0}),m.w(e,null,{q:b}),m.a.n(b,"click",e),m.w(f,null,{q:b})}}},m.h.V.checked=!0,m.d.checkedValue={update:function(a,b){a.value=m.a.c(b())}}}(),m.d.css={update:function(a,b){var c=m.a.c(b());null!==c&&"object"==typeof c?m.a.A(c,function(b,c){c=m.a.c(c),m.a.Ia(a,b,c)}):(c=String(c||""),m.a.Ia(a,a.__ko__cssValue,!1),a.__ko__cssValue=c,m.a.Ia(a,c,!0))}},m.d.enable={update:function(a,b){var c=m.a.c(b());c&&a.disabled?a.removeAttribute("disabled"):c||a.disabled||(a.disabled=!0)}},m.d.disable={update:function(a,b){m.d.enable.update(a,function(){return!m.a.c(b())})}},m.d.event={init:function(a,b,c,d,e){var f=b()||{};m.a.A(f,function(f){"string"==typeof f&&m.a.n(a,f,function(a){var g,h=b()[f];if(h){try{var i=m.a.O(arguments);d=e.$data,i.unshift(d),g=h.apply(d,i)}finally{!0!==g&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}!1===c.get(f+"Bubble")&&(a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation())}})})}},m.d.foreach={Ib:function(a){return function(){var b=a(),c=m.a.cb(b);return c&&"number"!=typeof c.length?(m.a.c(b),{foreach:c.data,as:c.as,includeDestroyed:c.includeDestroyed,afterAdd:c.afterAdd,beforeRemove:c.beforeRemove,afterRender:c.afterRender,beforeMove:c.beforeMove,afterMove:c.afterMove,templateEngine:m.P.Va}):{foreach:b,templateEngine:m.P.Va}}},init:function(a,b){return m.d.template.init(a,m.d.foreach.Ib(b))},update:function(a,b,c,d,e){return m.d.template.update(a,m.d.foreach.Ib(b),c,d,e)}},m.h.ka.foreach=!1,m.e.R.foreach=!0,m.d.hasfocus={init:function(a,b,c){function d(d){a.__ko_hasfocusUpdating=!0;var e=a.ownerDocument;if("activeElement"in e){var f;try{f=e.activeElement}catch(a){f=e.body}d=f===a}e=b(),m.h.ra(e,c,"hasfocus",d,!0),a.__ko_hasfocusLastValue=d,a.__ko_hasfocusUpdating=!1}var e=d.bind(null,!0),f=d.bind(null,!1);m.a.n(a,"focus",e),m.a.n(a,"focusin",e),m.a.n(a,"blur",f),m.a.n(a,"focusout",f)},update:function(a,b){var c=!!m.a.c(b());a.__ko_hasfocusUpdating||a.__ko_hasfocusLastValue===c||(c?a.focus():a.blur(),m.k.u(m.a.qa,null,[a,c?"focusin":"focusout"]))}},m.h.V.hasfocus=!0,m.d.hasFocus=m.d.hasfocus,m.h.V.hasFocus=!0,m.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(a,b){m.a.gb(a,b())}},l("if"),l("ifnot",!1,!0),l("with",!0,!1,function(a,b){return a.createChildContext(b)});var r={};m.d.options={init:function(a){if("select"!==m.a.v(a))throw Error("options binding applies only to SELECT elements");for(;0<a.length;)a.remove(0);return{controlsDescendantBindings:!0}},update:function(b,c,d){function e(){return m.a.xa(b.options,function(a){return a.selected})}function f(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c}function g(a,c){if(p&&k)m.i.Y(b,m.a.c(d.get("value")),!0);else if(o.length){var e=0<=m.a.m(o,m.i.s(c[0]));m.a.Sb(c[0],e),p&&!e&&m.k.u(m.a.qa,null,[b,"change"])}}var h=b.multiple,i=0!=b.length&&h?b.scrollTop:null,j=m.a.c(c()),k=d.get("valueAllowUnset")&&d.has("value"),l=d.get("optionsIncludeDestroyed");c={};var n,o=[];k||(h?o=m.a.Ka(e(),m.i.s):0<=b.selectedIndex&&o.push(m.i.s(b.options[b.selectedIndex]))),j&&(void 0===j.length&&(j=[j]),n=m.a.xa(j,function(b){return l||b===a||null===b||!m.a.c(b._destroy)}),d.has("optionsCaption")&&null!==(j=m.a.c(d.get("optionsCaption")))&&j!==a&&n.unshift(r));var p=!1;c.beforeRemove=function(a){b.removeChild(a)},j=g,d.has("optionsAfterRender")&&"function"==typeof d.get("optionsAfterRender")&&(j=function(b,c){g(0,c),m.k.u(d.get("optionsAfterRender"),null,[c[0],b!==r?b:a])}),m.a.fb(b,n,function(c,e,g){return g.length&&(o=!k&&g[0].selected?[m.i.s(g[0])]:[],p=!0),e=b.ownerDocument.createElement("option"),c===r?(m.a.Ha(e,d.get("optionsCaption")),m.i.Y(e,a)):(g=f(c,d.get("optionsValue"),c),m.i.Y(e,m.a.c(g)),c=f(c,d.get("optionsText"),g),m.a.Ha(e,c)),[e]},c,j),m.k.u(function(){k?m.i.Y(b,m.a.c(d.get("value")),!0):(h?o.length&&e().length<o.length:o.length&&0<=b.selectedIndex?m.i.s(b.options[b.selectedIndex])!==o[0]:o.length||0<=b.selectedIndex)&&m.a.qa(b,"change")}),m.a.kc(b),i&&20<Math.abs(i-b.scrollTop)&&(b.scrollTop=i)}},m.d.options.ab=m.a.f.I(),m.d.selectedOptions={after:["options","foreach"],init:function(a,b,c){m.a.n(a,"change",function(){var d=b(),e=[];m.a.o(a.getElementsByTagName("option"),function(a){a.selected&&e.push(m.i.s(a))}),m.h.ra(d,c,"selectedOptions",e)})},update:function(a,b){if("select"!=m.a.v(a))throw Error("values binding applies only to SELECT elements");var c=m.a.c(b());c&&"number"==typeof c.length&&m.a.o(a.getElementsByTagName("option"),function(a){var b=0<=m.a.m(c,m.i.s(a));m.a.Sb(a,b)})}},m.h.V.selectedOptions=!0,m.d.style={update:function(b,c){var d=m.a.c(c()||{});m.a.A(d,function(c,d){d=m.a.c(d),null!==d&&d!==a&&!1!==d||(d=""),b.style[c]=d})}},m.d.submit={init:function(a,b,c,d,e){if("function"!=typeof b())throw Error("The value for a submit binding must be a function");m.a.n(a,"submit",function(c){var d,f=b();try{d=f.call(e.$data,a)}finally{!0!==d&&(c.preventDefault?c.preventDefault():c.returnValue=!1)}})}},m.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(a,b){m.a.Ha(a,b())}},m.e.R.text=!0,function(){if(b&&b.navigator)var c=function(a){if(a)return parseFloat(a[1])},d=b.opera&&b.opera.version&&parseInt(b.opera.version()),e=b.navigator.userAgent,f=c(e.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),g=c(e.match(/Firefox\/([^ ]*)/));if(10>m.a.M)var h=m.a.f.I(),i=m.a.f.I(),j=function(a){var b=this.activeElement;(b=b&&m.a.f.get(b,i))&&b(a)},k=function(a,b){var c=a.ownerDocument;m.a.f.get(c,h)||(m.a.f.set(c,h,!0),m.a.n(c,"selectionchange",j)),m.a.f.set(a,i,b)};m.d.textInput={init:function(b,c,e){function h(a,c){m.a.n(b,a,c)}function i(){var d=m.a.c(c());null!==d&&d!==a||(d=""),o!==a&&d===o?setTimeout(i,4):b.value!==d&&(p=d,b.value=d)}function j(){n||(o=b.value,n=setTimeout(l,4))}function l(){clearTimeout(n),o=n=a;var d=b.value;p!==d&&(p=d,m.h.ra(c(),e,"textInput",d))}var n,o,p=b.value;10>m.a.M?(h("propertychange",function(a){"value"===a.propertyName&&l()}),8==m.a.M&&(h("keyup",l),h("keydown",l)),8<=m.a.M&&(k(b,l),h("dragend",j))):(h("input",l),5>f&&"textarea"===m.a.v(b)?(h("keydown",j),h("paste",j),h("cut",j)):11>d?h("keydown",j):4>g&&(h("DOMAutoComplete",l),h("dragdrop",l),h("drop",l))),h("change",l),m.w(i,null,{q:b})}},m.h.V.textInput=!0,m.d.textinput={preprocess:function(a,b,c){c("textInput",a)}}}(),m.d.uniqueName={init:function(a,b){if(b()){var c="ko_unique_"+ ++m.d.uniqueName.fc;m.a.Rb(a,c)}}},m.d.uniqueName.fc=0,m.d.value={after:["options","foreach"],init:function(a,b,c){if("input"!=a.tagName.toLowerCase()||"checkbox"!=a.type&&"radio"!=a.type){var d=["change"],e=c.get("valueUpdate"),f=!1,g=null;e&&("string"==typeof e&&(e=[e]),m.a.ia(d,e),d=m.a.wb(d));var h=function(){g=null,f=!1;var d=b(),e=m.i.s(a);m.h.ra(d,c,"value",e)};!m.a.M||"input"!=a.tagName.toLowerCase()||"text"!=a.type||"off"==a.autocomplete||a.form&&"off"==a.form.autocomplete||-1!=m.a.m(d,"propertychange")||(m.a.n(a,"propertychange",function(){f=!0}),m.a.n(a,"focus",function(){f=!1}),m.a.n(a,"blur",function(){f&&h()})),m.a.o(d,function(b){var c=h;m.a.Dc(b,"after")&&(c=function(){g=m.i.s(a),setTimeout(h,0)},b=b.substring(5)),m.a.n(a,b,c)});var i=function(){var d=m.a.c(b()),e=m.i.s(a);if(null!==g&&d===g)setTimeout(i,0);else if(d!==e)if("select"===m.a.v(a)){var f=c.get("valueAllowUnset"),e=function(){m.i.Y(a,d,f)};e(),f||d===m.i.s(a)?setTimeout(e,0):m.k.u(m.a.qa,null,[a,"change"])}else m.i.Y(a,d)};m.w(i,null,{q:a})}else m.va(a,{checkedValue:b})},update:function(){}},m.h.V.value=!0,m.d.visible={update:function(a,b){var c=m.a.c(b()),d="none"!=a.style.display;c&&!d?a.style.display="":!c&&d&&(a.style.display="none")}},function(a){m.d[a]={init:function(b,c,d,e,f){return m.d.event.init.call(this,b,function(){var b={};return b[a]=c(),b},d,e,f)}}}("click"),m.J=function(){},m.J.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},m.J.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},m.J.prototype.makeTemplateSource=function(a,b){if("string"==typeof a){b=b||c;var d=b.getElementById(a);if(!d)throw Error("Cannot find template with ID "+a);return new m.t.l(d)}if(1==a.nodeType||8==a.nodeType)return new m.t.ha(a);throw Error("Unknown template type: "+a)},m.J.prototype.renderTemplate=function(a,b,c,d){return a=this.makeTemplateSource(a,d),this.renderTemplateSource(a,b,c,d)},m.J.prototype.isTemplateRewritten=function(a,b){return!1===this.allowTemplateRewriting||this.makeTemplateSource(a,b).data("isRewritten")},m.J.prototype.rewriteTemplate=function(a,b,c){a=this.makeTemplateSource(a,c),b=b(a.text()),a.text(b),a.data("isRewritten",!0)},m.b("templateEngine",m.J),m.kb=function(){function a(a,b,c,d){a=m.h.bb(a);for(var e=m.h.ka,f=0;f<a.length;f++){var g=a[f].key;if(e.hasOwnProperty(g)){var h=e[g];if("function"==typeof h){if(g=h(a[f].value))throw Error(g)}else if(!h)throw Error("This template engine does not support the '"+g+"' binding within its templates")}}return c="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+m.h.Ea(a,{valueAccessors:!0})+" } })()},'"+c.toLowerCase()+"')",d.createJavaScriptEvaluatorBlock(c)+b}var b=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,c=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{lc:function(a,b,c){b.isTemplateRewritten(a,c)||b.rewriteTemplate(a,function(a){return m.kb.xc(a,b)},c)},xc:function(d,e){return d.replace(b,function(b,c,d,f,g){return a(g,c,d,e)}).replace(c,function(b,c){return a(c,"\x3c!-- ko --\x3e","#comment",e)})},dc:function(a,b){return m.H.$a(function(c,d){var e=c.nextSibling;e&&e.nodeName.toLowerCase()===b&&m.va(e,a,d)})}}}(),m.b("__tr_ambtns",m.kb.dc),function(){m.t={},m.t.l=function(a){this.l=a},m.t.l.prototype.text=function(){var a=m.a.v(this.l),a="script"===a?"text":"textarea"===a?"value":"innerHTML";if(0==arguments.length)return this.l[a];var b=arguments[0];"innerHTML"===a?m.a.gb(this.l,b):this.l[a]=b};var b=m.a.f.I()+"_";m.t.l.prototype.data=function(a){if(1===arguments.length)return m.a.f.get(this.l,b+a);m.a.f.set(this.l,b+a,arguments[1])};var c=m.a.f.I();m.t.ha=function(a){this.l=a},m.t.ha.prototype=new m.t.l,m.t.ha.prototype.text=function(){if(0==arguments.length){var b=m.a.f.get(this.l,c)||{};return b.lb===a&&b.Na&&(b.lb=b.Na.innerHTML),b.lb}m.a.f.set(this.l,c,{lb:arguments[0]})},m.t.l.prototype.nodes=function(){if(0==arguments.length)return(m.a.f.get(this.l,c)||{}).Na;m.a.f.set(this.l,c,{Na:arguments[0]})},m.b("templateSources",m.t),m.b("templateSources.domElement",m.t.l),m.b("templateSources.anonymousTemplate",m.t.ha)}(),function(){function b(a,b,c){var d;for(b=m.e.nextSibling(b);a&&(d=a)!==b;)a=m.e.nextSibling(d),c(d,a)}function c(a,c){if(a.length){var d=a[0],e=a[a.length-1],f=d.parentNode,g=m.L.instance,h=g.preprocessNode;if(h){if(b(d,e,function(a,b){var c=a.previousSibling,f=h.call(g,a);f&&(a===d&&(d=f[0]||b),a===e&&(e=f[f.length-1]||c))}),a.length=0,!d)return;d===e?a.push(d):(a.push(d,e),m.a.na(a,f))}b(d,e,function(a){1!==a.nodeType&&8!==a.nodeType||m.ub(c,a)}),b(d,e,function(a){1!==a.nodeType&&8!==a.nodeType||m.H.Xb(a,[c])}),m.a.na(a,f)}}function d(a){return a.nodeType?a:0<a.length?a[0]:null}function e(a,b,e,f,h){h=h||{};var i=(a&&d(a)||e||{}).ownerDocument,j=h.templateEngine||g;if(m.kb.lc(e,j,i),e=j.renderTemplate(e,f,h,i),"number"!=typeof e.length||0<e.length&&"number"!=typeof e[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(i=!1,b){case"replaceChildren":m.e.T(a,e),i=!0;break;case"replaceNode":m.a.Qb(a,e),i=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+b)}return i&&(c(e,f),h.afterRender&&m.k.u(h.afterRender,null,[e,f.$data])),e}function f(a,b,c){return m.F(a)?a():"function"==typeof a?a(b,c):a}var g;m.hb=function(b){if(b!=a&&!(b instanceof m.J))throw Error("templateEngine must inherit from ko.templateEngine");g=b},m.eb=function(b,c,h,i,j){if(h=h||{},(h.templateEngine||g)==a)throw Error("Set a template engine before calling renderTemplate");if(j=j||"replaceChildren",i){var k=d(i);return m.j(function(){var a=c&&c instanceof m.N?c:new m.N(m.a.c(c)),g=f(b,a.$data,a),a=e(i,j,g,a,h);"replaceNode"==j&&(i=a,k=d(i))},null,{Pa:function(){return!k||!m.a.Qa(k)},q:k&&"replaceNode"==j?k.parentNode:k})}return m.H.$a(function(a){m.eb(b,c,h,a,"replaceNode")})},m.Cc=function(b,d,g,h,i){function j(a,b){c(b,l),g.afterRender&&g.afterRender(b,a),l=null}function k(a,c){return l=i.createChildContext(a,g.as,function(a){a.$index=c}),e(null,"ignoreTargetNode",f(b,a,l),l,g)}var l;return m.j(function(){var b=m.a.c(d)||[];void 0===b.length&&(b=[b]),b=m.a.xa(b,function(b){return g.includeDestroyed||b===a||null===b||!m.a.c(b._destroy)}),m.k.u(m.a.fb,null,[h,b,k,g,j])},null,{q:h})};var h=m.a.f.I();m.d.template={init:function(a,b){var c=m.a.c(b());if("string"==typeof c||c.name)m.e.ma(a);else{if("nodes"in c){if(c=c.nodes||[],m.F(c))throw Error('The "nodes" option must be a plain, non-observable array.')}else c=m.e.childNodes(a);c=m.a.Jb(c),new m.t.ha(a).nodes(c)}return{controlsDescendantBindings:!0}},update:function(b,c,d,e,f){var g,i=c();c=m.a.c(i),d=!0,e=null,"string"==typeof c?c={}:(i=c.name,"if"in c&&(d=m.a.c(c.if)),d&&"ifnot"in c&&(d=!m.a.c(c.ifnot)),g=m.a.c(c.data)),"foreach"in c?e=m.Cc(i||b,d&&c.foreach||[],c,b,f):d?(f="data"in c?f.createChildContext(g,c.as):f,e=m.eb(i||b,f,c,b)):m.e.ma(b),f=e,(g=m.a.f.get(b,h))&&"function"==typeof g.p&&g.p(),m.a.f.set(b,h,f&&f.$()?f:a)}},m.h.ka.template=function(a){return a=m.h.bb(a),1==a.length&&a[0].unknown||m.h.vc(a,"name")?null:"This template engine does not support anonymous templates nested within its templates"},m.e.R.template=!0}(),m.b("setTemplateEngine",m.hb),m.b("renderTemplate",m.eb),m.a.Cb=function(a,b,c){if(a.length&&b.length){var d,e,f,g,h;for(d=e=0;(!c||d<c)&&(g=a[e]);++e){for(f=0;h=b[f];++f)if(g.value===h.value){g.moved=h.index,h.moved=g.index,b.splice(f,1),d=f=0;break}d+=f}}},m.a.Ma=function(){function a(a,b,c,d,e){var f,g,h,i,j,k=Math.min,l=Math.max,n=[],o=a.length,p=b.length,q=p-o||1,r=o+p+1;for(f=0;f<=o;f++)for(i=h,n.push(h=[]),j=k(p,f+q),g=l(0,f-1);g<=j;g++)h[g]=g?f?a[f-1]===b[g-1]?i[g-1]:k(i[g]||r,h[g-1]||r)+1:g+1:f+1;for(k=[],l=[],q=[],f=o,g=p;f||g;)p=n[f][g]-1,g&&p===n[f][g-1]?l.push(k[k.length]={status:c,value:b[--g],index:g}):f&&p===n[f-1][g]?q.push(k[k.length]={status:d,value:a[--f],index:f}):(--g,--f,e.sparse||k.push({status:"retained",value:b[g]}));return m.a.Cb(l,q,10*o),k.reverse()}return function(b,c,d){return d="boolean"==typeof d?{dontLimitMoves:d}:d||{},b=b||[],c=c||[],b.length<=c.length?a(b,c,"added","deleted",d):a(c,b,"deleted","added",d)}}(),m.b("utils.compareArrays",m.a.Ma),function(){function b(b,c,d,e,f){var g=[],h=m.j(function(){var a=c(d,f,m.a.na(g,b))||[];0<g.length&&(m.a.Qb(g,a),e&&m.k.u(e,null,[d,a,f])),g.length=0,m.a.ia(g,a)},null,{q:b,Pa:function(){return!m.a.tb(g)}});return{aa:g,j:h.$()?h:a}}var c=m.a.f.I();m.a.fb=function(d,e,f,g,h){function i(a,b){u=l[b],r!==b&&(x[a]=u),u.Ua(r++),m.a.na(u.aa,d),p.push(u),t.push(u)}function j(a,b){if(a)for(var c=0,d=b.length;c<d;c++)b[c]&&m.a.o(b[c].aa,function(d){a(d,c,b[c].wa)})}e=e||[],g=g||{};var k=m.a.f.get(d,c)===a,l=m.a.f.get(d,c)||[],n=m.a.Ka(l,function(a){return a.wa}),o=m.a.Ma(n,e,g.dontLimitMoves),p=[],q=0,r=0,s=[],t=[];e=[];for(var u,v,w,x=[],n=[],y=0;v=o[y];y++)switch(w=v.moved,v.status){case"deleted":w===a&&(u=l[q],u.j&&u.j.p(),s.push.apply(s,m.a.na(u.aa,d)),g.beforeRemove&&(e[y]=u,t.push(u))),q++;break;case"retained":i(y,q++);break;case"added":w!==a?i(y,w):(u={wa:v.value,Ua:m.r(r++)},p.push(u),t.push(u),k||(n[y]=u))}j(g.beforeMove,x),m.a.o(s,g.beforeRemove?m.S:m.removeNode);for(var z,y=0,k=m.e.firstChild(d);u=t[y];y++){for(u.aa||m.a.extend(u,b(d,f,u.wa,h,u.Ua)),q=0;o=u.aa[q];k=o.nextSibling,z=o,q++)o!==k&&m.e.Fb(d,o,z);!u.rc&&h&&(h(u.wa,u.aa,u.Ua),u.rc=!0)}j(g.beforeRemove,e),j(g.afterMove,x),j(g.afterAdd,n),m.a.f.set(d,c,p)}}(),m.b("utils.setDomNodeChildrenFromArrayMapping",m.a.fb),m.P=function(){this.allowTemplateRewriting=!1},m.P.prototype=new m.J,m.P.prototype.renderTemplateSource=function(a,b,c,d){return(b=(9>m.a.M?0:a.nodes)?a.nodes():null)?m.a.O(b.cloneNode(!0).childNodes):(a=a.text(),m.a.ca(a,d))},m.P.Va=new m.P,m.hb(m.P.Va),m.b("nativeTemplateEngine",m.P),function(){m.Ya=function(){var a=this.uc=function(){if(!e||!e.tmpl)return 0;try{if(0<=e.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(a){}return 1}();this.renderTemplateSource=function(b,d,f,g){if(g=g||c,f=f||{},2>a)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var h=b.data("precompiled");return h||(h=b.text()||"",h=e.template(null,"{{ko_with $item.koBindingContext}}"+h+"{{/ko_with}}"),b.data("precompiled",h)),b=[d.$data],d=e.extend({koBindingContext:d},f.templateOptions),d=e.tmpl(h,b,d),d.appendTo(g.createElement("div")),e.fragments={},d},this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+a+" })()) }}"},this.addTemplate=function(a,b){c.write("<script type='text/html' id='"+a+"'>"+b+"<\/script>")},0<a&&(e.tmpl.tag.ko_code={open:"__.push($1 || '');"},e.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},m.Ya.prototype=new m.J;var a=new m.Ya;0<a.uc&&m.hb(a),m.b("jqueryTmplTemplateEngine",m.Ya)}()})}()}(),function(a){a.extend(a.fn,{validate:function(b){if(!this.length)return void(b&&b.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var c=a.data(this[0],"validator");return c||(this.attr("novalidate","novalidate"),c=new a.validator(b,this[0]),a.data(this[0],"validator",c),
c.settings.onsubmit&&(this.validateDelegate(":submit","click",function(b){c.settings.submitHandler&&(c.submitButton=b.target),a(b.target).hasClass("cancel")&&(c.cancelSubmit=!0),void 0!==a(b.target).attr("formnovalidate")&&(c.cancelSubmit=!0)}),this.submit(function(b){function d(){var d;return!c.settings.submitHandler||(c.submitButton&&(d=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(a(c.submitButton).val()).appendTo(c.currentForm)),c.settings.submitHandler.call(c,c.currentForm,b),c.submitButton&&d.remove(),!1)}return c.settings.debug&&b.preventDefault(),c.cancelSubmit?(c.cancelSubmit=!1,d()):c.form()?c.pendingRequest?(c.formSubmitted=!0,!1):d():(c.focusInvalid(),!1)})),c)},valid:function(){if(a(this[0]).is("form"))return this.validate().form();var b=!0,c=a(this[0].form).validate();return this.each(function(){b=b&&c.element(this)}),b},removeAttrs:function(b){var c={},d=this;return a.each(b.split(/\s/),function(a,b){c[b]=d.attr(b),d.removeAttr(b)}),c},rules:function(b,c){var d=this[0];if(b){var e=a.data(d.form,"validator").settings,f=e.rules,g=a.validator.staticRules(d);switch(b){case"add":a.extend(g,a.validator.normalizeRule(c)),delete g.messages,f[d.name]=g,c.messages&&(e.messages[d.name]=a.extend(e.messages[d.name],c.messages));break;case"remove":if(!c)return delete f[d.name],g;var h={};return a.each(c.split(/\s/),function(a,b){h[b]=g[b],delete g[b]}),h}}var i=a.validator.normalizeRules(a.extend({},a.validator.classRules(d),a.validator.attributeRules(d),a.validator.dataRules(d),a.validator.staticRules(d)),d);if(i.required){var j=i.required;delete i.required,i=a.extend({required:j},i)}return i}}),a.extend(a.expr[":"],{blank:function(b){return!a.trim(""+a(b).val())},filled:function(b){return!!a.trim(""+a(b).val())},unchecked:function(b){return!a(b).prop("checked")}}),a.validator=function(b,c){this.settings=a.extend(!0,{},a.validator.defaults,b),this.currentForm=c,this.init()},a.validator.format=function(b,c){return 1===arguments.length?function(){var c=a.makeArray(arguments);return c.unshift(b),a.validator.format.apply(this,c)}:(arguments.length>2&&c.constructor!==Array&&(c=a.makeArray(arguments).slice(1)),c.constructor!==Array&&(c=[c]),a.each(c,function(a,c){b=b.replace(new RegExp("\\{"+a+"\\}","g"),function(){return c})}),b)},a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a,b){this.lastActive=a,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(a)).hide())},onfocusout:function(a,b){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(a,b){9===b.which&&""===this.elementValue(a)||(a.name in this.submitted||a===this.lastElement)&&this.element(a)},onclick:function(a,b){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).addClass(c).removeClass(d):a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).removeClass(c).addClass(d):a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function b(b){var c=a.data(this[0].form,"validator"),d="on"+b.type.replace(/^validate/,"");c.settings[d]&&c.settings[d].call(c,this[0],b)}this.labelContainer=a(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm),this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var c=this.groups={};a.each(this.settings.groups,function(b,d){"string"==typeof d&&(d=d.split(/\s/)),a.each(d,function(a,d){c[d]=b})});var d=this.settings.rules;a.each(d,function(b,c){d[b]=a.validator.normalizeRule(c)}),a(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",b).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",b),this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),a.extend(this.submitted,this.errorMap),this.invalid=a.extend({},this.errorMap),this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){b=this.validationTargetFor(this.clean(b)),this.lastElement=b,this.prepareElement(b),this.currentElements=a(b);var c=!1!==this.check(b);return c?delete this.invalid[b.name]:this.invalid[b.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),c},showErrors:function(b){if(b){a.extend(this.errorMap,b),this.errorList=[];for(var c in b)this.errorList.push({message:b[c],element:this.findByName(c)[0]});this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b=0;for(var c in a)b++;return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(a){}},findLastActive:function(){var b=this.lastActive;return b&&1===a.grep(this.errorList,function(a){return a.element.name===b.name}).length&&b},elements:function(){var b=this,c={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&b.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in c||!b.objectLength(a(this).rules()))&&(c[this.name]=!0,!0)})},clean:function(b){return a(b)[0]},errors:function(){var b=this.settings.errorClass.replace(" ",".");return a(this.settings.errorElement+"."+b,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=a([]),this.toHide=a([]),this.currentElements=a([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset(),this.toHide=this.errorsFor(a)},elementValue:function(b){var c=a(b).attr("type"),d=a(b).val();return"radio"===c||"checkbox"===c?a("input[name='"+a(b).attr("name")+"']:checked").val():"string"==typeof d?d.replace(/\r/g,""):d},check:function(b){b=this.validationTargetFor(this.clean(b));var c,d=a(b).rules(),e=!1,f=this.elementValue(b);for(var g in d){var h={method:g,parameters:d[g]};try{if("dependency-mismatch"===(c=a.validator.methods[g].call(this,f,b,h.parameters))){e=!0;continue}if(e=!1,"pending"===c)return void(this.toHide=this.toHide.not(this.errorsFor(b)));if(!c)return this.formatAndAdd(b,h),!1}catch(a){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+b.id+", check the '"+h.method+"' method.",a),a}}if(!e)return this.objectLength(d)&&this.successList.push(b),!0},customDataMessage:function(b,c){return a(b).data("msg-"+c.toLowerCase())||b.attributes&&a(b).attr("data-msg-"+c.toLowerCase())},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor===String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customDataMessage(b,c),!this.settings.ignoreTitle&&b.title||void 0,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(b,c){var d=this.defaultMessage(b,c.method),e=/\$?\{(\d+)\}/g;"function"==typeof d?d=d.call(this,c.parameters,b):e.test(d)&&(d=a.validator.format(d.replace(e,"{$1}"),c.parameters)),this.errorList.push({message:d,element:b}),this.errorMap[b.name]=d,this.submitted[b.name]=d},addWrapper:function(a){return this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper))),a},defaultShowErrors:function(){var a,b;for(a=0;this.errorList[a];a++){var c=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,c.element,this.settings.errorClass,this.settings.validClass),this.showLabel(c.element,c.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,c){var d=this.errorsFor(b);d.length?(d.removeClass(this.settings.validClass).addClass(this.settings.errorClass),d.html(c)):(d=a("<"+this.settings.errorElement+">").attr("for",this.idOrName(b)).addClass(this.settings.errorClass).html(c||""),this.settings.wrapper&&(d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(d).length||(this.settings.errorPlacement?this.settings.errorPlacement(d,a(b)):d.insertAfter(b))),!c&&this.settings.success&&(d.text(""),"string"==typeof this.settings.success?d.addClass(this.settings.success):this.settings.success(d,b)),this.toShow=this.toShow.add(d)},errorsFor:function(b){var c=this.idOrName(b);return this.errors().filter(function(){return a(this).attr("for")===c})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){return this.checkable(a)&&(a=this.findByName(a.name).not(this.settings.ignore)[0]),a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){return a(this.currentForm).find("[name='"+b+"']")},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case"select":return a("option:selected",c).length;case"input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return b.length},depend:function(a,b){return!this.dependTypes[typeof a]||this.dependTypes[typeof a](a,b)},dependTypes:{boolean:function(a,b){return a},string:function(b,c){return!!a(b,c.form).length},function:function(a,b){return a(b)}},optional:function(b){var c=this.elementValue(b);return!a.validator.methods.required.call(this,c,b)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(b,c){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[b.name],c&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!c&&0===this.pendingRequest&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor===String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c={},d=a(b).attr("class");return d&&a.each(d.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])}),c},attributeRules:function(b){var c={},d=a(b),e=d[0].getAttribute("type");for(var f in a.validator.methods){var g;"required"===f?(g=d.get(0).getAttribute(f),""===g&&(g=!0),g=!!g):g=d.attr(f),/min|max/.test(f)&&(null===e||/number|range|text/.test(e))&&(g=Number(g)),g?c[f]=g:e===f&&"range"!==e&&(c[f]=!0)}return c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength,c},dataRules:function(b){var c,d,e={},f=a(b);for(c in a.validator.methods)void 0!==(d=f.data("rule-"+c.toLowerCase()))&&(e[c]=d);return e},staticRules:function(b){var c={},d=a.data(b.form,"validator");return d.settings.rules&&(c=a.validator.normalizeRule(d.settings.rules[b.name])||{}),c},normalizeRules:function(b,c){return a.each(b,function(d,e){if(!1===e)return void delete b[d];if(e.param||e.depends){var f=!0;switch(typeof e.depends){case"string":f=!!a(e.depends,c.form).length;break;case"function":f=e.depends.call(c,c)}f?b[d]=void 0===e.param||e.param:delete b[d]}}),a.each(b,function(d,e){b[d]=a.isFunction(e)?e(c):e}),a.each(["minlength","maxlength"],function(){b[this]&&(b[this]=Number(b[this]))}),a.each(["rangelength","range"],function(){var c;b[this]&&(a.isArray(b[this])?b[this]=[Number(b[this][0]),Number(b[this][1])]:"string"==typeof b[this]&&(c=b[this].split(/[\s,]+/),b[this]=[Number(c[0]),Number(c[1])]))}),a.validator.autoCreateRanges&&(b.min&&b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),b.minlength&&b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength)),b},normalizeRule:function(b){if("string"==typeof b){var c={};a.each(b.split(/\s/),function(){c[this]=!0}),b=c}return b},addMethod:function(b,c,d){a.validator.methods[b]=c,a.validator.messages[b]=void 0!==d?d:a.validator.messages[b],c.length<3&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,c,d){if(!this.depend(d,c))return"dependency-mismatch";if("select"===c.nodeName.toLowerCase()){var e=a(c).val();return e&&e.length>0}return this.checkable(c)?this.getLength(b,c)>0:a.trim(b).length>0},email:function(a,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},url:function(a,b){return this.optional(b)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a).toString())},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9 \-]+/.test(a))return!1;var c=0,d=0,e=!1;a=a.replace(/\D/g,"");for(var f=a.length-1;f>=0;f--){var g=a.charAt(f);d=parseInt(g,10),e&&(d*=2)>9&&(d-=9),c+=d,e=!e}return c%10==0},minlength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(a.trim(b),c);return this.optional(c)||e>=d},maxlength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(a.trim(b),c);return this.optional(c)||e<=d},rangelength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(a.trim(b),c);return this.optional(c)||e>=d[0]&&e<=d[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||a<=c},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},equalTo:function(b,c,d){var e=a(d);return this.settings.onfocusout&&e.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(c).valid()}),b===e.val()},remote:function(b,c,d){if(this.optional(c))return"dependency-mismatch";var e=this.previousValue(c);if(this.settings.messages[c.name]||(this.settings.messages[c.name]={}),e.originalMessage=this.settings.messages[c.name].remote,this.settings.messages[c.name].remote=e.message,d="string"==typeof d&&{url:d}||d,e.old===b)return e.valid;e.old=b;var f=this;this.startRequest(c);var g={};return g[c.name]=b,a.ajax(a.extend(!0,{url:d,mode:"abort",port:"validate"+c.name,dataType:"json",data:g,success:function(d){f.settings.messages[c.name].remote=e.originalMessage;var g=!0===d||"true"===d;if(g){var h=f.formSubmitted;f.prepareElement(c),f.formSubmitted=h,f.successList.push(c),delete f.invalid[c.name],f.showErrors()}else{var i={},j=d||f.defaultMessage(c,"remote");i[c.name]=e.message=a.isFunction(j)?j(b):j,f.invalid[c.name]=!0,f.showErrors(i)}e.valid=g,f.stopRequest(c,g)}},d)),"pending"}}}),a.format=a.validator.format}(jQuery),function(a){var b={};if(a.ajaxPrefilter)a.ajaxPrefilter(function(a,c,d){var e=a.port;"abort"===a.mode&&(b[e]&&b[e].abort(),b[e]=d)});else{var c=a.ajax;a.ajax=function(d){var e=("mode"in d?d:a.ajaxSettings).mode,f=("port"in d?d:a.ajaxSettings).port;return"abort"===e?(b[f]&&b[f].abort(),b[f]=c.apply(this,arguments),b[f]):c.apply(this,arguments)}}}(jQuery),function(a){a.extend(a.fn,{validateDelegate:function(b,c,d){return this.bind(c,function(c){var e=a(c.target);if(e.is(b))return d.apply(e,arguments)})}})}(jQuery);var CSSCONSTANTS=CSSCONSTANTS||{};!function(){CSSCONSTANTS.mobileMaxWidth="600px",CSSCONSTANTS.mobileMaxWidthMQ="screen and (max-width: "+CSSCONSTANTS.mobileMaxWidth+")",CSSCONSTANTS.nonMobileMinWidth="601px",CSSCONSTANTS.nonMobileMinWidthMQ="screen and (min-width: "+CSSCONSTANTS.nonMobileMinWidth+")",CSSCONSTANTS.mobileHeaderMaxWidth="800px",CSSCONSTANTS.mobileHeaderMaxWidthMQ="screen and (max-width: "+CSSCONSTANTS.mobileHeaderMaxWidth+")",CSSCONSTANTS.nonMobileHeaderMinWidth="801px",CSSCONSTANTS.nonMobileHeaderMinWidthMQ="screen and (min-width: "+CSSCONSTANTS.nonMobileHeaderMinWidth+")",CSSCONSTANTS.nonDesktopMaxWidth="900px",CSSCONSTANTS.nonDesktopMaxWidthMQ="screen and (max-width: "+CSSCONSTANTS.nonDesktopMaxWidth+")",CSSCONSTANTS.desktopMinWidth="901px",CSSCONSTANTS.desktopMinWidthMQ="screen and (min-width: "+CSSCONSTANTS.desktopMinWidth+")",CSSCONSTANTS.hiddenClass="hidden",CSSCONSTANTS.hiddenMobileOnlyClass="hidden-mobile-only",CSSCONSTANTS.hiddenTabletAndMobileClass="hidden-tablet-and-mobile",CSSCONSTANTS.backgroundBlueClass="bg-blue",CSSCONSTANTS.backgroundPastel2Class="bg-pastel2",CSSCONSTANTS.bandClass="band",CSSCONSTANTS.noBottomPaddingClass="no-bottom-padding",CSSCONSTANTS.rowClass="row",CSSCONSTANTS.columnClass="col",CSSCONSTANTS.scaffoldClass="scaffold",CSSCONSTANTS.gridUnit=20,CSSCONSTANTS.buttonClass="btn",CSSCONSTANTS.boxClass="box",CSSCONSTANTS.reverseClass="reverse",CSSCONSTANTS.btnClass="btn",CSSCONSTANTS.btnBlueClass="btn--blue",CSSCONSTANTS.btnGreenClass="btn--green",CSSCONSTANTS.formRowClass="form-row",CSSCONSTANTS.errorMessageClass="error-message",CSSCONSTANTS.labelErrorClass="label-error",CSSCONSTANTS.fieldErrorClass="field-error",CSSCONSTANTS.replacedInputClass="replaced-input",CSSCONSTANTS.replacedInputLabelClass="replaced-input-label",CSSCONSTANTS.replacedInputLabelFocussedClass="replaced-input-label--focussed",CSSCONSTANTS.replacedInputLabelSelectedClass="replaced-input-label--selected"}();var CONFUSEDCORE=CONFUSEDCORE||{};CONFUSEDCORE.AJAX=CONFUSEDCORE.AJAX||{},CONFUSEDCORE.AJAX.Ajaxfacade=function(a){function b(a){return!a||!1!==a.Authenticated||(window.location.reload(),!1)}function c(a,b,c,d){a&&a.error&&a.error(b,c,d)}return{post:function(d,e,f){e.timeoutInterval||(e.timeoutInterval=5e3),null!==e.async&&void 0!==e.async||(e.async=!0),e.dataType||(e.dataType="json"),void 0===e.wrappedResponse&&(e.wrappedResponse=!0),a.ajax({type:"POST",url:d,data:f,dataType:e.dataType,timeout:e.timeoutInterval,async:e.async,success:function(a){if(null!==a&&void 0!==a){var d=null;if(a.hasOwnProperty("redirect"))d=a.redirect;else if(a.toString().indexOf("redirect")>=0)try{d=JSON.parse(a).redirect}catch(a){}if(null!==d)return void(document.location=d)}if(e.wrappedResponse){if(!a||"ok"!==a.Status)return void c(e);if(!e)return;if(e.requiresAuthentication&&!b(a))return;e.success&&e.success(a.Data)}else e.success(a)},error:function(a,b,d){if("timeout"===b&&e&&e.timeout)return void e.timeout();c(e,a,b,d)},complete:function(){void 0!==e.complete&&e.complete()}})},postAuthenticated:function(a,b,c){b||(b={}),b.requiresAuthentication=!0,this.post(a,b,c)}}}(window.jQuery);var CONFUSEDCORE=CONFUSEDCORE||{};CONFUSEDCORE.HELPERS=CONFUSEDCORE.HELPERS||{},CONFUSEDCORE.HELPERS.RedirectHelper=function(){return{redirect:function(a){window.location.href=a}}}();var CONFUSEDCORE=CONFUSEDCORE||{};CONFUSEDCORE.MI=CONFUSEDCORE.MI||{},CONFUSEDCORE.MI.MiListener=function(a,b){function c(a,c,d,e){var f=window.location.protocol+"//"+window.location.host+"/"+a;b.post(f,{success:function(a){d&&d()},error:function(){e&&e()}},c)}function d(a,b,d,e){c(h.MI_EVENT_URL,{EventType:a,EventInfo:b},d,e)}function e(a,b,d,e){c(h.MI_PAGEVIEW_URL,{EventType:a,EventInfo:b},d,e)}function f(a){e("LogPageView",{page:a})}function g(a,b,d,e){c(h.MI_NEWSESSION_URL,{EventType:a,EventInfo:b},d,e)}var h={MI_EVENT_URL:"miv2/event",MI_PAGEVIEW_URL:"miv2/pageview",MI_NEWSESSION_URL:"miv2/newsession"};return{postEvent:d,postPageView:e,pageView:f,postLogSession:g,setMI_URL:function(a){h.MI_URL=a}}}(window.jQuery,CONFUSEDCORE.AJAX.Ajaxfacade);var CONFUSEDCORE=CONFUSEDCORE||{},CSSCONSTANTS=CSSCONSTANTS||{};!function(a){CONFUSEDCORE.addErrorIndication=function(b){a.each(b,function(b,c){var d=a("#"+c),e=a("label[for="+c+"]"),f=c+"-error",g=a("#"+f);g.length>0&&(g.addClass(CSSCONSTANTS.errorMessageClass),d.attr("aria-described-by",f)),d.attr("aria-invalid","true"),d.addClass(CSSCONSTANTS.fieldErrorClass),e.addClass(CSSCONSTANTS.labelErrorClass)})},CONFUSEDCORE.removeErrorIndication=function(b){a.each(b,function(b,c){var d=a("#"+c),e=a("label[for="+c+"]"),f=c+"-error",g=a("#"+f);g.length>0&&(g.removeClass(CSSCONSTANTS.errorMessageClass),d.removeAttr("aria-described-by")),d.removeAttr("aria-invalid"),d.removeClass(CSSCONSTANTS.fieldErrorClass),e.removeClass(CSSCONSTANTS.labelErrorClass)})}}(window.jQuery);var CONFUSEDWEBSITE=CONFUSEDWEBSITE||{};!function(a,b,c){CONFUSEDWEBSITE.setupSearch=function(d){function e(){var c=g.data("action"),e=[];if(""===g.find('input[name="query"]').val())return void a(d.invalidInputSelector).show();a(d.invalidInputSelector).hide(),a.each(["cx","ie","sa","query"],function(a,b){e.push(b+"="+encodeURIComponent(g.find('input[name="'+b+'"]').val()))}),b.location.href=c+"?"+e.join("&")}function f(){c.search.CustomSearchControl.attachAutoCompletionWithOptions(a("#"+d.customSearchKeyId).val(),a("#"+d.searchTextId)[0],{submit:e},j)}var g=a("#"+d.searchFormId),h=a("."+d.buttonClass,g),i=a("#"+d.searchTextId,g),j={maxCompletions:5,styleOptions:{xOffset:10}};if(!c)return void console.log("!google");void 0===c.search||void 0===c.search.CustomSearchControl?c.setOnLoadCallback(function(){f()}):f(),a(d.invalidInputSelector).hide(),h.on("click",function(){return e(),!1}),i.on("keyup",function(a){return 13===a.which&&e(),!1})},CONFUSEDWEBSITE.setupSearchResult=function(b){function d(c,d){void 0!==d&&void 0!==d.results&&0!==d.results.length||(a(b.noResultsH2Selector).css("display",""),a(b.resultsH2Selector).css("display","none"))}function e(){var e={},f="",g=new c.search.CustomSearchControl(b.customSearchKey,e);b.resultsSetSize?g.setResultSetSize(b.resultsSetSize):g.setResultSetSize(c.search.Search.FILTERED_CSE_RESULTSET),g.setLinkTarget(c.search.Search.LINK_TARGET_SELF),g.setSearchCompleteCallback(null,d);var h=new c.search.DrawOptions;h.setAutoComplete(!0),h.enableSearchResultsOnly(),g.draw(a(b.resultsSelector)[0].id,h),f=CONFUSEDWEBSITE.getUrlVars();var i=f[b.queryParameter];void 0!==i&&g.execute(decodeURIComponent(i).replace(/\+/g," "))}c&&void 0!==b.customSearchKey&&b.resultsSelector&&a(b.resultsSelector)&&(void 0===c.search||void 0===c.search.CustomSearchControl?c.setOnLoadCallback(function(){e()},!0):e())},CONFUSEDWEBSITE.getUrlVars=function(){for(var a,c=[],d=b.location.href.slice(b.location.href.indexOf("?")+1).split("&"),e=0;e<d.length;e++)a=d[e].split("="),c.push(a[0]),c[a[0]]=a[1];return c},CONFUSEDWEBSITE.setupSearchResults=function(){a(".js-searchResultsConfiguration").each(function(a,b){CONFUSEDWEBSITE.setupSearchResult(b.dataset)})},CONFUSEDWEBSITE.setupSearchForms=function(){a(".js-searchFormConfiguration").each(function(a,b){CONFUSEDWEBSITE.setupSearch(b.dataset)})}}(window.jQuery,window,window.google);var confused=confused||{};!function(a){confused.quickquote={createQuickQuoteConnection:function(b){return{events:a.extend({url:"",connected:function(){},message:function(a){},error:function(){},complete:function(){}},b),start:function(b){var c=this;c._connection=a.connection(c.events.url),c._connection.received(function(a){var b=JSON.parse(a);if(null!=b.HasError&&!0===b.HasError)return void c.events.error();if(null!=b.Activity){var d=b.Activity;if(null!=d.Prices){d.Prices.length>0&&c.events.message(d)}!0!==d.StillWaiting&&(c._connection.stop(),c.events.complete())}}),c._connection.error(function(a){c.events.error(a,-1,-1)}),c._connection.start().done(function(){c.events.connected(),c._connection.send(b)})},abort:function(){this._connection.stop()}}}}}(jQuery),function(a,b,c){"use strict";b.Confused=b.Confused||{},b.Confused.CookieManager=b.Confused.CookieManager||{},b.Confused.CookiePolicyWidget=function(b){function c(){setTimeout(function(){a(g).addClass(h)},1e3)}function d(c,d,e){b.hasItem(f)||(k.postEvent(d),b.setItem(f,c,2147483647,"/",i),"false"===c&&(a("#CookieConsentMessage").hide(),a("#CookieConsentClose").hide(),a("#CookieDeclineMessage").show()),setTimeout(function(){a(g).addClass(h),a(g).removeClass(h)},e))}function e(){b.hasItem(f)||(a(function(){k.postEvent("CookiePopupShown"),c()}),a("body").on("click",function(b){"CookieConsentFalse"!==b.target.id&&"CookieConsentClose"!==b.target.id&&a(g).hasClass(h)&&d("true","CookiePopupDismissed:ConsentGranted",0)}),a("#CookieConsentClose").on("click",function(){d("true","CookiePopupClosed:ConsentGranted",0)}),a("#CookieConsentFalse").on("click",function(){d("false","CookiePopupClosed:ConsentDeclined",4e3)}))}var f="CookieConsent",g="#CookiePolicy",h="cookie-wrapper--slide-in",i=location.hostname,j=/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])(\.([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9]))*$/i,k=CONFUSEDCORE.MI.MiListener;if(j.test(i)){var l=i.split(".");l.shift(),i=l.join(".")}return{run:e}}(new b.Confused.CookieManager),b.Confused.CookiePolicyWidget.run()}(window.jQuery,window,document,window.Confused.CookieManager);var CSSCONSTANTS=CSSCONSTANTS||{};!function(a){"function"==typeof define&&define.amd?define(function(b){a(b("jquery"))}):a(window.jQuery)}(function(){CSSCONSTANTS.globalHeaderSecondaryClass="global-header__secondary",CSSCONSTANTS.globalHeaderActionsClass="global-header__actions",CSSCONSTANTS.globalHeaderActionsActionClass="global-header__actions__action",CSSCONSTANTS.globalHeaderActionsActionTwoClass="global-header__actions__action--two",CSSCONSTANTS.globalHeaderActionsLoginClass="global-header__actions__login",CSSCONSTANTS.globalHeaderActionsRetrieveClass="global-header__actions__retrieve",CSSCONSTANTS.globalHeaderActionsWelcomeClass="global-header__actions__welcome",CSSCONSTANTS.globalHeaderActionsWelcomeSalutationClass="global-header__actions__welcome__salutation",CSSCONSTANTS.globalNavCategoriesClass="global-nav__categories",CSSCONSTANTS.globalNavCategoryOpenClass="show-contents",CSSCONSTANTS.globalNavSubCategoriesClass="global-nav__subcategories",CSSCONSTANTS.globalNavSubCategoriesCloseClass="global-nav__subcategories__close",CSSCONSTANTS.globalNavPromoClass="global-nav__promo",CSSCONSTANTS.skipNavLinkClass="skip-nav-link",CSSCONSTANTS.mainId="main",CSSCONSTANTS.globalNavCategoryLinkWithSubCategoriesClass="global-nav__category__link--with-subcategories",CSSCONSTANTS.globalNavCategoryClass="global-nav__category",CSSCONSTANTS.globalHeaderMastheadClass="global-header__masthead",CSSCONSTANTS.globalNavCategoryLinkClass="global-nav__category__link",CSSCONSTANTS.globalNavSubCategoryClass="global-nav__subcategory",CSSCONSTANTS.pageClass="page",CSSCONSTANTS.globalSearchClass="global-search",CSSCONSTANTS.globalHeaderSearchFormClass="global-header__search__form",CSSCONSTANTS.mobileNavClass="mobile-nav",CSSCONSTANTS.mobileNavOpenClass="mobile-nav-open",CSSCONSTANTS.mobileNavCategoriesClass="mobile-nav__categories",CSSCONSTANTS.mobileNavCategoryClass="mobile-nav__category",CSSCONSTANTS.mobileNavCategoryHelpClass="mobile-nav__category--help",CSSCONSTANTS.mobileNavCategoryLinkClass="mobile-nav__category__link",
CSSCONSTANTS.mobileNavCategoryLinkHelpClass="mobile-nav__category__link--help",CSSCONSTANTS.mobileNavSubCategoriesClass="mobile-nav__subcategories",CSSCONSTANTS.mobileNavSubCategoriesOpenClass="mobile-nav__subcategories--open",CSSCONSTANTS.mobileNavSubCategoriesContainerClass="mobile-nav__subcategories__container",CSSCONSTANTS.mobileNavSubCategoriesHeadingClass="mobile-nav__subcategories__heading",CSSCONSTANTS.mobileNavSearchFormClass="mobile-nav__search-form",CSSCONSTANTS.globalNavHelpClass="global-nav__help",CSSCONSTANTS.mobileNavToggleClass="mobile-nav-toggle",CSSCONSTANTS.globalNavSubcategoryHeaderClass="global-nav__subcategory__header",CSSCONSTANTS.mobileNavSubcategoryHeadingClass="mobile-nav__subcategory__heading",CSSCONSTANTS.mobileNavSubcategoryContentsClass="mobile-nav__subcategory__contents",CSSCONSTANTS.globalNavSubcategoryContentsClass="global-nav__subcategory__contents",CSSCONSTANTS.globalNavSubcategoryContentsProminentClass="global-nav__subcategory__contents--prominent",CSSCONSTANTS.globalNavSubcategoryContentsItemClass="global-nav__subcategory__contents__item",CSSCONSTANTS.mobileNavSubcategoryContentsItemClass="mobile-nav__subcategory__contents__item",CSSCONSTANTS.mobileNavCloseClass="mobile-nav__close",CSSCONSTANTS.globalHeaderSearchClass="global-header__search",CSSCONSTANTS.globalNavSearchClass="global-nav__search",CSSCONSTANTS.globalNavSearchOpenClass="global-nav__search--open",CSSCONSTANTS.globalSearchButtonClass="global-search__button",CSSCONSTANTS.globalHeaderMessagesToggleClass="global-header__messages-toggle",CSSCONSTANTS.globalHeaderMessagesPanelClass="global-header__messages-panel",CSSCONSTANTS.globalHeaderClass="global-header",CSSCONSTANTS.globalHeaderLogoClass="global-header__confused-logo",CSSCONSTANTS.globalNavToolsClass="global-nav__tools",CSSCONSTANTS.globalHeaderMessagesPanelCloseClass="global-header__messages-panel__close",CSSCONSTANTS.globalHeaderMessagesToggleClosedClass="global-header__messages-toggle--closed",CSSCONSTANTS.globalHeaderMessagesToggleOpenedClass="global-header__messages-toggle--open",CSSCONSTANTS.globalHeaderMessagesToggleViewedClass="global-header__messages-toggle--viewed"});var CONFUSEDWEBSITE=CONFUSEDWEBSITE||{},CSSCONSTANTS=CSSCONSTANTS||{};!function(a){"function"==typeof define&&define.amd?define(function(b){a(b("jquery"))}):a(window.jQuery)}(function(a){CONFUSEDWEBSITE.setupHeaderActions=function(){a(".global-header__actions .btn--dropdown").on("click",function(b){b.preventDefault();var c=a(this),d=a(window).width();c.hasClass("btn--dropdown--closed")?(c.removeClass("btn--dropdown--closed"),c.addClass("btn--dropdown--open"),d>800&&a(".global-header__secondary").css("margin-top","-2px")):(c.removeClass("btn--dropdown--open"),c.addClass("btn--dropdown--closed"),a(".global-header__secondary").css("margin-top","0")),c.nextAll(".nav-dropdown").slideToggle("fast")}),enquire.register(CSSCONSTANTS.nonMobileHeaderMinWidthMQ,{match:function(){CONFUSEDWEBSITE.moveHeaderActions("nonMobile")},unmatch:function(){CONFUSEDWEBSITE.moveHeaderActions("mobile")}},!0)},CONFUSEDWEBSITE.moveHeaderActions=function(b){var c=a("."+CSSCONSTANTS.globalHeaderActionsClass),d=a("."+CSSCONSTANTS.globalHeaderMastheadClass),e=a("."+CSSCONSTANTS.globalHeaderSecondaryClass+" ."+CSSCONSTANTS.scaffoldClass+"."+CSSCONSTANTS.columnClass);"nonMobile"===b?c.appendTo(d):"mobile"===b&&c.appendTo(e)}});var CONFUSEDWEBSITE=CONFUSEDWEBSITE||{},CSSCONSTANTS=CSSCONSTANTS||{};!function(a){"function"==typeof define&&define.amd?define(function(b){a(b("jquery"))}):a(window.jQuery)}(function(a){CONFUSEDWEBSITE.setupGlobalNav=function(){var b=a("."+CSSCONSTANTS.globalNavCategoryLinkClass),c=a("."+CSSCONSTANTS.globalNavSubCategoriesClass);a("."+CSSCONSTANTS.globalNavCategoryClass).each(function(){var b=a(this),c=b.find("."+CSSCONSTANTS.globalNavPromoClass),d=b.find(".global-nav-col:last-child");if(c.prependTo(d),Modernizr.touch){var e=b.find("."+CSSCONSTANTS.globalNavCategoryLinkClass),f=e.attr("href"),g=e.text(),h=a("<div/>",{class:"clearfix"}),i=a("<a/>",{class:"global-nav__subcategories__category-link",text:g,href:f}),j=b.find("."+CSSCONSTANTS.globalNavSubCategoriesClass);i.appendTo(h),h.prependTo(j)}}),c.each(function(){a(this).prev("."+CSSCONSTANTS.globalNavCategoryLinkClass).addClass(CSSCONSTANTS.globalNavCategoryLinkWithSubCategoriesClass)}),Modernizr.touch?(c.each(function(){var b=a(this),c=a("<a/>",{class:CSSCONSTANTS.globalNavSubCategoriesCloseClass,text:"close menu",href:"#"});c.appendTo(b),c.on("click",function(a){a.preventDefault(),CONFUSEDWEBSITE.toggleSubNav(b.prev())})}),b.on("click",function(d){var e=a(this),f=e.next(c);d.preventDefault(),b.not(e).removeClass(CSSCONSTANTS.globalNavCategoryOpenClass),c.not(f).hide(),CONFUSEDWEBSITE.toggleSubNav(e)})):(b.on("mouseenter",function(){CONFUSEDWEBSITE.showSubNav(a(this))}),b.on("mouseleave",function(){CONFUSEDWEBSITE.hideSubNav(a(this))}),c.on("mouseenter",function(){a(this).show(),a(this).prev().addClass(CSSCONSTANTS.globalNavCategoryOpenClass)}),c.on("mouseleave",function(){CONFUSEDWEBSITE.hideSubNav(a(this).prev())}),a("."+CSSCONSTANTS.globalNavCategoriesClass).attr("role","menubar"),a("."+CSSCONSTANTS.globalNavCategoryClass).attr("role","menuitem"),c.attr("role","menu"),b.attr("aria-haspopup","true"),b.on("keydown",function(b){var c=a(this);13===b.keyCode&&(b.preventDefault(),CONFUSEDWEBSITE.toggleSubNav(c))}),c.each(function(){var b=a(this);b.find("a").last().on("keydown",function(a){9===a.keyCode&&CONFUSEDWEBSITE.toggleSubNav(b.prev())})}))};var b;CONFUSEDWEBSITE.toggleSubNav=function(a){a.toggleClass(CSSCONSTANTS.globalNavCategoryOpenClass),a.next("."+CSSCONSTANTS.globalNavSubCategoriesClass).toggle()},CONFUSEDWEBSITE.showSubNav=function(a){b=setTimeout(function(){a.addClass(CSSCONSTANTS.globalNavCategoryOpenClass),a.next("."+CSSCONSTANTS.globalNavSubCategoriesClass).show()},250)},CONFUSEDWEBSITE.hideSubNav=function(a){clearTimeout(b),a.removeClass(CSSCONSTANTS.globalNavCategoryOpenClass),a.next("."+CSSCONSTANTS.globalNavSubCategoriesClass).hide()},CONFUSEDWEBSITE.skipNav=function(){a("."+CSSCONSTANTS.skipNavLinkClass).on("click",function(){a("#"+CSSCONSTANTS.mainId).attr("tabindex",-1).focus()})}});var CONFUSEDWEBSITE=CONFUSEDWEBSITE||{},CSSCONSTANTS=CSSCONSTANTS||{};!function(a){"function"==typeof define&&define.amd?define(function(b){a(b("jquery"))}):a(window.jQuery)}(function(a){CONFUSEDWEBSITE.setupMobileNav=function(){enquire.register(CSSCONSTANTS.mobileHeaderMaxWidthMQ,{match:function(){a("."+CSSCONSTANTS.mobileNavClass).length||CONFUSEDWEBSITE.createMobileNav()}})},CONFUSEDWEBSITE.createMobileNav=function(){var b=a("."+CSSCONSTANTS.pageClass),c=a("."+CSSCONSTANTS.globalNavCategoryClass),d=a("<nav/>",{class:CSSCONSTANTS.mobileNavClass}),e=a("<ul/>",{class:CSSCONSTANTS.mobileNavCategoriesClass}),f=a(".mobile-nav__quick-links"),g=a("."+CSSCONSTANTS.globalNavHelpClass),h=g.attr("href"),i=g.text(),j=a("<li />",{class:CSSCONSTANTS.mobileNavCategoryClass+" "+CSSCONSTANTS.mobileNavCategoryHelpClass}),k=a("<a />",{class:CSSCONSTANTS.mobileNavCategoryLinkClass,href:h,text:i}),l=a("."+CSSCONSTANTS.globalHeaderMastheadClass),m=a("<div />",{class:CSSCONSTANTS.mobileNavToggleClass}),n=a("<a />",{href:"#",text:"Menu"});a.each(c,function(){var b=a(this),c=b.find("."+CSSCONSTANTS.globalNavCategoryLinkClass),d=c.text(),f=c.attr("href"),g=c.attr("data-ga-click-category"),h=c.attr("data-ga-click-label"),i=b.find("."+CSSCONSTANTS.globalNavSubCategoryClass),j=a("<li/>",{class:CSSCONSTANTS.mobileNavCategoryClass}),k=a("<a/>",{class:CSSCONSTANTS.mobileNavCategoryLinkClass,href:"#","data-ga-click-category":g,"data-ga-click-label":h,text:d}),l=a("<nav/>",{class:CSSCONSTANTS.mobileNavSubCategoriesClass}),m=a("<div/>",{class:CSSCONSTANTS.mobileNavSubCategoriesContainerClass}),n=a("<a/>",{class:CSSCONSTANTS.mobileNavCloseClass,href:"#",text:"Back"}),o=a("<strong/>",{class:CSSCONSTANTS.mobileNavSubCategoriesHeadingClass}),p=a("<a/>",{href:f,text:d});n.appendTo(m),p.appendTo(o),o.appendTo(m),a.each(i,function(){var b=a(this),d=b.find("."+CSSCONSTANTS.globalNavSubcategoryHeaderClass).text(),e=b.find("."+CSSCONSTANTS.globalNavSubcategoryContentsClass),f=b.find("."+CSSCONSTANTS.globalNavSubcategoryContentsItemClass+" a"),g=a("<strong/>",{class:CSSCONSTANTS.mobileNavSubcategoryHeadingClass,text:d}),h=a("<ul />",{class:CSSCONSTANTS.mobileNavSubcategoryContentsClass});e.hasClass(CSSCONSTANTS.globalNavSubcategoryContentsProminentClass)&&h.addClass(CSSCONSTANTS.mobileNavSubcategoryContentsClass+"--prominent"),a.each(f,function(){var b=a(this),d=b.attr("href"),e=c.attr("data-ga-click-category"),f=b.attr("data-ga-click-label"),g=b.text(),i=a("<li/>",{class:CSSCONSTANTS.mobileNavSubcategoryContentsItemClass});a("<a/>",{href:d,text:g,"data-ga-click-category":e,"data-ga-click-label":f}).appendTo(i),i.appendTo(h)}),g.appendTo(m),h.appendTo(m)}),k.appendTo(j),m.appendTo(l),l.appendTo(j),j.appendTo(e)}),f.appendTo(d),k.appendTo(j),j.appendTo(e),e.appendTo(d),d.insertAfter(b),n.appendTo(m),m.appendTo(l),CONFUSEDWEBSITE.activateMobileNav()},CONFUSEDWEBSITE.activateMobileNav=function(){a("."+CSSCONSTANTS.mobileNavToggleClass+" a").on("click",function(b){a("."+CSSCONSTANTS.mobileNavClass).toggleClass(CSSCONSTANTS.mobileNavOpenClass),a("."+CSSCONSTANTS.pageClass).toggleClass(CSSCONSTANTS.mobileNavOpenClass),b.preventDefault()}),a("."+CSSCONSTANTS.mobileNavCategoryLinkClass).on("click",function(b){var c=a(this).next("."+CSSCONSTANTS.mobileNavSubCategoriesClass);c.length&&(b.preventDefault(),c.addClass(CSSCONSTANTS.mobileNavSubCategoriesOpenClass))}),a("."+CSSCONSTANTS.mobileNavCloseClass).on("click",function(b){b.preventDefault(),a(this).closest("."+CSSCONSTANTS.mobileNavSubCategoriesClass).removeClass(CSSCONSTANTS.mobileNavSubCategoriesOpenClass)})}});var CSSCONSTANTS=CSSCONSTANTS||{};!function(){CSSCONSTANTS.backToTopLinkClass="back-to-top-link",CSSCONSTANTS.globalFooterClass="global-footer",CSSCONSTANTS.brianModuleClass="brian-module",CSSCONSTANTS.withBrianModuleClass="with-brian-module",CSSCONSTANTS.equalizeHeightDesktopClass="js-equalizeHeight-desktop",CSSCONSTANTS.equalizeHeightSetDesktopClass="js-equalizeHeightSet-desktop",CSSCONSTANTS.equalizeHeightNonMobileClass="js-equalizeHeight-non-mobile",CSSCONSTANTS.equalizeHeightSetNonMobileClass="js-equalizeHeightSet-non-mobile",CSSCONSTANTS.expandingPanelClass="expanding-panel",CSSCONSTANTS.expandingPanelHeadingClass="expanding-panel__heading",CSSCONSTANTS.expandingPanelHeadingLinkClass="expanding-panel__heading__link",CSSCONSTANTS.expandingPanelHeadingOpenClass="expanding-panel__heading--open",CSSCONSTANTS.expandingPanelHeadingClosedClass="expanding-panel__heading--closed",CSSCONSTANTS.expandingPanelContentClass="expanding-panel__content",CSSCONSTANTS.videoClass="video",CSSCONSTANTS.videoBasicClass="video--basic",CSSCONSTANTS.videoControlsClass="video__controls",CSSCONSTANTS.videoPlaceholderClass="video__placeholder",CSSCONSTANTS.flexiMediaWrapperClass="flexi-media-wrapper",CSSCONSTANTS.socialShareTriggerOpenClass="social-share__option--select__trigger--open",CSSCONSTANTS.optionsDropdownTriggerClass="social-share__option--select__trigger",CSSCONSTANTS.socialLinkEmailClass="social-link--Email",CSSCONSTANTS.socialLinkPrintClass="social-link--Print",CSSCONSTANTS.socialShareOptionDropdownClass="social-share__option--select__dropdown",CSSCONSTANTS.socialShareOptionDropdownCloseClass="social-share__option--select__dropdown__close",CSSCONSTANTS.hideColumnOnMobileClass="hide-column-on-mobile",CSSCONSTANTS.hideColumnOnTabletAndMobileClass="hide-column-on-tablet-and-mobile",CSSCONSTANTS.fauxTableHeaderClass="faux-table-header",CSSCONSTANTS.responsiveTableVerticalClass="responsive-table--vertical",CSSCONSTANTS.cmsContentClass="cms-content",CSSCONSTANTS.overlapBandAboveClass="js-overlap-band-above",CSSCONSTANTS.overlapBandAboveNonMobileClass="js-overlap-band-above--non-mobile"}();var CONFUSEDWEBSITE=CONFUSEDWEBSITE||{},CSSCONSTANTS=CSSCONSTANTS||{};!function(a){CONFUSEDWEBSITE.setupEqualizeHeights=function(){var b;CONFUSEDWEBSITE.addEqualizeHeightsClasses(),enquire.register(CSSCONSTANTS.nonMobileMinWidthMQ,{match:function(){b=a("."+CSSCONSTANTS.equalizeHeightSetNonMobileClass),CONFUSEDWEBSITE.equalizeHeights(b,"."+CSSCONSTANTS.equalizeHeightNonMobileClass)},unmatch:function(){CONFUSEDWEBSITE.removeHeights("."+CSSCONSTANTS.equalizeHeightNonMobileClass)}},!0),enquire.register(CSSCONSTANTS.desktopMinWidthMQ,{match:function(){b=a("."+CSSCONSTANTS.equalizeHeightSetDesktopClass),CONFUSEDWEBSITE.equalizeHeights(b,"."+CSSCONSTANTS.equalizeHeightDesktopClass)},unmatch:function(){CONFUSEDWEBSITE.removeHeights("."+CSSCONSTANTS.equalizeHeightDesktopClass)}},!0),a(window).on("resize",function(){CONFUSEDWEBSITE.removeHeights("."+CSSCONSTANTS.equalizeHeightNonMobileClass),CONFUSEDWEBSITE.removeHeights("."+CSSCONSTANTS.equalizeHeightDesktopClass),enquire.register(CSSCONSTANTS.nonMobileMinWidthMQ,{match:function(){b=a("."+CSSCONSTANTS.equalizeHeightSetNonMobileClass),CONFUSEDWEBSITE.equalizeHeights(b,"."+CSSCONSTANTS.equalizeHeightNonMobileClass)}},!0),enquire.register(CSSCONSTANTS.desktopMinWidthMQ,{match:function(){b=a("."+CSSCONSTANTS.equalizeHeightSetDesktopClass),CONFUSEDWEBSITE.equalizeHeights(b,"."+CSSCONSTANTS.equalizeHeightDesktopClass)}},!0)})},CONFUSEDWEBSITE.addEqualizeHeightsClasses=function(){var b=a("."+CSSCONSTANTS.equalizeHeightDesktopClass),c=a("."+CSSCONSTANTS.equalizeHeightNonMobileClass);a.each(b,function(){a(this).closest(".row").addClass(CSSCONSTANTS.equalizeHeightSetDesktopClass)}),a.each(c,function(){a(this).closest(".row").addClass(CSSCONSTANTS.equalizeHeightSetNonMobileClass)})},CONFUSEDWEBSITE.equalizeHeights=function(b,c){a.each(b,function(){var b=a(this),d=b.find(c),e=0;a.each(d,function(){var b=a(this),c=b.outerHeight();c>e&&(e=c)}),a.each(d,function(){a(this).css("height",e)})})},CONFUSEDWEBSITE.removeHeights=function(b){a(b).css("height","auto")}}(window.jQuery);var CONFUSEDWEBSITE=CONFUSEDWEBSITE||{},CSSCONSTANTS=CSSCONSTANTS||{};!function(a){CONFUSEDWEBSITE.expandingPanel=function(){var b=a("."+CSSCONSTANTS.expandingPanelClass);a.each(b,function(){var b=a(this),c=b.find("."+CSSCONSTANTS.expandingPanelHeadingClass),d=c.find("."+CSSCONSTANTS.expandingPanelHeadingLinkClass),e=b.find("."+CSSCONSTANTS.expandingPanelContentClass);c.hasClass(CSSCONSTANTS.expandingPanelHeadingClosedClass)&&e.hide(),d.click(function(a){a.preventDefault(),c.hasClass(CSSCONSTANTS.expandingPanelHeadingOpenClass)?c.removeClass(CSSCONSTANTS.expandingPanelHeadingOpenClass).addClass(CSSCONSTANTS.expandingPanelHeadingClosedClass):c.removeClass(CSSCONSTANTS.expandingPanelHeadingClosedClass).addClass(CSSCONSTANTS.expandingPanelHeadingOpenClass),e.slideToggle("fast")})})}}(window.jQuery);var CONFUSEDWEBSITE=CONFUSEDWEBSITE||{},CSSCONSTANTS=CSSCONSTANTS||{};!function(a){CONFUSEDWEBSITE.responsiveTables=function(){a("."+CSSCONSTANTS.cmsContentClass+" table").each(function(){var b=a(this),c=b.find("th");b.hasClass("non-responsive-table")||(c.hasClass(CSSCONSTANTS.hideColumnOnMobileClass)?CONFUSEDWEBSITE.hideTableColumnsOnMobile(b):c.hasClass(CSSCONSTANTS.hideColumnOnTabletAndMobileClass)?CONFUSEDWEBSITE.hideTableColumnsOnTabletAndMobile(b):b.hasClass("tablet-responsive-table")?CONFUSEDWEBSITE.stackTableRows(b):CONFUSEDWEBSITE.stackTableRows(b,"mobile"))})},CONFUSEDWEBSITE.hideTableColumnsOnMobile=function(b){var c=b.find("."+CSSCONSTANTS.hideColumnOnMobileClass);c.each(function(){var c=a(this),d=c.index()+1;c.addClass(CSSCONSTANTS.hiddenMobileOnlyClass),b.find("tr").find("td:nth-child("+d+")").addClass(CSSCONSTANTS.hiddenMobileOnlyClass)})},CONFUSEDWEBSITE.hideTableColumnsOnTabletAndMobile=function(b){var c=b.find("."+CSSCONSTANTS.hideColumnOnTabletAndMobileClass);c.each(function(){var c=a(this),d=c.index()+1;c.addClass(CSSCONSTANTS.hiddenTabletAndMobileClass),b.find("tr").find("td:nth-child("+d+")").addClass(CSSCONSTANTS.hiddenTabletAndMobileClass)})},CONFUSEDWEBSITE.stackTableRows=function(b,c){var d=[],e=b.find("th"),f=b.find("tbody").find("tr:not(.tr-footnote)");"mobile"===c&&b.addClass(CSSCONSTANTS.responsiveTableVerticalClass),a.each(e,function(){var b=a(this);d.push(b.text())}),a.each(f,function(){var b=a(this),c=b.find("td"),e=0;a.each(c,function(){var b=a(this);a("<span>",{text:d[e],class:CSSCONSTANTS.fauxTableHeaderClass}).prependTo(b),e++})})}}(window.jQuery);var CONFUSEDWEBSITE=CONFUSEDWEBSITE||{},CSSCONSTANTS=CSSCONSTANTS||{};!function(a){CONFUSEDWEBSITE.setupOverlaps=function(){var b=a("."+CSSCONSTANTS.overlapBandAboveClass),c=a("."+CSSCONSTANTS.overlapBandAboveNonMobileClass);a.each(b,function(){CONFUSEDWEBSITE.createOverlap(a(this))}),enquire.register(CSSCONSTANTS.nonMobileHeaderMinWidthMQ,{match:function(){a.each(c,function(){CONFUSEDWEBSITE.createOverlap(a(this))})},unmatch:function(){a.each(c,function(){CONFUSEDWEBSITE.removeOverlap(a(this))})}},!0)},CONFUSEDWEBSITE.createOverlap=function(a){var b,c,d=a,e=d.closest("."+CSSCONSTANTS.bandClass),f=e.css("padding-top"),g=e.prev("."+CSSCONSTANTS.bandClass),h=d.outerHeight();c=g.hasClass("hero-with-filtered-image")?g.find(".hero-with-filtered-image__inner"):g,c.css("padding-bottom",""),b=c.css("padding-bottom"),d.css("margin-top",-(h/2+parseFloat(f))),d.css("margin-bottom",2*CSSCONSTANTS.gridUnit+"px"),c.css("padding-bottom",h/2+parseFloat(b))},CONFUSEDWEBSITE.removeOverlap=function(a){var b,c=a,d=c.closest("."+CSSCONSTANTS.bandClass),e=d.prev("."+CSSCONSTANTS.bandClass);b=e.hasClass("hero-with-filtered-image")?e.find(".hero-with-filtered-image__inner"):e,b.css("padding-bottom",""),c.css("margin-top","")}}(window.jQuery),function(a){a(".btt-arrow").click(function(){return a("html, body").animate({scrollTop:0},1e3),!1})}(window.jQuery);var CSSCONSTANTS=CSSCONSTANTS||{};!function(){CSSCONSTANTS.providerListClass="provider-list",CSSCONSTANTS.providerListMoreLinkClass="provider-list-more-link",CSSCONSTANTS.providersClass="provider-list__provider",CSSCONSTANTS.hiddenProvidersClass="provider-list__provider--hidden",CSSCONSTANTS.visibleProvidersClass="provider-list__provider--visible",CSSCONSTANTS.providerFilterClass="js-provider-list-filter",CSSCONSTANTS.providerFilterShowAllClass="js-provider-list-show-all",CSSCONSTANTS.transactionalLandingPageHeroClass="hero--transactional-landing",CSSCONSTANTS.transactionalLandingPageHeroHeadingClass="hero--transactional-landing__heading",CSSCONSTANTS.transactionalLandingPageHeroImageClass="hero--transactional-landing__image",CSSCONSTANTS.transactionalLandingPageHeroActionClass="hero--transactional-landing__action",CSSCONSTANTS.transactionalLandingPageHeroSpeechClass="hero--transactional-landing__speech",CSSCONSTANTS.reminderBoxClass="box--reminder",CSSCONSTANTS.heroHelpContactClass="hero--help__contact",CSSCONSTANTS.helpContactClass="help-contact",CSSCONSTANTS.productDriverClass="product-driver",CSSCONSTANTS.productDriverImageClass="product-driver__image",CSSCONSTANTS.productDriverNotesClass="product-driver__notes",CSSCONSTANTS.productDriverLinkClass="product-driver__link",CSSCONSTANTS.responsiveTabsWrapperClass="responsive-tabs-wrapper",CSSCONSTANTS.responsiveTabsClass="responsive-tabs",CSSCONSTANTS.responsiveTabsEnabledClass="responsive-tabs--enabled",CSSCONSTANTS.responsiveTabsHeadingClass="responsive-tabs__heading",CSSCONSTANTS.responsiveTabsHeadingActiveClass="responsive-tabs__heading--active",CSSCONSTANTS.responsiveTabsPanelClass="responsive-tabs__panel",CSSCONSTANTS.responsiveTabsPanelActiveClass="responsive-tabs__panel--active",CSSCONSTANTS.responsiveTabsPanelClosedAccordionOnlyClass="responsive-tabs__panel--closed-accordion-only",CSSCONSTANTS.responsiveTabsListClass="responsive-tabs__list",CSSCONSTANTS.responsiveTabsListItemClass="responsive-tabs__list__item",CSSCONSTANTS.responsiveTabsListItemActiveClass="responsive-tabs__list__item--active",CSSCONSTANTS.responsiveTabsStepsClass="responsive-tabs--steps"}();var CONFUSEDCMS=CONFUSEDCMS||{},CONFUSEDCORE=CONFUSEDCORE||{};!function(){CONFUSEDCMS.jQueryValidateExtensions=function(a){a.validator.addMethod("selectNone",function(a,b){return"0"!==b.value},"Please select an option."),a.validator.addMethod("regex",function(a,b,c){var d=new RegExp(c);return this.optional(b)||d.test(a)},"Please check your input."),a.validator.addMethod("notdefault",function(b,c,d){var e=a(c);if(e.is("[type=checkbox]"))return e.is(":checked");if(e.is("[type=radio]")){var f=e.attr("name");return $('[name="'+f+'"]').is(":checked")}return b!==d},"Please check your input."),a.validator.addMethod("regextrimmed",function(a,b,c){var d=new RegExp(c);return a=a.split(" ").join(""),this.optional(b)||d.test(a)},"Please check your input.")},CONFUSEDCMS.contactUsFormRules=function(){function a(a,b,c){var d=b.find(c.selector);0!==d.length&&(d.attr("data-validationerror")?a.settings.messages[d.attr("name")]=d.attr("data-validationerror"):c.message&&(a.settings.messages[d.attr("name")]=c.message),d.rules("add",c.rules))}function b(b,c,d){if(!b)throw"$form is undefined!";if(0!==b.length){d=d||{};for(var e=b.validate(d),f=0;f<c.length;f++){a(e,b,c[f])}}}var c=function(){return"true"===jQuery("input.phone").attr("data-required")&&jQuery("input.contactByPhoneYes").prop("checked")},d=function(a,b,c){this.selector=a,this.rules=b,this.message=c};return{hookup:b,validationRules:{firstName:new d("input.firstname",{notdefault:"",required:!0,regex:"^([a-z]|[A-Z]|[-']){2,20}$",messages:{required:"Please enter your <b>first name</b>.",regex:"Please enter a name between 2 and 20 letters long that does not include numbers, commas, or spaces.",notdefault:"Please enter a name between 2 and 20 letters long that does not include numbers, commas, or spaces."}},"There is a problem with the first name entered."),surname:new d("input.surname",{notdefault:"",required:!0,regex:"^([a-z]|[A-Z]|[-'\\ ]){2,30}$",messages:{required:"Please enter your <b>surname</b>.",regex:"Please enter a name between 2 and 30 letters long that does not include numbers or commas.",notdefault:"Please enter a name between 2 and 30 letters long that does not include numbers or commas."}},"There is a problem with the surname entered."),email:new d("input.email",{email:!0,notdefault:"",required:!0,messages:{email:"Please enter a valid <b>email address</b>.",required:"Please enter your <b>email address</b>.",notdefault:"Please enter your <b>email address</b>."}}),product:new d("select.product",{selectNone:!0,required:!0},"Please choose what you’re <b>contacting us</b> about"),hasPurchased:new d("select.haspurchased",{selectNone:!0,required:!0},"Please tell us if you've been successful in purchasing your insurance. If you're contacting us about something else, please select 'Not Applicable'."),moreinformation:new d("select#MoreInformation",{selectNone:!0,required:!0},"Please tell us <b>more about your query</b>"),title:new d("select#title",{required:!0,selectNone:!0},"Please select a <b>title</b>."),postcode:new d("input.postcode",{regex:"^([Gg][Ii][Rr] 0[Aa]{2})|((([A-Za-z][0-9]{1,2})|(([A-Za-z][A-Ha-hJ-Yj-y][0-9]{1,2})|(([A-Za-z][0-9][A-Za-z])|([A-Za-z][A-Ha-hJ-Yj-y][0-9]?[A-Za-z])))) {0,1}[0-9][A-Za-z]{2})$",notdefault:"",required:!0,messages:{required:"Please enter your <b>postcode</b>.",notdefault:"Please enter your <b>postcode</b>.",regex:"Please enter a valid UK <b>postcode</b>."}}),contactByPhone:new d("input.contactByPhoneYes",{required:!0,messages:{required:"Please tell us if we can respond to your query by telephone."}}),phone:new d("input.phone",{required:c,regextrimmed:"^\\+?\\d{10,14}$",messages:{regextrimmed:"The <b>phone number</b> you entered is not a valid format.",required:"Please enter your phone number."}}),dateOfBirthDay:new d("select.date-of-birth-day",{required:!0,selectNone:!0},"Please enter the <b>day</b> of your date of birth."),dateOfBirthMonth:new d("select.date-of-birth-month",{required:!0,selectNone:!0},"Please enter the <b>month</b> of your birth."),dateOfBirthYear:new d("select.date-of-birth-year",{required:!0,selectNone:!0},"Please enter the <b>year</b> of your birth."),message:new d("textarea.message",{notdefault:"",required:!0},"Please enter your <b>message</b>.")}}},CONFUSEDCMS.contactUsFormSetup=function(a){CONFUSEDCMS.jQueryValidateExtensions(a);var b=CONFUSEDCMS.contactUsFormRules();b.hookup(a("#frmBody"),[b.validationRules.product,b.validationRules.moreinformation,b.validationRules.email,b.validationRules.title,b.validationRules.firstName,b.validationRules.surname,b.validationRules.hasPurchased,b.validationRules.postcode,b.validationRules.dateOfBirthDay,b.validationRules.dateOfBirthMonth,b.validationRules.dateOfBirthYear,b.validationRules.contactByPhone,b.validationRules.phone,b.validationRules.message],{errorElement:"div",errorClass:"error-message",errorPlacement:function(a,b){0===b.parent().find("div.error-placement").length?b.parent().parent().find("div.error-placement").first().append(a):b.parent().find("div.error-placement").first().append(a)},onfocusout:function(b){var c=a(b).hasClass("notdefault"),d=!this.checkable(b),e=b.name in this.submitted,f=!this.optional(b);(c||d&&(e||f))&&this.element(b)},onkeyup:function(b){(a(b).hasClass("notdefault")||b.name in this.submitted||b===this.lastElement)&&this.element(b)},highlight:function(b,c,d){a(b).addClass(c).removeClass(d),CONFUSEDCORE.addErrorIndication([a(b).attr("id")]),"ContactByPhoneYes"===a(b).attr("id")&&a("input.contactByPhoneNo").addClass("error-message field-error")},unhighlight:function(b,c,d){a(b).removeClass(c).addClass(d),CONFUSEDCORE.removeErrorIndication([a(b).attr("id")]),"ContactByPhoneYes"===a(b).attr("id")&&a("input.contactByPhoneNo").removeClass("error-message field-error")}}),a("input.contactByPhoneYes").on("click",function(){a("div.phoneNumberRow").slideDown(200)}),a("input.contactByPhoneNo").on("click",function(){a("div.phoneNumberRow").slideUp(200),a("input.phone").valid()})}}();var CONFUSEDCMS=CONFUSEDCMS||{},CSSCONSTANTS=CSSCONSTANTS||{};!function(a){CONFUSEDCMS.setupProductDrivers=function(){var b=a("."+CSSCONSTANTS.productDriverClass);enquire.register(CSSCONSTANTS.mobileMaxWidthMQ,{match:function(){a.each(b,function(){var b=a(this);CONFUSEDCMS.createProductDriver(b,"mobile")})},unmatch:function(){a.each(b,function(){var b=a(this);CONFUSEDCMS.createProductDriver(b,"nonMobile")})}})},CONFUSEDCMS.createProductDriver=function(a,b){var c,d,e=a.find(".product-driver__image"),f=a.find(".product-driver__notes");"mobile"===b?(c=a.find(".product-driver__link"),d=e.attr("data-productMobileImage")):"nonMobile"===b&&(c=a,d=e.attr("data-productDesktopImage")),e.css("backgroundImage","url("+d+")"),f.appendTo(c)}}(window.jQuery),CONFUSEDCMS=CONFUSEDCMS||{},CONFUSEDCMS.Breakdown=CONFUSEDCMS.Breakdown||{},function(a,b){"use strict";function c(a,c,d){if(c.constructor===Date)return c;var e=b.datepicker._getInst(a),f=null;try{"string"==typeof c&&"today"!==c&&(f=b.datepicker.parseDate(b.datepicker._get(e,"dd/mm/yyyy"),c,b.datepicker._getFormatConfig(e)))}catch(a){}return f=f||("today"===c?new Date:d?null:b(c).datepicker("getDate")),f&&f.setHours(0,0,0,0),f}Date.prototype.toInputFormat=function(){var a=this.getFullYear().toString(),b=(this.getMonth()+1).toString(),c=this.getDate().toString(),d=parseInt(c,10),e=parseInt(b,10),f=parseInt(a,10),g=new Date(f,e-1,d);return g.getYear()&&g.getDate()?a+"-"+(b[1]?b:"0"+b[0])+"-"+(c[1]?c:"0"+c[0]):"dd/mm/yyyy"},a.jQueryValidateExtensions=function(){b.validator.addMethod("afterDate",function(a,d,e){var f=b(d).datepicker("getDate"),g=c(d,e);return!f||!g||f>g},function(a){return"Please enter a date after "+b(a).val()+"."}),b.validator.addMethod("withinAYearOf",function(a,d,e){var f=b(d).datepicker("getDate"),g=c(a,e);return!f||!g||(g.setFullYear(g.getFullYear()+1),f<=g)}),b.validator.addMethod("regex",function(a,b,c){var d=new RegExp(c);return this.optional(b)||d.test(a)},"Please check your input."),b.validator.addMethod("notInPast",function(a,b,c){if(!a)return!0;var d=a.split("/"),e=new Date(d[2],d[1]-1,d[0]),f=new Date;return f.setHours(0,0,0,0),e>=f}),b.validator.addMethod("notdefault",function(a,c,d){var e=jQuery(c);if(e.is("[type=checkbox]"))return e.is(":checked");if(e.is("[type=radio]")){var f=e.attr("name");return b("[name="+f+"]").is(":checked")}return a!==d},"Please check your input."),b.validator.methods.isoDate=function(a){var b=a.match(/(\d{4})[- \/](\d{1,2})[- \/](\d{1,2})/);if(!b)return!1;var c=parseInt(b[3],10),d=parseInt(b[2],10),e=parseInt(b[1],10),f=new Date(e,d-1,c);return!(!f.getYear()||!f.getDate())&&(parseInt(f.getMonth()+1,10)===d&&f.getFullYear()===e&&f.getDate()===c)},b.validator.methods.ukDate=function(a){var b=a.match(/(\d{1,2})[- \/](\d{1,2})[- \/](\d{4})/);if(!b)return!1;var c=parseInt(b[1],10),d=parseInt(b[2],10),e=parseInt(b[3],10),f=new Date(e,d-1,c);return!(!f.getYear()||!f.getDate())&&(parseInt(f.getMonth()+1,10)===d&&f.getFullYear()===e&&f.getDate()===c)}},a.breakdownModuleRules=function(){function a(a,b,c){var d=b.find(c.selector);0!==d.length&&d.rules("add",c.rules)}function b(b,c,d){if(!b)throw"$form is undefined!";if(0!==b.length){d=d||{};for(var e=b.validate(d),f=0;f<c.length;f++){a(e,b,c[f])}}}var c=function(a,b,c){this.selector=a,this.rules=b,this.message=c};return{hookup:b,validationRules:{VehicleReg:new c("input#regNumber",{regex:"^[a-zA-Z0-9]{2,10}$",messages:{regex:"Please enter a valid vehicle registration number."}}),CoverStartDate:new c("input[type=text]#cover-start-date",{notdefault:"",ukDate:!0,notInPast:"",messages:{notdefault:"Please enter a start date.",ukDate:"Please enter a valid start date.",notInPast:"Cover start date cannot be in the past."}}),CoverEndDate:new c("input[type=text]#cover-end-date",{notdefault:"",ukDate:!0,afterDate:"#cover-start-date",withinAYearOf:"#cover-start-date",messages:{notdefault:"Please enter an end date.",ukDate:"Please enter a valid end date.",afterDate:"Cover end date cannot be on or before start date.",withinAYearOf:"Cover end date must be within a year of the start date."}}),NativeCoverEndDate:new c("input[type=date]#cover-end-date",{notdefault:"dd/mm/yyyy",isoDate:!0,afterDate:"#cover-start-date",withinAYearOf:"#cover-start-date",messages:{notdefault:"Please enter an end date.",isoDate:"Please enter a valid end date.",afterDate:"Cover end date cannot be on or before start date.",withinAYearOf:"Cover end date must be within a year of the start date."}}),NativeCoverStartDate:new c("input[type=date]#cover-start-date",{notdefault:"dd/mm/yyyy",isoDate:!0,messages:{notdefault:"Please enter a start date.",isoDate:"Please enter a valid start date."}})}}},a.setUpValidation=function(c){a.jQueryValidateExtensions();var d=a.breakdownModuleRules();d.hookup(c,[d.validationRules.VehicleReg,d.validationRules.CoverStartDate,d.validationRules.CoverEndDate,d.validationRules.NativeCoverEndDate,d.validationRules.NativeCoverStartDate],{errorElement:"div",errorClass:"error-message",errorPlacement:function(a,b){var c=b.parent().find("div.error-placement");c.length>0?c.append(a):b.parent().parent().find("div.error-placement").append(a)},onfocusout:function(a){(!b(a).hasClass("ignore")&&b(a).hasClass("notdefault")||!this.checkable(a)&&(a.name in this.submitted||!this.optional(a)))&&this.element(a)},onblur:function(a){(!b(a).hasClass("ignore")&&b(a).hasClass("notdefault")||!this.checkable(a)&&(a.name in this.submitted||!this.optional(a)))&&this.element(a)}})},a.breakdownModule=function(){var a=b("#cover-start-date"),c=b("#cover-end-date");if(Modernizr.touch&&Modernizr.inputtypes.date){var d=(new Date).toInputFormat();a.attr("min",d),c.attr("min",d),a.addClass("notdefault"),c.addClass("notdefault"),a.keydown(function(a){return 9===a.keyCode}),c.keydown(function(a){return 9===a.keyCode}),a.change(function(){b(this).valid();var a=new Date(b(this).val()),d=new Date(b(this).val());a.setDate(a.getDate()),d.setDate(d.getDate()+365),c.attr("min",a.toInputFormat()),c.attr("max",d.toInputFormat())}),c.change(function(){b(this).valid();var c=new Date(b(this).val());c.setDate(c.getDate()-1),a.attr("max",c.toInputFormat())})}else a.attr("type","text"),a.addClass("notdefault"),
c.attr("type","text"),c.addClass("notdefault"),a.datepicker({numberOfMonths:2,hideIfNoPrevNext:!0,duration:"",minDate:0,maxDate:365,dateFormat:"dd/mm/yy",onClose:function(){if(b(this).valid()){var a=new Date,d=b(this).datepicker("getDate");d.setDate(d.getDate()+1),c.datepicker("option","maxDate",365),c.datepicker("option","minDate",d),b(this).datepicker("option","minDate",a)}else c.datepicker("option","minDate",1)}}),b("#cover-end-date").datepicker({numberOfMonths:2,hideIfNoPrevNext:!0,duration:"",minDate:1,maxDate:365,dateFormat:"dd/mm/yy",onClose:function(){if(b(this).valid()){var c=b(this).datepicker("getDate");c.setDate(c.getDate()-1),a.datepicker("option","maxDate",c)}else a.datepicker("option","maxDate",365)}})}}(CONFUSEDCMS.Breakdown,jQuery);var CONFUSEDCMS=CONFUSEDCMS||{};CONFUSEDCMS.CONSTANTS=CONFUSEDCMS.CONSTANTS||{},CONFUSEDCMS.CONSTANTS.breakdownConstants=function(){return{containerClass:".breakdown-promo",stepNames:{InitialisingSpinner:"Initialising-Spinner",CoverSavedVehicles:"Cover-SavedVehicles",CoverNewReg:"Cover-NewReg",CoverDuration:"Cover-Duration",CoverTripType:"Cover-TripType",Spinner:"Results-Spinner",Prices:"Results-Prices",ErrorPage:"Results-Error",NoPrices:"Results-NoPrices"},resultsPagePanelSelector:".breakdown-results-panel",resultsPageLocalProductImageSelector:".results-page-local",resultsPageNationalProductImageSelector:".results-page-national",resultsPageEuropeanProductImageSelector:".results-page-european",resultsProductTypeLocalClass:"breakdown-results-panel--active-1",resultsProductTypeNationalClass:"breakdown-results-panel--active-2",resultsProductTypeEuropeanClass:"breakdown-results-panel--active-3",resultsPageHeadingSelector:".results-heading",resultsPageSelector:".breakdown-results",resultsPageHeadingLocalWordingDataAttr:"localWording",resultsPageHeadingNationalWordingDataAttr:"nationalWording",resultsPageHeadingEuroAnnualWordingDataAttr:"euroAnnualWording",resultsPageHeadingEuroSingleWordingDataAttr:"euroSingleWording",resultsPageSelectedProductClass:"breakdown-widget-image-button--active"}}();var CONFUSEDCMS=CONFUSEDCMS||{},CONFUSEDWEBSITE=CONFUSEDWEBSITE||{};CONFUSEDCMS.VIEWMODELS=CONFUSEDCMS.VIEWMODELS||{},CONFUSEDCMS.VIEWMODELS.breakdown=function(a,b){function c(c){var f=this;if(f.currentPage=ko.observable(b.stepNames.InitialisingSpinner),f.ShowRegistrationNumberMissingValidation=ko.observable(!1),f.ShowRegistrationNumberNotFoundValidation=ko.observable(!1),f.coverTypeHelpTextVisible=ko.observable(!1),f.Vehicles=ko.observableArray(),f.regLookup=ko.observable(""),f.results=ko.observableArray(),f.selectedVehicle=ko.observable(),f.Deeplink=ko.observable(""),f.TopPrice=ko.observable(new e),f.LogBreakdownMi=function(a){try{if(a)return void CONFUSEDCMS.eventDecorator.events.miPageEvent({EventType:"breakdown-module-click",EventInfo:{"click-source":a},PartnerId:0});console.log("LogBreakdownMi: eventSource was null")}catch(a){console.log("LogBreakdownMi: exception caught: "+a)}},f.DeeplinkClick=function(c,d){a(b.resultsPagePanelSelector)?f.currentPage(b.stepNames.InitialisingSpinner):f.currentPage(b.stepNames.Spinner),f.LogBreakdownMi(c),setTimeout(function(){window.location.href=d?window.location.origin+d:f.Deeplink()},400)},f.initFailed=function(c){return c&&console.log("breakdown:initFailed(): "+c),f.currentPage(b.stepNames.ErrorPage),f.coverType=ko.observable(""),ko.applyBindings(f,a(CONFUSEDCMS.CONSTANTS.breakdownConstants.containerClass)[0]),f},!c)return f.initFailed("");if(c.Vehicles)for(var i=0;i<c.Vehicles.length;i++){var j=c.Vehicles[i],k=new d(j.RegistrationNumber,j.VehicleAge);j.Selected&&(f.selectedVehicle(k),f.regLookup(k.RegistrationNumber)),f.Vehicles.push(k)}f.coverType=ko.observable(""),f.NewRegClicked=function(){f.regLookup(""),f.currentPage(b.stepNames.CoverNewReg)},f.SavedVehiclesClicked=function(){var c=a("#regNumber");c.valid()||(f.regLookup(""),c.valid()),f.ShowRegistrationNumberMissingValidation(!1),f.currentPage(b.stepNames.CoverSavedVehicles)},f.CoverLevelSelected=function(c){if(a(b.resultsPagePanelSelector)&&h(c),a(".breakdown-cover-variant").length&&f.selectedVehicle()!==a("#regNumber").val()&&f.currentPage(b.stepNames.CoverNewReg),f.coverType(c),f.currentPage()===b.stepNames.CoverSavedVehicles){if(f.ShowRegistrationNumberMissingValidation(!1),!f.selectedVehicle())return void f.ShowRegistrationNumberMissingValidation(!0);f.ContinueCoverLevelSelected(c)}else if(f.currentPage()===b.stepNames.CoverNewReg){if(!a("#regNumber").valid())return;var e=f.regLookup().toUpperCase();if(e){for(var g=-1,i=0;i<f.Vehicles().length;i++)f.Vehicles()[i].RegistrationNumber===e&&(g=i);-1!==g?(f.selectedVehicle(f.Vehicles()[g]),f.ContinueCoverLevelSelected(c)):a.ajax({type:"POST",url:"/api/lookup/RegLookup",contentType:"text/json",data:ko.toJSON({RegistrationNumber:e}),dataType:"json",success:function(a){if(a.RegistrationNumber&&a.RegistrationNumber.length>0&&a.VehicleAge>0){var b=new d(a.RegistrationNumber,a.VehicleAge);f.Vehicles.push(b),f.selectedVehicle(b),f.ContinueCoverLevelSelected(c)}else f.ShowRegistrationNumberNotFoundValidation(!0)},error:function(a){f.ShowRegistrationNumberNotFoundValidation(!0),console.log(a)},timeout:2e4})}else f.ShowRegistrationNumberMissingValidation(!0)}},f.ContinueCoverLevelSelected=function(a){f.ShowRegistrationNumberNotFoundValidation(!1),f.ShowRegistrationNumberMissingValidation(!1),f.coverTypeHelpTextVisible(!1),"European"===a?(f.breakdownRisk.CoverLevel="3",f.currentPage(b.stepNames.CoverTripType)):(f.breakdownRisk.CoverLevel="National"===a?"2":"1",l())},f.TripTypeClicked=function(c){a(b.resultsPagePanelSelector)&&g("European",c),"Multi"===c?(f.breakdownRisk.TripDetails.TripType="1",l()):(f.breakdownRisk.TripDetails.TripType="2",f.breakdownRisk.TripDetails.TripStartDate="",f.breakdownRisk.TripDetails.TripEndDate="",f.currentPage(b.stepNames.CoverDuration))},f.ToggleCoverTypeHelpText=function(){f.coverTypeHelpTextVisible(!f.coverTypeHelpTextVisible())},f.CoverDurationNextClick=function(){var b=a("#cover-start-date").valid(),c=a("#cover-end-date").valid();b&&c&&l()},f.ResetToFirstPage=function(){f.ShowRegistrationNumberMissingValidation(!1),f.ShowRegistrationNumberNotFoundValidation(!1),f.results([]),f.Vehicles().length>0?f.currentPage(b.stepNames.CoverSavedVehicles):f.currentPage(b.stepNames.CoverNewReg)},f.breakdownRisk={CoverLevel:ko.observable(0),TripDetails:{TripType:ko.observable(0),TripStartDate:ko.observable(""),TripEndDate:ko.observable("")},VehicleAge:ko.computed(function(){if(f.Vehicles().length>0){var a=f.selectedVehicle();if(void 0!==a&&null!==a)return a.VehicleAge}return 0})},f.getSerializedRiskObject=function(){return ko.toJSON(f.breakdownRisk)},a("div.breakdown-steps input#regNumber").on("keydown",function(c){if(32===c.which)return!1;if(13===c.which){c.preventDefault();var d;d=a(b.resultsPagePanelSelector?".breakdown-widget-image-button":"div.breakdown-widget__cover-type__button");var e=d.first().attr("style");void 0===e&&(e=""),d.attr("style",e+" border-style:solid; border-color:red").animate({borderWidth:"4"},100).delay(150).animate({borderWidth:"0"},100),setTimeout(function(){d.attr("style",e)},350)}});var l=function(){if(f.results.removeAll(),"3"===f.breakdownRisk.CoverLevel&&"2"===f.breakdownRisk.TripDetails.TripType)try{var c=a("#cover-start-date"),d=a("#cover-end-date");Modernizr&&Modernizr.touch&&Modernizr.inputtypes.date&&c&&c.val()&&d&&d.val()?(f.breakdownRisk.TripDetails.TripStartDate=new Date(c.val()),f.breakdownRisk.TripDetails.TripEndDate=new Date(d.val())):(f.breakdownRisk.TripDetails.TripStartDate=c.datepicker("getDate"),f.breakdownRisk.TripDetails.TripEndDate=d.datepicker("getDate")),f.breakdownRisk.TripDetails.TripStartDate.setHours(f.breakdownRisk.TripDetails.TripStartDate.getHours()+3),f.breakdownRisk.TripDetails.TripEndDate.setHours(f.breakdownRisk.TripDetails.TripEndDate.getHours()+3)}catch(a){console.log("CONFUSEDCMS.VIEWMODELS.breakdown - submitRiskViewModel(): problem setting start & end date "+a.message)}var g=f.getSerializedRiskObject();a.ajax({type:"POST",url:"/api/breakdown/breakdown/NewQuote",contentType:"text/json",data:g,dataType:"json",success:function(a){if(!a)return void f.currentPage(b.stepNames.ErrorPage);if(a.QuoteId>0&&a.ResultObjectCollection.length>0){for(var c=0;c<a.ResultObjectCollection.length;c++)f.results.push(new e(a.ResultObjectCollection[c].InsurerImageLocation,a.ResultObjectCollection[c].InsurerName,"£"+a.ResultObjectCollection[c].Price.toFixed(2)));f.TopPrice(new e(a.ResultObjectCollection[0].InsurerImageLocation,a.ResultObjectCollection[0].InsurerName,"£"+a.ResultObjectCollection[0].Price.toFixed(2))),f.Deeplink(a.Deeplink),f.currentPage(b.stepNames.Prices)}else f.currentPage(b.stepNames.NoPrices)},error:function(){f.currentPage(b.stepNames.ErrorPage)},timeout:2e4}),f.currentPage(b.stepNames.Spinner),f.currentPage.subscribe(function(b){CONFUSEDWEBSITE.removeHeights("."+CSSCONSTANTS.equalizeHeightNonMobileClass),CONFUSEDWEBSITE.removeHeights("."+CSSCONSTANTS.equalizeHeightDesktopClass);var c=a("."+CSSCONSTANTS.equalizeHeightSetNonMobileClass);CONFUSEDWEBSITE.equalizeHeights(c,"."+CSSCONSTANTS.equalizeHeightNonMobileClass)})};return ko.applyBindings(f,a(CONFUSEDCMS.CONSTANTS.breakdownConstants.containerClass)[0]),f.Vehicles().length>0?f.currentPage(b.stepNames.CoverSavedVehicles):f.currentPage(b.stepNames.CoverNewReg),a("#regNumber").on("focus",function(){f.ShowRegistrationNumberNotFoundValidation(!1),f.ShowRegistrationNumberMissingValidation(!1)}),f}var d=function(a,b){this.RegistrationNumber=a,this.VehicleAge=b},e=function(a,b,c){this.InsurerImageLocation=a,this.InsurerName=b,this.Price=c},f=function(c){var d=a(b.resultsPagePanelSelector),e=a(b.resultsPageLocalProductImageSelector),f=a(b.resultsPageNationalProductImageSelector),g=a(b.resultsPageEuropeanProductImageSelector);switch(c){case"National":d.toggleClass(b.resultsProductTypeLocalClass+" "+b.resultsProductTypeEuropeanClass,!1),d.addClass(b.resultsProductTypeNationalClass),e.toggleClass(b.resultsPageSelectedProductClass,!1),f.toggleClass(b.resultsPageSelectedProductClass,!0),g.toggleClass(b.resultsPageSelectedProductClass,!1),e.attr("disabled",!1),f.attr("disabled",!0);break;case"European":d.toggleClass(b.resultsProductTypeLocalClass+" "+b.resultsProductTypeNationalClass,!1),d.addClass(b.resultsProductTypeEuropeanClass),e.toggleClass(b.resultsPageSelectedProductClass,!1),f.toggleClass(b.resultsPageSelectedProductClass,!1),g.toggleClass(b.resultsPageSelectedProductClass,!0),e.attr("disabled",!1),f.attr("disabled",!1);break;default:d.toggleClass(b.resultsProductTypeEuropeanClass+" "+b.resultsProductTypeNationalClass,!1),d.addClass(b.resultsProductTypeLocalClass),e.toggleClass(b.resultsPageSelectedProductClass,!0),f.toggleClass(b.resultsPageSelectedProductClass,!1),g.toggleClass(b.resultsPageSelectedProductClass,!1),f.attr("disabled",!1),e.attr("disabled",!0)}},g=function(c,d){var e=a(b.resultsPageHeadingSelector),f=a(b.resultsPageSelector),g=f.data(b.resultsPageHeadingLocalWordingDataAttr),h=f.data(b.resultsPageHeadingNationalWordingDataAttr),i=f.data(b.resultsPageHeadingEuroAnnualWordingDataAttr),j=f.data(b.resultsPageHeadingEuroSingleWordingDataAttr);switch(c){case"National":e.text(h);break;case"European":"Multi"===d?e.text(i):e.text(j);break;default:e.text(g)}},h=function(a){f(a),g(a)};return{create:function(){try{a.ajax({type:"GET",url:"/api/breakdown/breakdown/GetBreakdownModelData",contentType:"text/json",dataType:"json",success:function(a){return new c(a)},error:function(a){return new c(a)},timeout:2e4})}catch(a){return console.log("Caught Exception"+a),this.currentPage(b.stepNames.ErrorPage),null}return null}}}(jQuery,CONFUSEDCMS.CONSTANTS.breakdownConstants);var CONFUSEDCMS=CONFUSEDCMS||{};!function(a){function b(b){var c=a("div.cms-content ul.unstyled-list");a.each(b,function(b,d){c.append(a("<li>",{class:"js-product-testimonial"}).append(a("<blockquote>",{itemprop:"review",itemscope:"itemscope",itemtype:"http://schema.org/Review"}).append(a("<span>",{itemprop:"description"}).text(d.Description)).append(a("<footer>").append(a("<div>",{class:"writer clearfix test2"}).append(a("<img>",{class:"writer__image",src:d.Image.Src,alt:d.Image.Alt})).append(a("<b>",{class:"writer__name",itemprop:"author"}).text(d.Author)).append(a("<p>",{itemprop:"datePublished",content:d.QuoteDate}).text(d.QuoteDateSummary))).append(a("<span>",{class:d.RatingClass,itemprop:"reviewRating",itemscope:"itemscope",itemtype:"http://schema.org/Rating",ratingTitle:d.RatingTitle}).append(a("<meta>",{itemprop:"ratingValue",content:d.RatingValue}))).append(a("<p>").text(d.RatingTitle)))))})}CONFUSEDCMS.setupProductTestimonials=function(){a(".js-product-testimonials-show-more-btn").on("click",CONFUSEDCMS.getProductTestimonials)},CONFUSEDCMS.getProductTestimonials=function(){var c=a("#testimonials-item"),d=a("#testimonials-product"),e=a("#testimonials-skip"),f=a("#testimonials-take");if(null!=c&&null!=d&&null!=e&&null!=f){var g=new window.Confused.ServiceProxy("Services/ContentProvider/ContentProviderService.aspx",300),h=parseInt(f.val()),i=a("li.js-product-testimonial").length,j={method:"GetProductTestimonials",data:'{ item: "'+c.val()+'", product:"'+d.val()+'", take:"'+h+'", skip:"'+i+'"}'};g.invoke(j).done(function(c){if("{}"!==c){var d=JSON.parse(c);d.length<h&&a("div.show-more-wrapper").hide(),0!==d.length&&b(d)}})}}}(window.jQuery);var CONFUSEDCMS=CONFUSEDCMS||{},CSSCONSTANTS=CSSCONSTANTS||{};!function(a){CONFUSEDCMS.setupProviderList=function(){var b;enquire.register(CSSCONSTANTS.nonMobileMinWidthMQ,{match:function(){b=a("."+CSSCONSTANTS.visibleProvidersClass),CONFUSEDCMS.createImages(b)},unmatch:function(){b=a("."+CSSCONSTANTS.visibleProvidersClass),CONFUSEDCMS.removeImages(b)}},!0),CONFUSEDCMS.createMoreProvidersButton(),CONFUSEDCMS.setupProviderFilters()},CONFUSEDCMS.setupProviderFilters=function(){var b=a("."+CSSCONSTANTS.providersClass),c=a("."+CSSCONSTANTS.providerFilterClass),d=a("."+CSSCONSTANTS.providerFilterShowAllClass),e=CSSCONSTANTS.backgroundBlueClass,f=CSSCONSTANTS.backgroundPastel2Class;a.each(c,function(){var g=a(this),h=g.text();g.on("click",function(a){a.preventDefault(),CONFUSEDCMS.filterProviders(b,h),d.add(c).removeClass(e).addClass(f),g.removeClass(f).addClass(e),CONFUSEDCMS.removeMoreProvidersButton()})}),d.on("click",function(a){a.preventDefault(),CONFUSEDCMS.showAllProviders(b),d.add(c).removeClass(e).addClass(f),d.removeClass(f).addClass(e),CONFUSEDCMS.removeMoreProvidersButton()})},CONFUSEDCMS.filterProviders=function(b,c){b.removeClass(CSSCONSTANTS.visibleProvidersClass),b.addClass(CSSCONSTANTS.hiddenProvidersClass),a.each(b,function(){var b,d=a(this),e=d.find("a").attr("href"),f=d.find("img"),g=e.lastIndexOf("/");b=e.charAt(g+1).toUpperCase(),-1!==c.indexOf(b)&&(d.removeClass(CSSCONSTANTS.hiddenProvidersClass),d.addClass(CSSCONSTANTS.visibleProvidersClass),f.length<1&&!matchMedia("(max-width: "+CSSCONSTANTS.mobileMaxWidth+")").matches&&CONFUSEDCMS.createImages(d))})},CONFUSEDCMS.createImages=function(b){a.each(b,function(){var b,c=a(this).find("a"),d=c.attr("data-img");b=a("<img />",{src:d,alt:c.text()}),c.text(""),b.appendTo(c)})},CONFUSEDCMS.removeImages=function(b){a.each(b,function(){var b=a(this),c=b.find("a"),d=c.find("img"),e=d.attr("alt");console.log(e),c.text(e),d.remove()})},CONFUSEDCMS.createMoreProvidersButton=function(){var b,c=a("."+CSSCONSTANTS.providerListClass),d=a("."+CSSCONSTANTS.hiddenProvidersClass);d.length>=1&&(b=a("<a />",{class:CSSCONSTANTS.providerListMoreLinkClass,href:"#",text:"Show more"}),b.on("click",function(a){a.preventDefault(),CONFUSEDCMS.showMoreProviders()}),b.insertAfter(c))},CONFUSEDCMS.removeMoreProvidersButton=function(){a("."+CSSCONSTANTS.providerListMoreLinkClass).remove()},CONFUSEDCMS.showAllProviders=function(b){b.removeClass(CSSCONSTANTS.hiddenProvidersClass),b.addClass(CSSCONSTANTS.visibleProvidersClass),a.each(b,function(){var b=a(this);b.find("img").length<1&&!matchMedia("(max-width: "+CSSCONSTANTS.mobileMaxWidth+")").matches&&CONFUSEDCMS.createImages(b)})},CONFUSEDCMS.showMoreProviders=function(){var b=a("."+CSSCONSTANTS.hiddenProvidersClass),c=a("."+CSSCONSTANTS.providerListMoreLinkClass);a.each(b,function(){a(this).removeClass(CSSCONSTANTS.hiddenProvidersClass).addClass(CSSCONSTANTS.visibleProvidersClass)}),matchMedia("(max-width: "+CSSCONSTANTS.mobileMaxWidth+")").matches||CONFUSEDCMS.createImages(b),c.remove()}}(window.jQuery);var CONFUSEDCMS=CONFUSEDCMS||{},CSSCONSTANTS=CSSCONSTANTS||{};!function(a){CONFUSEDCMS.responsiveTabs=function(){var b=a("."+CSSCONSTANTS.responsiveTabsClass);if(!b.hasClass(CSSCONSTANTS.responsiveTabsEnabledClass)){b.addClass(CSSCONSTANTS.responsiveTabsEnabledClass);var c=1;b.each(function(){var b=a(this);b.children(":header").addClass(CSSCONSTANTS.responsiveTabsHeadingClass),b.children("div").addClass(CSSCONSTANTS.responsiveTabsPanelClass);var d=b.find("."+CSSCONSTANTS.responsiveTabsPanelActiveClass);d.length||(d=b.find("."+CSSCONSTANTS.responsiveTabsPanelClass).first().addClass(CSSCONSTANTS.responsiveTabsPanelActiveClass)),b.find("."+CSSCONSTANTS.responsiveTabsPanelClass).not("."+CSSCONSTANTS.responsiveTabsPanelActiveClass).hide().attr("aria-hidden","true"),d.attr("aria-hidden","false"),d.addClass(CSSCONSTANTS.responsiveTabsPanelClosedAccordionOnlyClass);var e=a("<div/>",{class:CSSCONSTANTS.responsiveTabsWrapperClass});b.wrap(e);var f=0;b.find("."+CSSCONSTANTS.responsiveTabsPanelClass).each(function(){var b=a(this).height();b>f&&(f=b)});var g;g=b.hasClass(CSSCONSTANTS.responsiveTabsStepsClass)?a("<ol/>",{class:CSSCONSTANTS.responsiveTabsListClass,role:"tablist"}):a("<ul/>",{class:CSSCONSTANTS.responsiveTabsListClass,role:"tablist"});var h=1;b.find("."+CSSCONSTANTS.responsiveTabsHeadingClass).each(function(){var d=a(this),i=a(this).next();d.attr("tabindex",0);var j=a("<span/>",{id:"tablist"+c+"-tab"+h,"aria-controls":"tablist"+c+"-panel"+h,role:"tab",tabindex:0,text:d.text(),keydown:function(a){13===a.keyCode&&j.click()},click:function(){e.css("height",f),b.find("."+CSSCONSTANTS.responsiveTabsPanelClosedAccordionOnlyClass).removeClass(CSSCONSTANTS.responsiveTabsPanelClosedAccordionOnlyClass),b.find("."+CSSCONSTANTS.responsiveTabsPanelActiveClass).toggle().removeClass(CSSCONSTANTS.responsiveTabsPanelActiveClass).attr("aria-hidden","true").prev().removeClass(CSSCONSTANTS.responsiveTabsHeadingActiveClass),i.toggle().addClass(CSSCONSTANTS.responsiveTabsPanelActiveClass).attr("aria-hidden","false"),d.addClass(CSSCONSTANTS.responsiveTabsHeadingActiveClass),g.find("."+CSSCONSTANTS.responsiveTabsListItemActiveClass).removeClass(CSSCONSTANTS.responsiveTabsListItemActiveClass),j.parent().addClass(CSSCONSTANTS.responsiveTabsListItemActiveClass),e.css("height","auto")}}),k=a("<li/>",{class:CSSCONSTANTS.responsiveTabsListItemClass});j.prependTo(k),i.attr({role:"tabpanel","aria-labelledby":j.attr("id"),id:"tablist"+c+"-panel"+h}),i.hasClass(CSSCONSTANTS.responsiveTabsPanelActiveClass)&&j.parent().addClass(CSSCONSTANTS.responsiveTabsListItemActiveClass),g.append(k),d.keydown(function(a){13===a.keyCode&&d.click()}),d.click(function(){if(b.find("."+CSSCONSTANTS.responsiveTabsPanelClosedAccordionOnlyClass).removeClass(CSSCONSTANTS.responsiveTabsPanelClosedAccordionOnlyClass),d.hasClass(CSSCONSTANTS.responsiveTabsHeadingActiveClass))i.removeClass(CSSCONSTANTS.responsiveTabsPanelActiveClass).slideToggle(function(){a(this).addClass(CSSCONSTANTS.responsiveTabsPanelClosedAccordionOnlyClass)}),d.removeClass(CSSCONSTANTS.responsiveTabsHeadingActiveClass);else{var c,e=b.find("."+CSSCONSTANTS.responsiveTabsHeadingActiveClass);e.length&&(c=e.offset().top),b.find("."+CSSCONSTANTS.responsiveTabsPanelActiveClass).slideToggle().removeClass(CSSCONSTANTS.responsiveTabsPanelActiveClass).prev().removeClass(CSSCONSTANTS.responsiveTabsHeadingActiveClass),b.find("."+CSSCONSTANTS.responsiveTabsPanelClass).hide().attr("aria-hidden","true"),i.slideToggle().addClass(CSSCONSTANTS.responsiveTabsPanelActiveClass).attr("aria-hidden","false"),d.addClass(CSSCONSTANTS.responsiveTabsHeadingActiveClass);b.find("."+CSSCONSTANTS.responsiveTabsListItemActiveClass).removeClass(CSSCONSTANTS.responsiveTabsListItemActiveClass);var f=i.attr("id"),g=f.replace("panel","tab");a("#"+g).parent().addClass(CSSCONSTANTS.responsiveTabsListItemActiveClass);var h=b.offset().top,j=d.offset().top-15;c<j&&a("html, body").animate({scrollTop:h},0).animate({scrollTop:j},400)}}),h++}),b.prepend(g),c++})}}}(window.jQuery);var CONFUSEDCMS=CONFUSEDCMS||{};!function(a){CONFUSEDCMS.priceIndex=function(){window.innerWidth>600&&a(window).scroll(function(){a(".img--infographic").each(function(b){var c=a(this),d=c.attr("src"),e=a(this).offset().top,f=a(this).outerHeight(),g=a(window).height(),h=a(window).scrollTop();c.hasClass("active")||(h>e+f-g?(c.css("opacity","1"),c.attr("src",d),c.addClass("active")):a(this).css("opacity","0"))})}),a(".expanded-image-button").click(function(b){b.preventDefault(),a(this).closest(".container").nextAll(".expanded-image-modal").fadeIn(300),a(".dimmer").fadeIn(300)}),a(".expanded-image-modal__inner__close").click(function(b){b.preventDefault(),a(this).closest(".expanded-image-modal").fadeOut(300),a(".dimmer").fadeOut(300)}),a(".video__controls a").click(function(){a(".video-header").hide()})}}(window.jQuery);var CONFUSEDWEBSITE=CONFUSEDWEBSITE||{};!function(a){a(function(){CONFUSEDWEBSITE.setupGlobalNav(),CONFUSEDWEBSITE.skipNav(),a(".mobile-nav").length>0&&CONFUSEDWEBSITE.activateMobileNav(),CONFUSEDWEBSITE.setupHeaderActions(),CONFUSEDWEBSITE.setupSearchResults(),CONFUSEDWEBSITE.setupSearchForms()})}(window.jQuery);var CONFUSEDCMS=CONFUSEDCMS||{};CONFUSEDCMS.VehicleDetails=CONFUSEDCMS.VehicleDetails||{},function(a,b){"use strict";a.Constants={MinDate:"0001-01-01T00:00:00",ValidText:"valid",InvalidText:"invalid",ValidClass:"mot-checker__results__result mot-checker__results__result--ok",InvalidClass:"mot-checker__results__result mot-checker__results__result--alert"},a.Utils={FormatDate:function(a){var b=new Date(a||Date.now()),c=""+(b.getMonth()+1),d=""+b.getDate(),e=b.getFullYear();return c.length<2&&(c="0"+c),d.length<2&&(d="0"+d),[d,c,e].join("/")},ValidateForm:function(a){return a.valid()}},a.Vehicle=function(){var b=this;b.RegNumber=ko.observable(""),b.MotExpiry=ko.observable(""),b.Make=ko.observable(""),b.Model=ko.observable(""),b.Display=function(){var a=b.RegNumber();return""!==b.Make()&&(a+=", "+b.Make()+" "),""!==b.Model()&&(a+=b.Model()),a},b.ValidExpiryDate=function(){return b.MotExpiry()!==a.Constants.MinDate},b.ValidMot=function(){return!!b.ValidExpiryDate()&&!(new Date>new Date(b.MotExpiry()))},b.FormattedMotExpiry=function(){return a.Utils.FormatDate(b.MotExpiry())},b.ValidityText=function(){return b.ValidMot()?a.Constants.ValidText:a.Constants.InvalidText}},a.MotChecker=function(){var c=this;c.Vehicle=new a.Vehicle,c.ShowSearch=ko.observable(!0),c.VehicleNotFound=ko.observable(!1),c.VehicleErrorOccurred=ko.observable(!1),c.Form="",c.InitialiseModule=function(a){var d,e=b(".box--simple");b.each(e,function(a,c){if(b(c).find(".mot-checker"))return d=e[a],!1}),d||(d=".mot-checker"),c.Form=a,ko.applyBindings(c,d)},c.MotClass=function(){return c.Vehicle.ValidMot()?a.Constants.ValidClass:a.Constants.InvalidClass},c.ResetForm=function(){c.Vehicle.RegNumber(""),c.ShowSearch(!0),c.VehicleNotFound(!1),c.VehicleErrorOccurred(!1)},c.GetDetails=function(){a.Utils.ValidateForm(c.Form)&&(c.VehicleNotFound(!1),c.Vehicle.RegNumber(b("#regNumber").val()),b.ajax({url:"/api/lookupv2/VehicleRunningDetails",contentType:"text/json",type:"POST",data:ko.toJSON({RegNumber:c.Vehicle.RegNumber()}),success:function(a){var b=a;null!=b&&void 0!==b.MotExpiry?(c.Vehicle.MotExpiry(b.MotExpiry),c.Vehicle.Make(b.MakeDescription),c.Vehicle.Model(b.ModelDescription),c.VehicleNotFound(!1)):(c.Vehicle.Make(""),c.Vehicle.Model(""),c.VehicleNotFound(!0)),c.ShowSearch(!1)},error:function(){c.Vehicle.Make(""),c.Vehicle.Model(""),c.VehicleNotFound(!0),c.VehicleErrorOccurred(!0),c.ShowSearch(!1)}}))}}}(CONFUSEDCMS.VehicleDetails,jQuery);var CONFUSEDCMS=CONFUSEDCMS||{};CONFUSEDCMS.VehicleDetailsValidation=CONFUSEDCMS.VehicleDetailsValidation||{},function(a,b){"use strict";a.jQueryValidateExtensions=function(){b.validator.addMethod("regex",function(a,b,c){var d=new RegExp(c);return this.optional(b)||d.test(a)},"Please check your input."),b.validator.addMethod("notdefault",function(a,c,d){var e=jQuery(c);if(e.is("[type=checkbox]"))return e.is(":checked");if(e.is("[type=radio]")){var f=e.attr("name");return b("[name="+f+"]").is(":checked")}return a!==d},"Please check your input.")},a.vehicleDetailsCheckerRules=function(){function a(a,b,c){var d=b.find(c.selector);0!==d.length&&d.rules("add",c.rules)}function b(b,c,d){if(!b)throw"$form is undefined!";if(0!==b.length){d=d||{};for(var e=b.validate(d),f=0;f<c.length;f++){a(e,b,c[f])}}}return{hookup:b,validationRules:{VehicleReg:new function(a,b,c){this.selector=a,this.rules=b,this.message=c}("input#regNumber",{notdefault:"",regex:"^[a-zA-Z0-9 -]{2,10}$",messages:{notdefault:"Please enter a vehicle registration number",regex:"Please enter a valid vehicle registration number"}})}}},CONFUSEDCMS.setUpVehicleDetailsCheckerValidation=function(c){a.jQueryValidateExtensions();var d=a.vehicleDetailsCheckerRules();d.hookup(c,[d.validationRules.VehicleReg],{errorElement:"div",errorClass:"error-message",errorPlacement:function(a){b("div#error-placement").first().append(a)},onfocusout:function(a){(!b(a).hasClass("ignore")&&b(a).hasClass("notdefault")||!this.checkable(a)&&(a.name in this.submitted||!this.optional(a)))&&this.element(a)},onblur:function(a){(!b(a).hasClass("ignore")&&b(a).hasClass("notdefault")||!this.checkable(a)&&(a.name in this.submitted||!this.optional(a)))&&this.element(a)},highlight:function(){},unhighlight:function(){},ignore:":not('input#regNumber')"})}}(CONFUSEDCMS.VehicleDetailsValidation,jQuery);var CONFUSEDCMS=CONFUSEDCMS||{},CONFUSEDPARKINGAPP=CONFUSEDPARKINGAPP||{},Confused=Confused||{},newrelic=newrelic||{};!function(a,b,c){"use strict";if(a.Elements={ParkingAppWidget:"div.parking-app-lozenge-inputs",ParkingAppMapWrapper:".parking-app-map-wrapper",ParkingAppMapDeviceWrapper:".parking-app-map-device-wrapper",ParkingAppMapSpinner:".parking-app-map-spinner-wrapper",ParkingAppMapUnavailableMessage:".parking-app-map-unavailable-message",ParkingAppMapErrorMessage:".parking-app-map-error-message",ParkingAppResultsLoadingContainer:".parking-app-results-loading-containter",ParkingAppResultsUnavailableContainer:".parking-app-results-unavailable-containter",ParkingAppResultsErrorContainer:".parking-app-results-error-containter",ParkingAppResultsContainer:".parking-app-results-containter",ParkingAppAllSpacesTab:"#allSpacesTab",ParkingAppAvailableSpacesTab:"#availableSpacesTab",ShortTermFilter:"#shortTermFilter",LongTermFilter:"#longTermFilter",AllocatedSpaceFilter:"#allocatedSpaceFilter",ShelteredParkingFilter:"#shelteredParkingFilter",GarageFilter:"#garageFilter",TwentyFourSevenAccessFilter:"#twentyFourSevenAccessFilter",SecurityGatesFilter:"#securityGatesFilter",AirportTransfersFilter:"#airportTransfersFilter",SearchLocationSelected:"#searchLocationSelected",SearchChangeLocationSelected:"#searchChangeLocationSelected",LoadMore:".load-more-section__link",ParkingAppCookieDomain:"#parkingAppCookieDomain",SearchPageCurrentPositionFault:"#searchPageCurrentPositionFault",ResultsPageCurrentPositionFault:"#resultsPageCurrentPositionFault"},a.Constants={ShortTitleTextToRemove:"Parking on",ShortDescriptionLength:65,Ellipsis:"...",ReviewsAverageClassPartial:"parking-space-rating--",SearchStep:1,ResultsStep:2,MaximumParkingSpaceNumber:50,MaximumParkingSpaceDistance:20,CurrentPositionFault:"Unable to find your current location",SourceSearchSubmit:"SearchSubmit",SourceLoadMore:"LoadMore",SourceSearchCookie:"SearchCookie",ParkingSearchCookieName:"ParkingSearch",ParkingAppName:"CarParking",CookieDelimiter:"+",PriceNumberOfDecimalPlaces:2},a.Classes={FilterTabActive:"filter-tab--active"},a.Utils={BindParkingSpace:function(b,c,d){b.Id(c.Id),b.Title(a.Utils.ShortTitle(c.Title)),b.Features(c.Features),b.ImageUrl(c.ImageUrl),b.PriceFrom(c.PriceFrom),b.PriceHourly(c.PriceMatrix.Hourly.toFixed(a.Constants.PriceNumberOfDecimalPlaces)),b.PriceDaily(c.PriceMatrix.Daily.toFixed(a.Constants.PriceNumberOfDecimalPlaces)),b.PriceMonthly(c.PriceMatrix.Monthly.toFixed(a.Constants.PriceNumberOfDecimalPlaces)),b.SpaceType(c.SpaceType),b.RentalTypes(c.RentalTypes),b.Reviews(c.Reviews),b.ReviewsAverageClass(a.Utils.ReviewsAverageClass(c.Reviews)),b.Location(c.Location),b.Distance(a.Utils.FormattedDistance(c.Distance)),b.SpacesAvailable(!c.Let),b.ClickthroughUrl(c.WebsiteUrl),b.Description(a.Utils.ShortDescription(c.Description)),b.ListNumber(d),b.Enabled(!0)},ShortTitle:function(b){return c.trim(b.replace(a.Constants.ShortTitleTextToRemove,""))},ShortDescription:function(b){return c.trim(b).substring(0,a.Constants.ShortDescriptionLength).trim(this)+a.Constants.Ellipsis},ReviewsAverageClass:function(b){if(0===b.Count)return null;switch(b.Average){case 0:return a.Constants.ReviewsAverageClassPartial+"0";case.5:return a.Constants.ReviewsAverageClassPartial+"0-5";case 1:return a.Constants.ReviewsAverageClassPartial+"1";case 1.5:return a.Constants.ReviewsAverageClassPartial+"1-5";case 2:return a.Constants.ReviewsAverageClassPartial+"2";case 2.5:return a.Constants.ReviewsAverageClassPartial+"2-5";case 3:return a.Constants.ReviewsAverageClassPartial+"3";case 3.5:return a.Constants.ReviewsAverageClassPartial+"3-5";case 4:return a.Constants.ReviewsAverageClassPartial+"4";case 4.5:return a.Constants.ReviewsAverageClassPartial+"4-5";case 5:return a.Constants.ReviewsAverageClassPartial+"5";default:return null}},FormattedDistance:function(a){return parseFloat(a).toFixed(1)},ValidateForm:function(){return c("#frmBody").valid()},WriteNewRelicPageEvent:function(c,d){d=d||{},d=a.Utils.GetCustomerFromCookies(d),b&&void 0!==b.addPageAction&&b.addPageAction(CONFUSEDPARKINGAPP.Constants.ParkingAppName+c,d)},GetCustomerFromCookies:function(a){a=a||{};for(var b=document.cookie.split(";"),c="",d="",e=0;e<b.length;e++)-1!==b[e].indexOf("X-UniqueCustomerSessionID")&&(c=b[e].split("=")[1]),-1!==b[e].indexOf("X-UniqueCustomerCookieID")&&(d=b[e].split("=")[1]);return a.XUniqueCustomerSessionIDString=c,a.XUniqueCustomerCookieIDString=d,a}},a.ParkingSpace=function(){var a=this;a.Id=ko.observable(0),a.Title=ko.observable(""),a.Features=ko.observable(""),a.ImageUrl=ko.observable(""),a.PriceFrom=ko.observable(""),a.PriceHourly=ko.observable(0),a.PriceDaily=ko.observable(0),a.PriceMonthly=ko.observable(0),a.SpaceType=ko.observable(""),a.RentalTypes=ko.observable(""),a.Reviews=ko.observable(""),a.ReviewsAverageClass=ko.observable(""),a.Location=ko.observable(""),a.Distance=ko.observable(""),a.Quote=ko.observable(""),a.Description=ko.observable(""),a.SpacesAvailable=ko.observable(!1),a.ClickthroughUrl=ko.observable(""),a.ListNumber=ko.observable(0),a.Enabled=ko.observable(!0)},a.ParkingFilter=function(){var a=this;a.SpacesAvailable=ko.observable(!1),a.ShortTerm=ko.observable(!0),a.LongTerm=ko.observable(!0),a.AllocatedSpace=ko.observable(!1),a.ShelteredParking=ko.observable(!1),a.Garage=ko.observable(!1),a.TwentyFourSevenAccess=ko.observable(!1),a.SecurityGates=ko.observable(!1),a.AirportTransfers=ko.observable(!1)},a.ParkingAppForm=function(){var b=this;b.currentStep=ko.observable(a.Constants.SearchStep),b.Autocomplete="",b.Place="",b.Map="",b.Markers=[],b.MapInUse=!1,b.ParkingSpaces=new ko.observableArray,b.ParkingFilter=ko.observable(new a.ParkingFilter),b.ParkingSpacesPageNumber=ko.observable(0),b.ParkingSpacesListNumber=ko.observable(0),b.FeatureFilterCount=ko.observable(0),b.IsSearching=ko.observable(!1),b.CookieDomain=c(a.Elements.ParkingAppCookieDomain).val(),b.LocationLatitude="",b.LocationLongitude="",b.SearchAddress="",b.PlaceId="",b.IsUseCurrentPosition=!1,b.Initialise=function(){ko.applyBindings(b,document.getElementById("main")),setTimeout(function(){
var d=c("div.parking-app").data("placesApiUrl");if(""!==d){c.ajax({type:"GET",url:d,dataType:"script",cache:!0,success:function(){b.Autocomplete=CONFUSEDPARKINGAPP.Search.initAutocomplete()}}),b.bindFilterEvents();var e=Confused.CookieManager.prototype.getItem(a.Constants.ParkingSearchCookieName);null!==e&&b.handleSearchCookie(e),b.handleInternetExplorer()}},200)},b.searchParkingSpaces=function(){if(b.SearchAddress=b.getAddressFromSearchbox(),a.Utils.ValidateForm()){if(b.IsUseCurrentPosition||(b.Place=CONFUSEDPARKINGAPP.Search.getPlace(b.Autocomplete)),!b.Place)return c(a.Elements.ParkingAppResultsErrorContainer).show(),c(a.Elements.ParkingAppResultsContainer).hide(),void c(a.Elements.ParkingAppMapWrapper).hide();c(a.Elements.ParkingAppResultsErrorContainer).hide(),b.PlaceId=b.Place.place_id,b.LocationLatitude=b.Place.geometry.location.lat(),b.LocationLongitude=b.Place.geometry.location.lng(),b.ParkingSpacesPageNumber(1),b.ParkingSpacesListNumber(1),b.ParkingFilter(new a.ParkingFilter),b.FeatureFilterCount(0),b.ParkingSpaces.removeAll(),b.prepareResultsPage(),b.getParkingSpaces(a.Constants.SourceSearchSubmit)}},b.loadMoreParkingSpaces=function(){b.ParkingSpacesPageNumber(b.ParkingSpacesPageNumber()+1),b.getParkingSpaces(a.Constants.SourceLoadMore)},b.getParkingSpaces=function(d){b.clearAddressFromSearchbox(),b.hideParkingSpacesUnavailableMessages(),c(a.Elements.ParkingAppResultsContainer).hide(),c(a.Elements.ParkingAppResultsLoadingContainer).show(),b.handleMapLoading(),b.IsSearching()||(b.IsSearching(!0),c.ajax({url:"/api/parkingv2/parkingapp/GetParkingSpaces",data:ko.toJSON({LocationLatitude:b.LocationLatitude,LocationLongitude:b.LocationLongitude,PageNumber:b.ParkingSpacesPageNumber(),SearchAddress:b.SearchAddress,GooglePlaceId:b.PlaceId,Source:d}),type:"POST",contentType:"text/json",success:function(d){return b.IsSearching(!1),b.IsUseCurrentPosition=!1,b.Autocomplete=CONFUSEDPARKINGAPP.Search.initAutocomplete(),c(a.Elements.ParkingAppResultsLoadingContainer).hide(),!1===d.result?void b.showParkingSpacesUnavailableMessages():(b.bindParkingSpaces(d),0===b.ParkingSpaces().length?void b.showParkingSpacesUnavailableMessages():(c(a.Elements.ParkingAppResultsContainer).show(),b.getFilterCount()>0&&b.handleFilterEvent(),void b.handleMap()))},error:function(){b.IsSearching(!1),b.IsUseCurrentPosition=!1,b.Autocomplete=CONFUSEDPARKINGAPP.Search.initAutocomplete(),c(a.Elements.ParkingAppResultsLoadingContainer).hide(),c(a.Elements.ParkingAppResultsErrorContainer).show(),b.handleMapError()},timeout:2e4}))},b.bindParkingSpaces=function(d){d.JsonViewSpaces.sort(function(a,b){return parseFloat(a.Distance)-parseFloat(b.Distance)}),c.each(d.JsonViewSpaces,function(d,e){if(!1!==e){var f=new a.ParkingSpace,g=c.parseJSON(e);if(b.ParkingSpacesListNumber()>a.Constants.MaximumParkingSpaceNumber||a.Utils.FormattedDistance(g.Distance)>a.Constants.MaximumParkingSpaceDistance)return CONFUSEDPARKINGAPP.submitDisplayLimit(b.SearchAddress,b.Place.place_id,b.ParkingSpacesListNumber(),a.Constants.MaximumParkingSpaceNumber,a.Utils.FormattedDistance(g.Distance),a.Constants.MaximumParkingSpaceDistance),b.ParkingSpacesListNumber(b.ParkingSpacesListNumber()-1),c(a.Elements.LoadMore).hide(),!1;a.Utils.BindParkingSpace(f,g,b.ParkingSpacesListNumber()),b.ParkingSpaces.push(f),b.ParkingSpacesListNumber(b.ParkingSpacesListNumber()+1),b.ParkingSpacesListNumber()===a.Constants.MaximumParkingSpaceNumber&&c(a.Elements.LoadMore).hide()}})},b.handleMap=function(){return b.isMapDeviceEnabled()?(b.MapInUse=!0,b.Map||(b.Map=CONFUSEDPARKINGAPP.Map.initMap()),null===b.Map?void b.handleMapError():(b.Markers=CONFUSEDPARKINGAPP.Map.addParkingSpacesToMap(b.ParkingSpaces(),b.Map,b.Markers,{LocationLatitude:b.LocationLatitude,LocationLongitude:b.LocationLongitude,SearchAddress:b.SearchAddress,PlaceId:b.PlaceId,ParkingSearchCookieName:a.Constants.ParkingSearchCookieName,CookieDomain:b.CookieDomain,CookieDelimiter:a.Constants.CookieDelimiter}),null===b.Markers?void b.handleMapError():void b.handleMapLoaded())):void(b.MapInUse=!1)},b.isMapDeviceEnabled=function(){return!0===c(a.Elements.ParkingAppMapDeviceWrapper).is(":visible")},b.handleMapLoading=function(){c(a.Elements.ParkingAppMapWrapper).hide(),c(a.Elements.ParkingAppMapErrorMessage).hide(),c(a.Elements.ParkingAppMapSpinner).show()},b.handleMapError=function(){c(a.Elements.ParkingAppMapSpinner).hide(),c(a.Elements.ParkingAppMapWrapper).hide(),c(a.Elements.ParkingAppMapErrorMessage).show(),CONFUSEDPARKINGAPP.Utils.WriteNewRelicPageEvent("MapRenderFailed")},b.handleMapLoaded=function(){c(a.Elements.ParkingAppMapSpinner).hide(),c(a.Elements.ParkingAppMapErrorMessage).hide(),c(a.Elements.ParkingAppMapWrapper).show(),CONFUSEDPARKINGAPP.Utils.WriteNewRelicPageEvent("MapRender")},c(window).resize(function(){b.handleMapOnWindowResize()}),c(document).on("keydown",function(a){13===a.keyCode&&b.searchParkingSpaces()}),b.handleMapOnWindowResize=function(){b.currentStep()===a.Constants.ResultsStep&&(!1===b.MapInUse&&!0===b.isMapDeviceEnabled()?b.handleMap():!0===b.MapInUse&&!1===b.isMapDeviceEnabled()&&b.handleMap())},b.allSpacesTab=function(){b.ParkingFilter().SpacesAvailable(!1),b.handleFilterEvent(),c(a.Elements.ParkingAppAllSpacesTab).addClass(a.Classes.FilterTabActive),c(a.Elements.ParkingAppAvailableSpacesTab).removeClass(a.Classes.FilterTabActive)},b.availableSpacesTab=function(){b.ParkingFilter().SpacesAvailable(!0),b.handleFilterEvent(),c(a.Elements.ParkingAppAvailableSpacesTab).addClass(a.Classes.FilterTabActive),c(a.Elements.ParkingAppAllSpacesTab).removeClass(a.Classes.FilterTabActive)},b.bindFilterEvents=function(){c(a.Elements.ShortTermFilter).change(function(){b.handleFilterEvent()}),c(a.Elements.LongTermFilter).change(function(){b.handleFilterEvent()}),c(a.Elements.AllocatedSpaceFilter).change(function(){b.handleFilterEvent()}),c(a.Elements.ShelteredParkingFilter).change(function(){b.handleFilterEvent()}),c(a.Elements.GarageFilter).change(function(){b.handleFilterEvent()}),c(a.Elements.TwentyFourSevenAccessFilter).change(function(){b.handleFilterEvent()}),c(a.Elements.SecurityGatesFilter).change(function(){b.handleFilterEvent()}),c(a.Elements.AirportTransfersFilter).change(function(){b.handleFilterEvent()})},b.handleFilterEvent=function(){setTimeout(function(){if(b.ParkingSpaces(CONFUSEDPARKINGAPP.Filter.handleFilter(b.ParkingFilter(),b.ParkingSpaces())),CONFUSEDPARKINGAPP.submitFilter(b.ParkingFilter()),b.FeatureFilterCount(b.getFeatureFilterCount()),!1===b.isParkingSpacesAvailable())return void b.showParkingSpacesUnavailableMessages();b.hideParkingSpacesUnavailableMessages(),b.handleMap()},200)},b.isParkingSpacesAvailable=function(){var a=!1;return c.each(b.ParkingSpaces(),function(b,c){c.Enabled()&&(a=!0)}),a},b.showParkingSpacesUnavailableMessages=function(){c(a.Elements.ParkingAppMapWrapper).hide(),c(a.Elements.ParkingAppMapSpinner).hide(),c(a.Elements.ParkingAppResultsContainer).hide(),c(a.Elements.ParkingAppMapUnavailableMessage).show(),c(a.Elements.ParkingAppResultsUnavailableContainer).show()},b.hideParkingSpacesUnavailableMessages=function(){c(a.Elements.ParkingAppMapWrapper).show(),c(a.Elements.ParkingAppResultsContainer).show(),c(a.Elements.ParkingAppMapUnavailableMessage).hide(),c(a.Elements.ParkingAppResultsUnavailableContainer).hide()},b.getFeatureFilterCount=function(){var a=0;return b.ParkingFilter().AllocatedSpace()&&a++,b.ParkingFilter().ShelteredParking()&&a++,b.ParkingFilter().Garage()&&a++,b.ParkingFilter().TwentyFourSevenAccess()&&a++,b.ParkingFilter().SecurityGates()&&a++,b.ParkingFilter().AirportTransfers()&&a++,a},b.getFilterCount=function(){var a=b.getFeatureFilterCount();return b.ParkingFilter().SpacesAvailable()&&a++,!1===b.ParkingFilter().ShortTerm()&&a++,!1===b.ParkingFilter().LongTerm()&&a++,a},b.useCurrentPosition=function(){function d(d){CONFUSEDPARKINGAPP.Utils.WriteNewRelicPageEvent("CurrentPosition");var e=new google.maps.Geocoder,f={lat:parseFloat(d.coords.latitude),lng:parseFloat(d.coords.longitude)};e.geocode({location:f},function(e,f){if("OK"===f){if(e[1]){var g=e[1];null!==g&&void 0!==g&&g.geometry||(CONFUSEDPARKINGAPP.Utils.WriteNewRelicPageEvent("ReverseGeocodingPlaceFailed"),b.handleCurrentPositionFault()),b.Place=g,b.IsUseCurrentPosition=!0,c("#parkingAppSearchBox").is(":visible")?(c("#parkingAppSearchBox").val(b.Place.formatted_address),c(a.Elements.SearchLocationSelected).is(":checked")||c(a.Elements.SearchLocationSelected).click()):(c("#parkingAppChangeSearchBox").val(b.Place.formatted_address),c(a.Elements.SearchChangeLocationSelected).is(":checked")||c(a.Elements.SearchChangeLocationSelected).click()),CONFUSEDPARKINGAPP.submitCurrentPosition(d.coords.latitude,d.coords.longitude,b.getAddressFromSearchbox(),b.Place.place_id),CONFUSEDPARKINGAPP.Utils.WriteNewRelicPageEvent("ReverseGeocoding")}}else CONFUSEDPARKINGAPP.Utils.WriteNewRelicPageEvent("ReverseGeocodingFailed"),b.handleCurrentPositionFault()})}function e(){CONFUSEDPARKINGAPP.Utils.WriteNewRelicPageEvent("CurrentPositionFailed"),b.handleCurrentPositionFault()}return navigator.geolocation?navigator.geolocation.getCurrentPosition(d,e,{timeout:5e3,enableHighAccuracy:!0,maximumAge:0}):(CONFUSEDPARKINGAPP.Utils.WriteNewRelicPageEvent("CurrentPositionUnavailable"),b.handleCurrentPositionFault()),!1},b.handleCurrentPositionFault=function(){c("#parkingAppSearchBox").is(":visible")?c(a.Elements.SearchPageCurrentPositionFault).prop("checked",!0):c(a.Elements.ResultsPageCurrentPositionFault).prop("checked",!0),a.Utils.ValidateForm(),c("#parkingAppSearchBox").is(":visible")?c(a.Elements.SearchPageCurrentPositionFault).prop("checked",!1):c(a.Elements.ResultsPageCurrentPositionFault).prop("checked",!1)},b.handleClickthrough=function(c,d,e,f,g,h,i){CONFUSEDPARKINGAPP.submitClickthrough(c,d,e,f,g,h,i);var j=b.LocationLatitude+a.Constants.CookieDelimiter+b.LocationLongitude+a.Constants.CookieDelimiter+b.SearchAddress+a.Constants.CookieDelimiter+b.PlaceId;Confused.CookieManager.prototype.setItem(a.Constants.ParkingSearchCookieName,j,null,"/",b.CookieDomain),setTimeout(function(){window.open(c,"_self")},50)},b.getAddressFromSearchbox=function(){var a=c("#parkingAppChangeSearchBox").val();if(a)return a;var b=c("#parkingAppSearchBox").val();return b||""},b.clearAddressFromSearchbox=function(){c("#parkingAppSearchBox").val(""),c("#parkingAppChangeSearchBox").val("")},b.handleSearchCookie=function(c){Confused.CookieManager.prototype.removeItem(a.Constants.ParkingSearchCookieName,"/",b.CookieDomain);var d=c.split(a.Constants.CookieDelimiter);4===d.length&&(b.SearchAddress=d[2],b.PlaceId=d[3],b.LocationLatitude=d[0],b.LocationLongitude=d[1],b.ParkingSpacesPageNumber(1),b.ParkingSpacesListNumber(1),b.prepareResultsPage(),b.getParkingSpaces(a.Constants.SourceSearchCookie))},b.prepareResultsPage=function(){c(".scaffold.band").not(".global-header, .global-header__secondary, .global-footer-band").hide(),c(a.Elements.LoadMore).show(),b.currentStep(a.Constants.ResultsStep)},b.handleInternetExplorer=function(){var a=window.navigator.userAgent,b=-1!==a.indexOf("MSIE "),d=-1!==a.indexOf("Trident/");(b||d)&&c(".advanced-filters-list__item input[type=checkbox] + label").css("padding-left","30px")}},a.jQueryValidateExtensions=function(){c.validator.addMethod("addressSelectedIfElementVisible",function(a,b,d){var e=jQuery(b);return!jQuery(d[0]).is(":visible")||!!c(jQuery(d[1])).prop("checked")||!e.is("[type=checkbox]")||e.is(":checked")},"Please check your input."),c.validator.addMethod("notdefaultIfElementVisible",function(a,b,d){var e=jQuery(d[1]);return!e.is(":visible")||(!!c(jQuery(d[2])).prop("checked")||e.val()!==d[0])},"Please check your input."),c.validator.addMethod("currentPositionFault",function(a,b,c){return!jQuery(c[0]).is(":visible")||!b.checked},"Please check your input.")},a.carParkingRules=function(){function b(a,b,c){var d=b.find(c.selector);0!==d.length&&d.rules("add",c.rules)}function c(a,c,d){if(!a)throw"$form is undefined!";if(0!==a.length){d=d||{};for(var e=a.validate(d),f=0;f<c.length;f++){b(e,a,c[f])}}}var d=function(a,b,c){this.selector=a,this.rules=b,this.message=c};return{hookup:c,validationRules:{SearchSelected:new d("input#searchLocationSelected",{notdefaultIfElementVisible:["","input#parkingAppSearchBox","input#searchPageCurrentPositionFault"],addressSelectedIfElementVisible:["input#parkingAppSearchBox","input#searchPageCurrentPositionFault"],messages:{notdefaultIfElementVisible:"Please tell us where you&apos;d like to park.",addressSelectedIfElementVisible:"Please select a location from the list"}}),SearchChangeSelected:new d("input#searchChangeLocationSelected",{notdefaultIfElementVisible:["","input#parkingAppChangeSearchBox","input#resultsPageCurrentPositionFault"],addressSelectedIfElementVisible:["input#parkingAppChangeSearchBox","input#resultsPageCurrentPositionFault"],messages:{notdefaultIfElementVisible:"Please tell us where you&apos;d like to park.",addressSelectedIfElementVisible:"Please select a location from the list"}}),SearchPageCurrentPositionFault:new d("input#searchPageCurrentPositionFault",{currentPositionFault:["input#parkingAppSearchBox"],messages:{currentPositionFault:a.Constants.CurrentPositionFault}}),ResultsPageCurrentPositionFault:new d("input#resultsPageCurrentPositionFault",{currentPositionFault:["input#parkingAppChangeSearchBox"],messages:{currentPositionFault:a.Constants.CurrentPositionFault}})}}},a.setUpValidation=function(b){a.jQueryValidateExtensions();var d=a.carParkingRules();d.hookup(b,[d.validationRules.SearchSelected,d.validationRules.SearchChangeSelected,d.validationRules.SearchPageCurrentPositionFault,d.validationRules.ResultsPageCurrentPositionFault],{errorElement:"div",errorClass:"error-message",errorPlacement:function(a,b){b.parent().find("div.error-placement").append(a)},onfocusout:function(a){(!c(a).hasClass("ignore")&&c(a).hasClass("notdefault")||!this.checkable(a)&&(a.name in this.submitted||!this.optional(a)))&&this.element(a)},onblur:function(a){(!c(a).hasClass("ignore")&&c(a).hasClass("notdefault")||!this.checkable(a)&&(a.name in this.submitted||!this.optional(a)))&&this.element(a)},ignore:""})},c(a.Elements.ParkingAppWidget).length>0){(new CONFUSEDPARKINGAPP.ParkingAppForm).Initialise(),CONFUSEDPARKINGAPP.setUpValidation(c("#frmBody"))}}(CONFUSEDPARKINGAPP,newrelic,jQuery);var CONFUSEDCMS=CONFUSEDCMS||{},CONFUSEDPARKINGAPP=CONFUSEDPARKINGAPP||{};CONFUSEDPARKINGAPP.Filter=CONFUSEDPARKINGAPP.Filter||{},function(a,b){"use strict";a.FilterConstants={AllocatedSpace:"allocated_space",ShelteredParking:"sheltered_parking",Garage:"lockup_or_garage",TwentyFourSevenAccess:"twentyfour_hours_access",SecurityGates:"security_gates",AirportTransfers:"arranged_transfer"},a.handleFilter=function(c,d){return b.each(d,function(b,d){a.isSpacesAvailableFiltered(c,d)||a.isShortLongTermFiltered(c,d)||a.isFeaturesFiltered(c,d)?d.Enabled(!1):d.Enabled(!0)}),d},a.isSpacesAvailableFiltered=function(a,b){return!0===a.SpacesAvailable()&&!1===b.SpacesAvailable()},a.isShortLongTermFiltered=function(a,b){return!(!0===a.ShortTerm()&&(b.PriceHourly()>0||b.PriceDaily()>0)||!0===a.LongTerm()&&b.PriceMonthly()>0)},a.isFeaturesFiltered=function(b,c){return!!(a.isFeatureFiltered(b.AllocatedSpace(),c.Features(),a.FilterConstants.AllocatedSpace)||a.isFeatureFiltered(b.ShelteredParking(),c.Features(),a.FilterConstants.ShelteredParking)||a.isGarageFiltered(b.Garage(),c.SpaceType())||a.isFeatureFiltered(b.TwentyFourSevenAccess(),c.Features(),a.FilterConstants.TwentyFourSevenAccess)||a.isFeatureFiltered(b.SecurityGates(),c.Features(),a.FilterConstants.SecurityGates)||a.isFeatureFiltered(b.AirportTransfers(),c.Features(),a.FilterConstants.AirportTransfers))},a.isFeatureFiltered=function(a,c,d){if(!0===a){var e=!0;return b.each(c,function(a,b){b===d&&(e=!1)}),e}return!1},a.isGarageFiltered=function(b,c){return!0===b&&c!==a.FilterConstants.Garage}}(CONFUSEDPARKINGAPP.Filter,jQuery);var CONFUSEDCMS=CONFUSEDCMS||{},CONFUSEDPARKINGAPP=CONFUSEDPARKINGAPP||{},Confused=Confused||{};CONFUSEDPARKINGAPP.Map=CONFUSEDPARKINGAPP.Map||{},function(a,b){"use strict";a.Elements={ParkingAppMap:"#parkingAppMap",ParkingAppSpace:".node-parking-space",ParkingAppMapClickthroughAvailable:"#hdnParkingAppMapClickthroughAvailable",ParkingAppMapClickthroughUnavailable:"#hdnParkingAppMapClickthroughUnavailable"},a.Tokens={ParkingSpaceListNumber:".token-parking-space-list-number",ParkingSpaceTitle:".token-parking-space-title",ParkingSpaceDescription:".token-parking-space-description",ParkingSpaceDistance:".token-parking-space-distance",ParkingSpacePriceHourly:".token-parking-space-price-hourly",ParkingSpacePriceDaily:".token-parking-space-price-daily",ParkingSpacePriceMonthly:".token-parking-space-price-monthly",ParkingSpaceFeature:".token-parking-space-feature",ParkingSpaceReviewsAverage:".token-parking-space-reviews-average",ParkingSpaceMapMarkerIcon:".token-parking-space-map-marker-icon",ParkingSpaceClickthrough:".token-parking-space-clickthrough",ParkingSpaceImageSpaceCurrentlyUnavailable:".token-parking-space-image-space-currently-unavailable",ParkingSpaceImagePlaceholderWrapper:".token-parking-space-image-placeholder-wrapper"},a.Nodes={ParkingSpacePriceHourly:".node-parking-space-price-hourly",ParkingSpacePriceDaily:".node-parking-space-price-daily",ParkingSpacePriceMonthly:".node-parking-space-price-monthly",ParkingSpaceFeature:".node-parking-space-feature",ParkingSpaceImage:".node-parking-space-image"},a.Classes={ParkingSpaceImage:"parking-space-image",ResultsMainCtaMoreDetails:"result-main-cta--more-details",ResultsMainCtaJoinList:"result-main-cta--join-list",ItemLozengeNumbered:"item-lozenge--numbered",ItemLozengeLet:"item-lozenge--let"},a.Constants={SourceMapPanelSpacesAvailable:"MapPanel:SpacesAvailable",SourceMapPanelSpacesUnavailable:"MapPanel:SpacesUnavailable"},a.initMap=function(){var c={mapTypeId:google.maps.MapTypeId.ROADMAP,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP},scrollwheel:!1,disableDefaultUI:!0};return CONFUSEDPARKINGAPP.Utils.WriteNewRelicPageEvent("MapInit"),new google.maps.Map(b(a.Elements.ParkingAppMap).get(0),c)},a.addParkingSpacesToMap=function(c,d,e,f){var g=this;g.ActiveInfoWindow=null;for(var h=0;h<e.length;h++)e[h].setMap(null);e=[];var i=b(a.Elements.ParkingAppSpace),j=b(i).find(a.Tokens.ParkingSpaceMapMarkerIcon).css("background-image"),k=j.replace("url(","").replace(")","").replace(/\"/gi,""),l=new google.maps.LatLngBounds;return b.each(c,function(b,h){if(!1!==h.Enabled()){a.offsetLatLng(h,c);var j=h.ListNumber().toString(),m=new google.maps.Marker({map:d,anchorPoint:new google.maps.Point(0,-29),label:{text:" ",fontFamily:"Roboto, Arial, sans-serif, custom-marker-label-"+j}}),n=new google.maps.InfoWindow,o=30;h.SpacesAvailable()||(o=96),m.setIcon({url:k,size:new google.maps.Size(46,40),origin:new google.maps.Point(o,165),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(168,206)}),m.setPosition({lat:h.Location().Lat,lng:h.Location().Lng}),m.setVisible(!0);var p=a.getInfoContent(i.clone(),h,f);n.setContent(p[0]),m.addListener("click",function(){null!==g.ActiveInfoWindow&&g.ActiveInfoWindow.close(),n.open(d,m),g.ActiveInfoWindow=n}),l.extend(m.getPosition()),e.push(m)}}),a.addMarkerIconLabelTextEvents(d,i),setTimeout(function(){d.fitBounds(l)},50),e},a.getInfoContent=function(c,d,e){var f=c;return b(f).find(a.Tokens.ParkingSpaceTitle).text(d.Title()),b(f).find(a.Tokens.ParkingSpaceDescription).text(d.Description()),b(f).find(a.Tokens.ParkingSpaceDistance).text(d.Distance()),b(f).find(a.Tokens.ParkingSpaceListNumber).text(d.ListNumber()),d.SpacesAvailable()?b(f).find(a.Tokens.ParkingSpaceListNumber).addClass(a.Classes.ItemLozengeNumbered):b(f).find(a.Tokens.ParkingSpaceListNumber).addClass(a.Classes.ItemLozengeLet),d.ImageUrl()?b(f).find(a.Nodes.ParkingSpaceImage).append("<img src='"+d.ImageUrl()+"' class='"+a.Classes.ParkingSpaceImage+"'>"):b(f).find(a.Tokens.ParkingSpaceImagePlaceholderWrapper).show(),d.SpacesAvailable()||b(f).find(a.Tokens.ParkingSpaceImageSpaceCurrentlyUnavailable).show(),a.bindPriceInfoContent(f,d.PriceHourly(),a.Tokens.ParkingSpacePriceHourly,a.Nodes.ParkingSpacePriceHourly),a.bindPriceInfoContent(f,d.PriceDaily(),a.Tokens.ParkingSpacePriceDaily,a.Nodes.ParkingSpacePriceDaily),a.bindPriceInfoContent(f,d.PriceMonthly(),a.Tokens.ParkingSpacePriceMonthly,a.Nodes.ParkingSpacePriceMonthly),null===d.ReviewsAverageClass()?b(f).find(a.Tokens.ParkingSpaceReviewsAverage).css("background-image","none"):b(f).find(a.Tokens.ParkingSpaceReviewsAverage).addClass(d.ReviewsAverageClass()),d.SpacesAvailable()?(b(f).find(a.Tokens.ParkingSpaceClickthrough).click(function(){a.handleMapClickthrough(d.ClickthroughUrl(),d.Id(),d.PriceHourly(),d.PriceDaily(),d.PriceMonthly(),d.Distance(),a.Constants.SourceMapPanelSpacesAvailable,e)}),b(f).find(a.Tokens.ParkingSpaceClickthrough).html(b(a.Elements.ParkingAppMapClickthroughAvailable).val()),b(f).find(a.Tokens.ParkingSpaceClickthrough).addClass(a.Classes.ResultsMainCtaMoreDetails)):(b(f).find(a.Tokens.ParkingSpaceClickthrough).click(function(){a.handleMapClickthrough(d.ClickthroughUrl(),d.Id(),d.PriceHourly(),d.PriceDaily(),d.PriceMonthly(),d.Distance(),a.Constants.SourceMapPanelSpacesUnavailable,e)}),b(f).find(a.Tokens.ParkingSpaceClickthrough).html(b(a.Elements.ParkingAppMapClickthroughUnavailable).val()),b(f).find(a.Tokens.ParkingSpaceClickthrough).addClass(a.Classes.ResultsMainCtaJoinList)),f},a.bindPriceInfoContent=function(a,c,d,e){c>0?b(a).find(d).text(c):b(a).find(e).remove()},a.handleMapClickthrough=function(a,b,c,d,e,f,g,h){CONFUSEDPARKINGAPP.submitClickthrough(a,b,c,d,e,f,g);var i=h.LocationLatitude+h.CookieDelimiter+h.LocationLongitude+h.CookieDelimiter+h.SearchAddress+h.CookieDelimiter+h.PlaceId;Confused.CookieManager.prototype.setItem(h.ParkingSearchCookieName,i,null,"/",h.CookieDomain),setTimeout(function(){window.open(a,"_self")},50)},a.offsetLatLng=function(b,c){for(;a.isDuplicateLatLng(b.Id(),b.Location().Lat,b.Location().Lng,c);)b.Location().Lat+=5e-5,b.Location().Lng+=5e-5},a.isDuplicateLatLng=function(a,c,d,e){var f=!1;return b.each(e,function(b,e){if(e.Id()!==a&&e.Location().Lat===c&&e.Location().Lng===d)return f=!0,!1}),f},a.addMarkerIconLabelTextEvents=function(b,c){google.maps.event.addListener(b,"idle",function(){a.addMarkerIconLabelText(b,c)}),a.addTilesAndZoomEvents(b,c,50),a.addTilesAndZoomEvents(b,c,100)},a.addTilesAndZoomEvents=function(b,c,d){google.maps.event.addListener(b,"tilesloaded",function(){setTimeout(function(){a.addMarkerIconLabelText(b,c)},d)}),google.maps.event.addListener(b,"zoom_changed",function(){setTimeout(function(){a.addMarkerIconLabelText(b,c)},d)})},a.addMarkerIconLabelText=function(c,d){for(var e=document.querySelectorAll("[style*='custom-marker-label']"),f=b(b(d).find(a.Tokens.ParkingSpaceMapMarkerIcon)[0].innerHTML),g=0;g<e.length;g++){var h=e[g].getAttribute("style").match(/custom-marker-label-([0-9]+)/);b(f).html(h[1]),e[g].innerHTML=f.get(0).outerHTML}}}(CONFUSEDPARKINGAPP.Map,jQuery);var CONFUSEDCMS=CONFUSEDCMS||{},CONFUSEDPARKINGAPP=CONFUSEDPARKINGAPP||{};!function(){"use strict";CONFUSEDPARKINGAPP.submitFilter=function(a){CONFUSEDPARKINGAPP.submitPageEvent({EventType:"parkingapp:filter:clicked",EventInfo:{SpacesAvailable:a.SpacesAvailable(),ShortTerm:a.ShortTerm(),LongTerm:a.LongTerm(),AllocatedSpace:a.AllocatedSpace(),ShelteredParking:a.ShelteredParking(),Garage:a.Garage(),TwentyFourSevenAccess:a.TwentyFourSevenAccess(),SecurityGates:a.SecurityGates(),AirportTransfers:a.AirportTransfers()}})},CONFUSEDPARKINGAPP.submitClickthrough=function(a,b,c,d,e,f,g){CONFUSEDPARKINGAPP.submitPageEvent({EventType:"parkingapp:clickthrough:clicked",EventInfo:{ClickthroughUrl:a,SpaceId:b,PriceHourly:c,PriceDaily:d,PriceMonthly:e,DistanceInMiles:f,Source:g}})},CONFUSEDPARKINGAPP.submitDisplayLimit=function(a,b,c,d,e,f){CONFUSEDPARKINGAPP.submitPageEvent({EventType:"parkingapp:displaylimit:applied",EventInfo:{SearchAddress:a,GooglePlaceId:b,NumberOfParkingSpace:c,MaxNumberOfParkingSpaces:d,DistanceOfParkingSpace:e,MaxDistanceOfParkingSpaces:f}})},CONFUSEDPARKINGAPP.submitCurrentPosition=function(a,b,c,d){CONFUSEDPARKINGAPP.submitPageEvent({EventType:"parkingapp:currentposition:clicked",EventInfo:{PositionLatitude:a,PositionLongitude:b,SearchAddress:c,GooglePlaceId:d}})},CONFUSEDPARKINGAPP.submitPageEvent=function(a){CONFUSEDCMS.services.MiService().pageEvent(a)}}();var CONFUSEDCMS=CONFUSEDCMS||{},CONFUSEDPARKINGAPP=CONFUSEDPARKINGAPP||{};CONFUSEDPARKINGAPP.Search=CONFUSEDPARKINGAPP.Search||{},function(a,b){"use strict";a.Elements={ParkingAppSearchBox:"#parkingAppSearchBox",ParkingAppChangeSearchBox:"#parkingAppChangeSearchBox",SearchChangeLocationSelected:"#searchChangeLocationSelected",SearchLocationSelected:"#searchLocationSelected"},a.initAutocomplete=function(){var c=null,d=null;if(b(a.Elements.ParkingAppSearchBox).is(":visible")&&(c=b(a.Elements.ParkingAppSearchBox).get(0),b(c).change(function(){return b(a.Elements.SearchLocationSelected).prop("checked",!1),!1}),d=a.Elements.SearchLocationSelected),b(a.Elements.ParkingAppChangeSearchBox).is(":visible")&&(c=b(a.Elements.ParkingAppChangeSearchBox).get(0),b(c).change(function(){return b(a.Elements.SearchChangeLocationSelected).prop("checked",!1),!1}),d=a.Elements.SearchChangeLocationSelected),null===c)return null;var e={componentRestrictions:{country:"uk"}};google.maps.event.clearInstanceListeners(c);var f=new google.maps.places.Autocomplete(c,e);return google.maps.event.addListener(f,"place_changed",function(){return b(d).prop("checked",!0),!0}),f},a.getPlace=function(a){var b=a.getPlace();return null!==b&&void 0!==b&&b.geometry?(CONFUSEDPARKINGAPP.Utils.WriteNewRelicPageEvent("AutocompleteGetPlace"),b):(CONFUSEDPARKINGAPP.Utils.WriteNewRelicPageEvent("AutocompleteGetPlaceFailed"),null)}}(CONFUSEDPARKINGAPP.Search,jQuery);var CONFUSEDCMS=CONFUSEDCMS||{},CONFUSEDPETROLPRICES=CONFUSEDPETROLPRICES||{},Confused=Confused||{},newrelic=newrelic||{};!function(a,b){"use strict";if(a.Elements={SFPostcode:"#sfPostcode",SFRadius:"#sfRadius",SFPostcodeError:"#sfPostcodeError",RSPostcode:"#rsPostcode",RSFuelTypeDefaultOption:"#rsFuelType option[value='0']",RSPostcodeError:"#rsPostcodeError",ScrollPricesRightLink:".petrol-price-results__link--right",ScrollPricesLeftLink:".petrol-price-results__link--left",ShowingNumberOfPrices:"#showingNumberOfPrices",ShowingNumberOfPricesTokenized:"#showingNumberOfPricesTokenized",IsOpenFilter:"#open-now-check",SortPricesByCheapest:"#sortPricesByCheapest",SortPricesByDistance:"#sortPricesByDistance",PetrolPriceCalculator:"div.petrol-price-calculator",DirectionsApiLink:"#directionsApiLink"},a.Classes={ResultsFilterActive:"results-filter--active"},a.Constants={AppleMaps:"http://maps.apple.com/maps?",AndroidMaps:"geo:",HttpsMaps:"https://maps.google.com/?",IPhone:"iPhone",IPod:"iPod",IPad:"iPad",Android:"android",AuthPromptCookieName:"AuthPrompt",PriceNumberOfDecimalPlaces:1,DistanceNumberOfDecimalPlaces:1,SavingsNumberOfDecimalPlaces:2,MyLocation:"My location",Radius5Miles:5,Radius10Miles:10,Radius25Miles:25,PriceTypeMock:3,RequestSourceShowMoreResults:"ShowMoreResults",RequestSourceAutoSearch:"AutoSearch",RequestSourceSearchForm:"SearchForm",RequestSourceResultsForm:"ResultsForm",CurrentLocationUnavailable:"Unable to find current location",CurrentLocationError:"Unable to find current location",Station:"station",Stations:"stations",PriceStatisticDefaultValue:"-",PetrolAppName:"PetrolPrices"},a.Tokens={NumberOfPrices:"[#NumberOfPrices]"},a.Utils={BindPrice:function(b,c){b.CategoryNumber(c.CategoryNumber),b.Brand(c.Brand),b.SiteName(c.SiteName),b.Street(c.Street),b.Suburb(c.Suburb),b.Town(c.Town),b.County(c.County),b.Postcode(c.Postcode),b.FormattedAddress(c.FormattedAddress),b.Longitude(c.Longitude),b.Latitude(c.Latitude),b.FuelTypeId(c.FuelTypeId),b.DateOfPrice(a.Utils.FormatDateOfPrice(c.DateOfPrice)),b.ModalPrice(c.ModalPrice.toFixed(a.Constants.PriceNumberOfDecimalPlaces)),b.Distance(c.Distance.toFixed(a.Constants.DistanceNumberOfDecimalPlaces)),b.Logo(c.Logo),b.Savings(c.Savings.toFixed(a.Constants.SavingsNumberOfDecimalPlaces)),b.Ranking(c.Ranking),b.OpeningTime(c.OpeningTime),b.ClosingTime(c.ClosingTime),b.Fuel24Hours(c.Fuel24Hours),b.AutomatService(c.AutomatService),b.IsOpen(c.IsOpen),b.IsOpenText(c.IsOpenText),b.OpeningClosingTimeText(c.OpeningClosingTimeText),b.OpeningHoursText(c.OpeningHoursText),b.PriceType(c.PriceType),b.Enabled(!0)},FormatDateOfPrice:function(a){var c=new Date(Date.parse(a));return c.getDate()+" "+b.datepicker.formatDate("MM",c)+" "+c.getFullYear()},SortPricesByCheapest:function(a){a.Prices.sort(function(a,b){var c=parseFloat(a.ModalPrice()),d=parseFloat(b.ModalPrice());return c===d?0:c<d?-1:1}),CONFUSEDPETROLPRICES.scrollablePricesOnRender(a.countNumberOfPrices())},SortPricesByDistance:function(a){a.Prices.sort(function(a,b){var c=parseFloat(a.Distance()),d=parseFloat(b.Distance());return c===d?0:c<d?-1:1}),CONFUSEDPETROLPRICES.scrollablePricesOnRender(a.countNumberOfPrices())},FormatPriceStatistic:function(b){return b||a.Constants.PriceStatisticDefaultValue},WriteNewRelicPageEvent:function(b,c){c=c||{},c=a.Utils.GetCustomerFromCookies(c),newrelic&&void 0!==newrelic.addPageAction&&newrelic.addPageAction(CONFUSEDPETROLPRICES.Constants.PetrolAppName+b,c)},GetCustomerFromCookies:function(a){a=a||{};for(var b=document.cookie.split(";"),c="",d="",e=0;e<b.length;e++)-1!==b[e].indexOf("X-UniqueCustomerSessionID")&&(c=b[e].split("=")[1]),-1!==b[e].indexOf("X-UniqueCustomerCookieID")&&(d=b[e].split("=")[1]);return a.XUniqueCustomerSessionIDString=c,a.XUniqueCustomerCookieIDString=d,a}},a.Price=function(){var a=this;a.CategoryNumber=ko.observable(""),a.Brand=ko.observable(""),a.SiteName=ko.observable(""),a.Street=ko.observable(""),a.Suburb=ko.observable(""),a.Town=ko.observable(""),a.County=ko.observable(""),a.Postcode=ko.observable(""),a.FormattedAddress=ko.observable(""),a.Latitude=ko.observable(""),a.Longitude=ko.observable(""),a.FuelTypeId=ko.observable(0),a.DateOfPrice=ko.observable(""),a.ModalPrice=ko.observable(0),a.Distance=ko.observable(0),a.Logo=ko.observable(""),a.Savings=ko.observable(0),a.Ranking=ko.observable(0),a.OpeningTime=ko.observable(""),a.ClosingTime=ko.observable(""),a.Fuel24Hours=ko.observable(""),a.AutomatService=ko.observable(""),a.IsOpen=ko.observable(""),a.IsOpenText=ko.observable(""),a.OpeningClosingTimeText=ko.observable(""),a.OpeningHoursText=ko.observable(""),a.PriceType=ko.observable(0),a.Enabled=ko.observable(!0)},a.PetrolPricesForm=function(){var c=this;c.currentStep=ko.observable(1),c.currentFilter=ko.observable(0),c.currentHeader=ko.observable(0),c.currentRadiusSearch=ko.observable(0),c.currentLogin=ko.observable(0),c.currentNotificationBar=ko.observable(0),c.currentNoPrices=ko.observable(0),c.currentPriceListError=ko.observable(0),c.currentNotificationPanel=ko.observable(0),c.FuelType=ko.observable(""),c.Radius=ko.observable(""),c.Postcode=ko.observable(""),c.PostcodeLatitude=ko.observable(0),c.PostcodeLongitude=ko.observable(0),c.Prices=new ko.observableArray,c.DirectionsMap="",c.DirectionsRenderer="",c.PetrolHighest=ko.observable(a.Constants.PriceStatisticDefaultValue),c.PetrolLowest=ko.observable(a.Constants.PriceStatisticDefaultValue),c.PetrolAverage=ko.observable(a.Constants.PriceStatisticDefaultValue),c.PetrolLastUpdated=ko.observable(a.Constants.PriceStatisticDefaultValue),c.DieselHighest=ko.observable(a.Constants.PriceStatisticDefaultValue),c.DieselLowest=ko.observable(a.Constants.PriceStatisticDefaultValue),c.DieselAverage=ko.observable(a.Constants.PriceStatisticDefaultValue),c.DieselLastUpdated=ko.observable(a.Constants.PriceStatisticDefaultValue),c.ModalOpeningHoursText=ko.observable(""),c.ModalOpeningHoursAutomatService=ko.observable(!1),c.NumberOfPricesWithin5Miles=ko.observable(0),c.NumberOfPricesWithin10Miles=ko.observable(0),c.NumberOfPricesWithin25Miles=ko.observable(0),c.IsAuthenticatedUser=ko.observable(!1),c.IsSearching=ko.observable(!1),c.Initialise=function(){
ko.applyBindings(c,document.getElementById("main")),c.initOnPageLoad()},c.getPrices=function(d){CONFUSEDPETROLPRICES.isSafariOnMac()&&c.Postcode(b(a.Elements.SFPostcode).val());var e=c.FuelType(),f=c.Radius(),g=c.Postcode(),h=c.PostcodeLatitude(),i=c.PostcodeLongitude();!1!==CONFUSEDPETROLPRICES.validateSearchForm(e,f,g,h,i)&&(b(a.Elements.RSFuelTypeDefaultOption).remove(),CONFUSEDPETROLPRICES.searchFormToPrices(),c.GetPriceList(e,f,g,h,i,d))},c.useCurrentLocation=function(){function d(d){CONFUSEDPETROLPRICES.Utils.WriteNewRelicPageEvent("CurrentPosition");var e=b(a.Elements.DirectionsApiLink);if(0===e.length)return void c.handleCurrentLocationFault(a.Constants.CurrentLocationError);var f=e.val();f?b.ajax({type:"GET",url:f,dataType:"script",cache:!0,success:function(){b(a.Elements.DirectionsApiLink).val(""),c.obtainCurrentLocationAddress(d.coords.latitude,d.coords.longitude)}}):c.obtainCurrentLocationAddress(d.coords.latitude,d.coords.longitude)}function e(){CONFUSEDPETROLPRICES.Utils.WriteNewRelicPageEvent("CurrentPositionFailed"),c.Postcode()!==a.Constants.MyLocation&&c.handleCurrentLocationFault(a.Constants.CurrentLocationError)}return navigator.geolocation?navigator.geolocation.getCurrentPosition(d,e,{timeout:5e3,enableHighAccuracy:!0,maximumAge:0}):(CONFUSEDPETROLPRICES.Utils.WriteNewRelicPageEvent("CurrentPositionUnavailable"),c.handleCurrentLocationFault(a.Constants.CurrentLocationUnavailable)),!1},c.obtainCurrentLocationAddress=function(d,e){(new google.maps.Geocoder).geocode({location:{lat:parseFloat(d),lng:parseFloat(e)}},function(f,g){var h=null;"OK"===g&&f[0]&&b.each(f,function(){var a=this;if(null!==a.address_components&&void 0!==a.address_components&&b.each(a.address_components,function(){if(this.types[0]&&"postal_code"===this.types[0]&&this.types[0].replace(/\s/g,"").length>4)return h=this.short_name,!1}),null!==h)return!1}),null!==h?(c.Postcode(h),CONFUSEDPETROLPRICES.submitPageEvent({EventType:"petrolprices:currentlocation:geocoder",EventInfo:{Status:"Postcode retrieved: "+h}}),CONFUSEDPETROLPRICES.Utils.WriteNewRelicPageEvent("GeocoderPostcodeRetrieved")):(c.Postcode(a.Constants.MyLocation),c.PostcodeLatitude(d),c.PostcodeLongitude(e),CONFUSEDPETROLPRICES.submitPageEvent({EventType:"petrolprices:currentlocation:geocoder",EventInfo:{Status:"Postcode not retrieved"}}),CONFUSEDPETROLPRICES.Utils.WriteNewRelicPageEvent("GeocoderPostcodeNotRetrieved")),b(a.Elements.SFPostcodeError).html(""),b(a.Elements.SFPostcodeError).hide(),b(a.Elements.RSPostcodeError).html(""),b(a.Elements.RSPostcodeError).hide()})},c.handleCurrentLocationFault=function(d){1===c.currentStep()?(b(a.Elements.SFPostcodeError).html(d),b(a.Elements.SFPostcodeError).show()):(b(a.Elements.RSPostcodeError).html(d),b(a.Elements.RSPostcodeError).show())},c.getPricesByRadius=function(d){CONFUSEDPETROLPRICES.isSafariOnMac()&&c.Postcode(b(a.Elements.RSPostcode).val());var e=c.FuelType(),f=c.Radius(),g=c.Postcode(),h=c.PostcodeLatitude(),i=c.PostcodeLongitude();return!1!==CONFUSEDPETROLPRICES.validateRadiusSearch(e,f,g,h,i)&&(c.GetPriceList(e,f,g,h,i,d),!1)},c.getDomain=function(){if(void 0===c._getDomain){for(var a=window.location.hostname.split("."),b="",d=1;d<a.length;d++)b=b.concat("."+a[d]);c._getDomain=b}return c._getDomain},c.GetPriceList=function(d,e,f,g,h,i){var j=0;if(!1===c.IsAuthenticatedUser())if(Confused.CookieManager.prototype.hasItem(a.Constants.AuthPromptCookieName)){var k=Confused.CookieManager.prototype.getItem(a.Constants.AuthPromptCookieName);j=k.split(",")[0]}else Confused.CookieManager.prototype.setItem(a.Constants.AuthPromptCookieName,"0,,",null,"/",c.getDomain());f!==a.Constants.MyLocation&&(g=null,h=null),CONFUSEDPETROLPRICES.hideResultsPanelBorder(),CONFUSEDPETROLPRICES.openingHoursModalCloseClick(),CONFUSEDPETROLPRICES.disablePostcodeError(),c.currentStep(8),c.IsSearching()||(c.IsSearching(!0),b.ajax({url:"/api/petrolv2/petrolprices/GetPriceList",data:ko.toJSON({FuelType:d,Radius:e,Postcode:f,PostcodeLatitude:g,PostcodeLongitude:h,UnauthenticatedUserPricesNumberOfRequests:j,RequestSource:i}),type:"POST",contentType:"text/json",success:function(a){c.IsSearching(!1),c.handleRetrievedPriceList(a)},error:function(){c.IsSearching(!1),c.handleRetrievedPriceListError()},timeout:2e4}))},c.GetPriceStatistics=function(){b.ajax({url:"/api/petrolv2/petrolprices/GetPriceStatistics",data:ko.toJSON({}),type:"POST",contentType:"text/json",success:function(b){null!=b&&null!=b.PetrolLastUpdated&&(c.PetrolHighest(a.Utils.FormatPriceStatistic(b.PetrolHighest)),c.PetrolLowest(a.Utils.FormatPriceStatistic(b.PetrolLowest)),c.PetrolAverage(a.Utils.FormatPriceStatistic(b.PetrolAverage)),c.PetrolLastUpdated(a.Utils.FormatPriceStatistic(b.PetrolLastUpdated)),c.DieselHighest(a.Utils.FormatPriceStatistic(b.DieselHighest)),c.DieselLowest(a.Utils.FormatPriceStatistic(b.DieselLowest)),c.DieselAverage(a.Utils.FormatPriceStatistic(b.DieselAverage)),c.DieselLastUpdated(a.Utils.FormatPriceStatistic(b.DieselLastUpdated)),c.IsAuthenticatedUser(b.IsAuthenticatedUser))},error:function(){},timeout:2e4})},c.handleRetrievedPriceList=function(d){if(!1===d.result)return void c.handleRetrievedPriceListError();if(c.IsAuthenticatedUser(d.IsAuthenticatedUser),c.PostcodeLatitude(d.PostcodeLatitude),c.PostcodeLongitude(d.PostcodeLongitude),c.NumberOfPricesWithin5Miles(d.NumberOfPricesWithin5Miles),c.NumberOfPricesWithin10Miles(d.NumberOfPricesWithin10Miles),c.NumberOfPricesWithin25Miles(d.NumberOfPricesWithin25Miles),b(a.Elements.IsOpenFilter).attr("checked",!1),c.IsAuthenticatedUser())Confused.CookieManager.prototype.hasItem(a.Constants.AuthPromptCookieName)&&Confused.CookieManager.prototype.removeItem(a.Constants.AuthPromptCookieName,"/",c.getDomain()),!0===d.IsAuthenticatedUserPricesRequestsCapped?(c.currentFilter(0),c.currentHeader(3),c.currentNotificationBar(1),c.currentStep(7),c.currentNotificationPanel(1),c.showingNumberOfPrices(0)):0===d.PostcodeLatitude||0===d.PostcodeLongitude?(c.currentFilter(0),c.currentHeader(1),c.currentRadiusSearch(1),c.currentStep(7),c.currentNotificationPanel(4),c.showingNumberOfPrices(0)):jQuery.isEmptyObject(d.JsonViewPrices)?(c.currentFilter(0),c.currentHeader(1),c.currentRadiusSearch(1),c.currentStep(4),c.currentNoPrices(1),c.showingNumberOfPrices(0)):0===d.AuthenticatedUserPricesRequestsRemaining?(c.currentFilter(1),c.currentHeader(3),c.currentNotificationBar(2),c.currentStep(2),c.handleRetrievedPrices(d.JsonViewPrices)):(c.currentFilter(1),c.currentHeader(1),c.currentRadiusSearch(1),c.currentStep(2),c.handleRetrievedPrices(d.JsonViewPrices),c.showingNumberOfPrices(c.countNumberOfPricesExcludingMock()));else if(c.currentHeader(2),!0===d.IsUnauthenticatedUserPricesRequestsCapped)c.currentLogin(1),c.currentStep(7),c.currentNotificationPanel(2);else if(0===d.PostcodeLatitude||0===d.PostcodeLongitude)c.currentLogin(4),c.currentStep(7),c.currentNotificationPanel(5);else if(jQuery.isEmptyObject(d.JsonViewPrices))c.currentLogin(3),c.currentStep(4),c.currentNoPrices(2);else{var e=0;if(Confused.CookieManager.prototype.hasItem(a.Constants.AuthPromptCookieName)){var f=Confused.CookieManager.prototype.getItem(a.Constants.AuthPromptCookieName);e=parseInt(f.split(",")[0])}e++;var g=e+","+c.FuelType()+","+c.Postcode();Confused.CookieManager.prototype.setItem(a.Constants.AuthPromptCookieName,g,null,"/",c.getDomain()),c.currentLogin(1),c.currentStep(2),c.handleRetrievedPrices(d.JsonViewPrices)}},c.handleRetrievedPriceListError=function(){c.IsAuthenticatedUser()?(c.currentFilter(0),c.currentHeader(1),c.currentRadiusSearch(1),c.currentStep(5),c.currentPriceListError(1),c.showingNumberOfPrices(0)):(c.currentHeader(2),c.currentLogin(2),c.currentStep(5),c.currentPriceListError(2))},c.handleRetrievedPrices=function(d){CONFUSEDPETROLPRICES.showResultsPanelBorder(),c.Prices.removeAll(),b.each(d,function(d,e){if(!1!==e){var f=new a.Price,g=b.parseJSON(e);a.Utils.BindPrice(f,g),c.Prices.push(f)}}),c.sortPricesByCheapest(),CONFUSEDPETROLPRICES.scrollablePricesOnRender(c.countNumberOfPrices())},c.getDirections=function(d,e){var f=b(a.Elements.DirectionsApiLink);if(0!==f.length){var g=f.val();g?b.ajax({type:"GET",url:g,dataType:"script",cache:!0,success:function(){b(a.Elements.DirectionsApiLink).val(""),c.handleDirections(d,e)}}):c.handleDirections(d,e)}},c.handleDirections=function(a,d){b.ajax({url:"/api/petrolv2/petrolprices/IsDirectionsEnabled",data:ko.toJSON({}),type:"POST",contentType:"text/json",success:function(b){if(!1===b.result)return void c.handleRetrievedDirectionsError();b.IsEnabled?(CONFUSEDPETROLPRICES.pricesFormToDirections(),""===c.DirectionsMap&&(c.DirectionsMap=CONFUSEDPETROLPRICES.initDirectionsMap()),""===c.DirectionsRenderer&&(c.DirectionsRenderer=CONFUSEDPETROLPRICES.initDirectionsRenderer()),CONFUSEDPETROLPRICES.renderDirections(c.PostcodeLatitude(),c.PostcodeLongitude(),a(),d(),c.DirectionsMap,c.DirectionsRenderer),c.currentFilter(0),c.currentRadiusSearch(2),c.currentStep(3)):(c.currentFilter(0),c.currentRadiusSearch(2),c.currentStep(7),c.currentNotificationPanel(3))},error:function(){c.handleRetrievedDirectionsError()},timeout:2e4})},c.handleRetrievedDirectionsError=function(){c.currentFilter(0),c.currentRadiusSearch(2),c.currentStep(6)},c.getTabbedDirections=function(b,d){var e,f,g="saddr="+c.PostcodeLatitude()+","+c.PostcodeLongitude()+"&daddr="+b()+","+d();-1!==navigator.platform.indexOf(a.Constants.IPhone)||-1!==navigator.platform.indexOf(a.Constants.IPod)||-1!==navigator.platform.indexOf(a.Constants.IPad)?(f=a.Constants.AppleMaps+g,e=window.open(f,"_system")):-1!==navigator.platform.indexOf(a.Constants.Android)?(f=a.Constants.AndroidMaps+g,e=window.open(f)):(f=a.Constants.HttpsMaps+g,e=window.open(f,"_blank")),e?(CONFUSEDPETROLPRICES.submitPageEvent({EventType:"petrolprices:tabbeddirections:permitted",EventInfo:{MapsUrl:f}}),e.focus()):CONFUSEDPETROLPRICES.submitPageEvent({EventType:"petrolprices:tabbeddirections:notpermitted",EventInfo:{MapsUrl:f}})},c.showOpeningHours=function(a,b){c.ModalOpeningHoursText(a()),c.ModalOpeningHoursAutomatService(b),CONFUSEDPETROLPRICES.openingHoursLinkClick(),CONFUSEDPETROLPRICES.submitPageEvent({EventType:"petrolprices:openinghours:show",EventInfo:{}})},c.closeOpeningHours=function(){c.ModalOpeningHoursText(""),c.ModalOpeningHoursAutomatService(!1),CONFUSEDPETROLPRICES.openingHoursModalCloseClick()},c.sortPricesByCheapest=function(){a.Utils.SortPricesByDistance(c),a.Utils.SortPricesByCheapest(c),b(a.Elements.SortPricesByCheapest).addClass(a.Classes.ResultsFilterActive),b(a.Elements.SortPricesByDistance).removeClass(a.Classes.ResultsFilterActive)},c.sortPricesByDistance=function(){a.Utils.SortPricesByCheapest(c),a.Utils.SortPricesByDistance(c),b(a.Elements.SortPricesByDistance).addClass(a.Classes.ResultsFilterActive),b(a.Elements.SortPricesByCheapest).removeClass(a.Classes.ResultsFilterActive)},c.countNumberOfPrices=function(){var a=0;return b.each(c.Prices(),function(b,c){c.Enabled()&&a++}),a},c.countNumberOfPricesExcludingMock=function(){var d=0;return b.each(c.Prices(),function(b,c){c.Enabled()&&c.PriceType()!==a.Constants.PriceTypeMock&&d++}),d},c.showingNumberOfPrices=function(c){var d=b(a.Elements.ShowingNumberOfPricesTokenized).val(),e=d.replace(a.Tokens.NumberOfPrices,c);1===c&&(e=e.replace(a.Constants.Stations,a.Constants.Station)),b(a.Elements.ShowingNumberOfPrices).text(e)},c.handleAuthPromptCookie=function(){var b=null,d=null;if(Confused.CookieManager.prototype.hasItem(a.Constants.AuthPromptCookieName)){var e=Confused.CookieManager.prototype.getItem(a.Constants.AuthPromptCookieName);b=parseInt(e.split(",")[1]),d=e.split(",")[2]}null!=b&&""!==b&&null!=d&&""!==d&&d!==a.Constants.MyLocation&&(c.FuelType(b),c.Postcode(d),c.getPrices(a.Constants.RequestSourceAutoSearch))},c.directionsBackToPrices=function(){c.currentStep(2),c.currentFilter(1),c.currentRadiusSearch(1),CONFUSEDPETROLPRICES.directionsFormToPrices()},c.pricesBackToSearch=function(){c.currentHeader(0),c.currentStep(1),CONFUSEDPETROLPRICES.pricesFormToSearch()},c.showMoreResults=function(){var b=parseInt(c.Radius());b===a.Constants.Radius5Miles&&c.NumberOfPricesWithin10Miles()>c.NumberOfPricesWithin5Miles()?c.Radius(a.Constants.Radius10Miles):b===a.Constants.Radius5Miles&&c.NumberOfPricesWithin25Miles()>c.NumberOfPricesWithin5Miles()?c.Radius(a.Constants.Radius25Miles):b===a.Constants.Radius10Miles&&c.NumberOfPricesWithin25Miles()>c.NumberOfPricesWithin10Miles()&&c.Radius(a.Constants.Radius25Miles),c.getPricesByRadius(a.Constants.RequestSourceShowMoreResults)},c.bindEvents=function(){b(a.Elements.IsOpenFilter).change(function(){var a=b(this).is(":checked");a?b.each(c.Prices(),function(a,b){!1===b.IsOpen()&&b.Enabled(!1)}):b.each(c.Prices(),function(a,b){b.Enabled(!0)}),c.showingNumberOfPrices(c.countNumberOfPricesExcludingMock()),CONFUSEDPETROLPRICES.scrollablePricesOnRender(c.countNumberOfPrices()),CONFUSEDPETROLPRICES.submitPageEvent({EventType:"petrolprices:filter:filterpricesbyisopen",EventInfo:{FilterOn:a}})}),b("input[type=radio][name=sfFuelType]").change(function(){CONFUSEDPETROLPRICES.showSearchFormPostcodeSection()})},c.initOnPageLoad=function(){setTimeout(function(){c.GetPriceStatistics(),CONFUSEDPETROLPRICES.initEventDecorator(),c.bindEvents(),CONFUSEDPETROLPRICES.bindValidation(),CONFUSEDPETROLPRICES.initTooltips(),CONFUSEDPETROLPRICES.initOpeningHours(),CONFUSEDPETROLPRICES.initInternetExplorer(),CONFUSEDPETROLPRICES.initSafariOnMac(),c.Radius(b(a.Elements.SFRadius).val()),c.handleAuthPromptCookie()},200)},b(a.Elements.ScrollPricesRightLink).click(function(a){CONFUSEDPETROLPRICES.scrollablePricesOnRightClick(a)}),b(a.Elements.ScrollPricesLeftLink).click(function(a){CONFUSEDPETROLPRICES.scrollablePricesOnLeftClick(a)}),b(a.Elements.SFPostcode).keyup(function(b){13===b.keyCode&&c.getPrices(a.Constants.RequestSourceSearchForm)}),b(a.Elements.RSPostcode).keyup(function(b){13===b.keyCode&&c.getPricesByRadius(a.Constants.RequestSourceResultsForm)}),b(window).resize(function(){CONFUSEDPETROLPRICES.scrollablePricesOnRender(c.countNumberOfPrices())})},b(a.Elements.PetrolPriceCalculator).length>0){(new CONFUSEDPETROLPRICES.PetrolPricesForm).Initialise()}}(CONFUSEDPETROLPRICES,jQuery);var CONFUSEDCMS=CONFUSEDCMS||{},CONFUSEDPETROLPRICES=CONFUSEDPETROLPRICES||{};CONFUSEDPETROLPRICES.Maps=CONFUSEDPETROLPRICES.Maps||{},function(a,b){"use strict";CONFUSEDPETROLPRICES.initDirectionsMap=function(){return new google.maps.Map(document.getElementById("map"))},CONFUSEDPETROLPRICES.initDirectionsRenderer=function(){return new google.maps.DirectionsRenderer},CONFUSEDPETROLPRICES.renderDirections=function(a,b,c,d,e,f){var g={lat:a,lng:b},h={lat:c,lng:d};e.setOptions({zoom:7,center:g}),f.setMap(e),f.setPanel(document.getElementById("directionsPanel")),(new google.maps.DirectionsService).route({origin:g,destination:h,travelMode:google.maps.TravelMode.DRIVING,provideRouteAlternatives:!0,unitSystem:google.maps.UnitSystem.IMPERIAL},function(a,b){b===google.maps.DirectionsStatus.OK?(CONFUSEDPETROLPRICES.submitPageEvent({EventType:"petrolprices:directions:permitted",EventInfo:{Status:b}}),f.setDirections(a)):CONFUSEDPETROLPRICES.submitPageEvent({EventType:"petrolprices:directions:notpermitted",EventInfo:{Status:b}})})}}(CONFUSEDPETROLPRICES.Maps,jQuery);var CONFUSEDCMS=CONFUSEDCMS||{},CONFUSEDPETROLPRICES=CONFUSEDPETROLPRICES||{};CONFUSEDPETROLPRICES.MiEvents=CONFUSEDPETROLPRICES.MiEvents||{},function(a,b){"use strict";CONFUSEDPETROLPRICES.initEventDecorator=function(){var a=CONFUSEDCMS.eventDecorator,b={miPageEvent:"CONFUSEDCMS.eventDecorator.events.miPageEvent"};a.EventDefinitionList.Add(new a.EventDefinition("#sortPricesByCheapest","click",b.miPageEvent,[{EventType:"petrolprices:filter:sortpricesbycheapest",EventInfo:{Control:"petrol-prices-filter"}}])),a.EventDefinitionList.Add(new a.EventDefinition("#sortPricesByDistance","click",b.miPageEvent,[{EventType:"petrolprices:filter:sortpricesbydistance",EventInfo:{Control:"petrol-prices-filter"}}])),a.EventDefinitionList.Add(new a.EventDefinition("#closeMap","click",b.miPageEvent,[{EventType:"petrolprices:directions:hide",EventInfo:{Control:"petrol-prices-directions"}}])),a.EventDefinitionList.Add(new a.EventDefinition("#petrolPricesLoginButton","click",b.miPageEvent,[{EventType:"petrolprices:login:clicked",EventInfo:{Control:"petrol-prices-login"}}])),a.EventDefinitionList.Add(new a.EventDefinition("#petrolPricesRegisterButton","click",b.miPageEvent,[{EventType:"petrolprices:register:clicked",EventInfo:{Control:"petrol-prices-login"}}])),a.EventDefinitionList.ProcessAll()},CONFUSEDPETROLPRICES.submitPageEvent=function(a){CONFUSEDCMS.services.MiService().pageEvent(a)}}(CONFUSEDPETROLPRICES.MiEvents,jQuery);var CONFUSEDCMS=CONFUSEDCMS||{},CONFUSEDPETROLPRICES=CONFUSEDPETROLPRICES||{};CONFUSEDPETROLPRICES.UiElements=CONFUSEDPETROLPRICES.UiElements||{},function(a,b){"use strict";a.Elements={SFFuelFinderLandingPanel:".petrol-price-calculator__landing-panel",PRFuelFinderResultsPanel:".petrol-price-calculator__results-panel",ScrollLeftLink:".petrol-price-results__link--left",ScrollRightLink:".petrol-price-results__link--right",ScrollRightBodyMarker:".scroll-end-marker--body",ResultsUl:".petrol-price-results",ResultsUlItems:".petrol-price-results > li",ResultsFill:".results-fill",PetrolPriceResultsResult:".petrol-price-results__result",ScrollEndMarkerResult:".scroll-end-marker--result",OpeningHoursModal:".opening-times-modal",Dimmer:".dimmer",ResultsPanelBody:"#resultsPanelBody",TooltipToggle:".tooltip-toggle",TooltipWrapper:".tooltip-wrapper",TooltipInfo:".tooltip-info",TooltipInfoDismiss:".tooltip-info__dismiss",ResultSectionAddress:".petrol-price-results__result__section__address",ResultSectionLoggedOut:".petrol-price-results__result__section--logged-out",RSCurrentLocationTooltipWrapper:"#rsCurrentLocationTooltipWrapper",RSPostcodeError:"#rsPostcodeError",RSFuelType:"#rsFuelType",RSRadius:"#rsRadius",SFPostcodeWrapper:".postcode-wrapper",SFGetPrices:"#sfGetPrices",SFLandingPanelMainPostcode:".petrol-price-calculator__landing-panel__main__postcode",CheapestRibbon:".cheapest-ribbon",SortPricesByDistance:"#sortPricesByDistance"},a.Classes={ResultsPanelBodyBorder:"petrol-price-calculator__results-panel__body_border",OpeningHoursLinkClicked:"opening-hours-link-clicked"},a.Constants={Left:"left",MarginLeft:"margin-left",MarginRight:"margin-right",MarginTop:"margin-top",MarginBottom:"margin-bottom",Pixel:"px",Height:"height",Open:"open",Visible:":visible",MaxWidth:"max-width",Border:"border",Disabled:"disabled",MsIe:"MSIE ",MsIe11:"Trident/",Macintosh:"Macintosh ",Safari:"Safari",Chrome:"Chrome",IPad:"iPad",IPod:"iPod",IPhone:"iPhone",ResultWidth:240},a.Utils={ClearAddressHeight:function(){b(a.Elements.ResultsUlItems).each(function(){b(this).find(a.Elements.ResultSectionAddress).css(a.Constants.Height,"")})},ClearPriceListHeight:function(){var c=b(a.Elements.ResultsUlItems);c.each(function(){b(this).css(a.Constants.Height,"")}),c.each(function(){b(this).find(a.Elements.ResultSectionLoggedOut).css(a.Constants.Height,"")}),b(a.Elements.ResultsFill).css(a.Constants.Height,""),b(a.Elements.ResultsUl).css(a.Constants.Height,""),b(a.Elements.ResultsPanelBody).css(a.Constants.Height,""),b(a.Elements.Dimmer).css(a.Constants.Height,"")},SetAddressHeight:function(){var c=b(a.Elements.ResultsUlItems),d=0;c.each(function(){var c=b(this).find(a.Elements.ResultSectionAddress).outerHeight();c>d&&(d=c)}),0!==d&&c.each(function(){b(this).find(a.Elements.ResultSectionAddress).css(a.Constants.Height,d)})},SetPriceListHeight:function(){var c=b(a.Elements.ResultsUlItems),d=0;if(c.each(function(){var a=b(this).outerHeight();a>d&&(d=a)}),0!==d){c.each(function(){b(this).css(a.Constants.Height,d)});var e;e=b(window).width()>900?d-139:d-119,c.each(function(){b(this).find(a.Elements.ResultSectionLoggedOut).css(a.Constants.Height,e)}),b(a.Elements.ResultsFill).css(a.Constants.Height,d),b(a.Elements.ResultsUl).css(a.Constants.Height,d+1),b(window).width()>600?b(a.Elements.ResultsPanelBody).css(a.Constants.Height,d+1):b(a.Elements.ResultsPanelBody).css(a.Constants.Height,d+21),b(a.Elements.Dimmer).css(a.Constants.Height,d+1)}}},CONFUSEDPETROLPRICES.searchFormToPrices=function(){b(a.Elements.SFFuelFinderLandingPanel).hide(),b(a.Elements.PRFuelFinderResultsPanel).show()},CONFUSEDPETROLPRICES.pricesFormToDirections=function(){a.Utils.ClearPriceListHeight(),CONFUSEDPETROLPRICES.hideResultsPanelBorder()},CONFUSEDPETROLPRICES.directionsFormToPrices=function(){a.Utils.SetPriceListHeight(),CONFUSEDPETROLPRICES.showResultsPanelBorder()},CONFUSEDPETROLPRICES.pricesFormToSearch=function(){b(a.Elements.PRFuelFinderResultsPanel).hide(),b(a.Elements.SFFuelFinderLandingPanel).show()},CONFUSEDPETROLPRICES.scrollablePricesOnRender=function(c){a.Utils.ClearAddressHeight(),a.Utils.ClearPriceListHeight();var d=b(a.Elements.PetrolPriceResultsResult).width()+2,e=d*c,f=d*(c-1);b(window).width()>583?(b(a.Elements.ResultsUl).width(f),b(a.Elements.ResultsUl).css(a.Constants.MarginLeft,a.Constants.ResultWidth),b(a.Elements.PRFuelFinderResultsPanel).width()>e?b(a.Elements.ScrollRightLink).hide():b(a.Elements.ScrollRightLink).show(),b(a.Elements.ScrollLeftLink).hide()):(b(a.Elements.ResultsUl).width(e),b(a.Elements.ResultsUl).css(a.Constants.MarginLeft,0),b(a.Elements.ScrollLeftLink).hide(),b(a.Elements.ScrollRightLink).hide()),a.Utils.SetAddressHeight(),a.Utils.SetPriceListHeight(),CONFUSEDPETROLPRICES.HandleCheapestRibbonOnTimeout()},CONFUSEDPETROLPRICES.scrollablePricesOnRightClick=function(c){if(c.preventDefault(),!b(a.Elements.ScrollRightLink).prop(a.Constants.Disabled)){b(a.Elements.ScrollRightLink).prop(a.Constants.Disabled,!0);var d=b(a.Elements.ResultsUl).css(a.Constants.MarginLeft).replace(a.Constants.Pixel,""),e=b(a.Elements.ScrollEndMarkerResult).offset(),f=b(a.Elements.ScrollRightBodyMarker).offset(),g=parseInt(d)-a.Constants.ResultWidth;e.left>f.left?(b(a.Elements.ResultsUl).css(a.Constants.MarginLeft,g+a.Constants.Pixel),CONFUSEDPETROLPRICES.HandleCheapestRibbon(240)):b(a.Elements.ScrollRightLink).fadeOut(300),b(a.Elements.ScrollLeftLink).fadeIn(300),setTimeout(function(){b(a.Elements.ScrollRightLink).prop(a.Constants.Disabled,!1)},300)}},CONFUSEDPETROLPRICES.scrollablePricesOnLeftClick=function(c){if(c.preventDefault(),!b(a.Elements.ScrollLeftLink).prop(a.Constants.Disabled)){b(a.Elements.ScrollLeftLink).prop(a.Constants.Disabled,!0);var d=b(a.Elements.ResultsUl).css(a.Constants.MarginLeft).replace(a.Constants.Pixel,""),e=parseInt(d)+a.Constants.ResultWidth,f=0;b(window).width()>583&&(f=a.Constants.ResultWidth,e>=a.Constants.ResultWidth&&b(a.Elements.ScrollLeftLink).fadeOut(300)),parseInt(d)<f&&(e>a.Constants.ResultWidth&&(e=a.Constants.ResultWidth),b(a.Elements.ResultsUl).css(a.Constants.MarginLeft,e+a.Constants.Pixel),b(a.Elements.ScrollRightLink).fadeIn(300)),setTimeout(function(){b(a.Elements.ScrollLeftLink).prop(a.Constants.Disabled,!1)},300),CONFUSEDPETROLPRICES.HandleCheapestRibbonOnTimeout()}},CONFUSEDPETROLPRICES.HandleCheapestRibbonOnTimeout=function(){setTimeout(function(){CONFUSEDPETROLPRICES.HandleCheapestRibbon(0)},400)},CONFUSEDPETROLPRICES.HandleCheapestRibbon=function(c){b(window).width()<=583||!1===b(a.Elements.SortPricesByDistance).hasClass("results-filter--active")||b(b(a.Elements.PetrolPriceResultsResult).first()[0]).find(a.Elements.CheapestRibbon).length>0?b(a.Elements.PetrolPriceResultsResult).each(function(){b(this).find(a.Elements.CheapestRibbon).show()}):b(a.Elements.PetrolPriceResultsResult).each(function(d){b(this).position().left<=c&&0!==d?b(this).find(a.Elements.CheapestRibbon).hide():b(this).find(a.Elements.CheapestRibbon).show()})},CONFUSEDPETROLPRICES.openingHoursLinkClick=function(){if(b(window).width()<=600){var c=b(a.Elements.ResultsPanelBody).scrollLeft()+40;b(a.Elements.OpeningHoursModal).css(a.Constants.Left,c+a.Constants.Pixel)}var d=b(a.Elements.PRFuelFinderResultsPanel).width();d>b(a.Elements.ResultsUl).width()+a.Constants.ResultWidth?b(a.Elements.Dimmer).width(d):b(a.Elements.Dimmer).width("150%"),b(a.Elements.OpeningHoursModal).fadeIn(300),b(a.Elements.Dimmer).fadeIn(300),b(a.Elements.OpeningHoursModal).addClass(a.Classes.OpeningHoursLinkClicked)},CONFUSEDPETROLPRICES.openingHoursModalCloseClick=function(){b(a.Elements.OpeningHoursModal).fadeOut(300),b(a.Elements.Dimmer).fadeOut(300)},CONFUSEDPETROLPRICES.showResultsPanelBorder=function(){b(a.Elements.ResultsPanelBody).addClass(a.Classes.ResultsPanelBodyBorder)},CONFUSEDPETROLPRICES.hideResultsPanelBorder=function(){b(a.Elements.ResultsPanelBody).removeClass(a.Classes.ResultsPanelBodyBorder)},CONFUSEDPETROLPRICES.initTooltips=function(){b(a.Elements.TooltipToggle).click(function(c){b(this).hasClass(a.Constants.Open)?(b(this).closest(a.Elements.TooltipWrapper).find(a.Elements.TooltipInfo).fadeOut(),b(this).removeClass(a.Constants.Open)):(b(a.Elements.TooltipToggle).removeClass(a.Constants.Open),b(a.Elements.TooltipInfo).fadeOut(),b(this).closest(a.Elements.TooltipWrapper).find(a.Elements.TooltipInfo).fadeIn(),b(this).addClass(a.Constants.Open)),c.preventDefault()}),b(a.Elements.TooltipInfoDismiss).click(function(c){b(this).closest(a.Elements.TooltipInfo).fadeOut(),b(a.Elements.TooltipToggle).removeClass(a.Constants.Open),c.preventDefault()})},CONFUSEDPETROLPRICES.initOpeningHours=function(){b(a.Elements.ResultsUl).click(function(){var c=b(a.Elements.OpeningHoursModal).hasClass(a.Classes.OpeningHoursLinkClicked);b(a.Elements.Dimmer).is(a.Constants.Visible)&&!1===c?CONFUSEDPETROLPRICES.openingHoursModalCloseClick():c&&b(a.Elements.OpeningHoursModal).removeClass(a.Classes.OpeningHoursLinkClicked)})},CONFUSEDPETROLPRICES.showSearchFormPostcodeSection=function(){b(a.Elements.SFLandingPanelMainPostcode).fadeIn()},CONFUSEDPETROLPRICES.initInternetExplorer=function(){CONFUSEDPETROLPRICES.isInternetExplorer()&&(b(a.Elements.SFPostcodeWrapper).css(a.Constants.MaxWidth,300),b(a.Elements.SFGetPrices).css(a.Constants.MaxWidth,250),b(a.Elements.RSCurrentLocationTooltipWrapper).css(a.Constants.MarginLeft,-250),b(a.Elements.RSCurrentLocationTooltipWrapper).css(a.Constants.MarginTop,50),b(a.Elements.RSPostcodeError).css(a.Constants.MarginBottom,-40))},CONFUSEDPETROLPRICES.initSafariOnMac=function(){CONFUSEDPETROLPRICES.isSafariOnMac()&&(b(a.Elements.SFLandingPanelMainPostcode).css(a.Constants.MarginLeft,"28%"),b(a.Elements.SFLandingPanelMainPostcode).css(a.Constants.MarginRight,"28%"),b(a.Elements.RSFuelType).css(a.Constants.Border,1),b(a.Elements.RSFuelType).css(a.Constants.MarginTop,10),b(a.Elements.RSRadius).css(a.Constants.Border,1),b(a.Elements.RSRadius).css(a.Constants.MarginTop,10))},CONFUSEDPETROLPRICES.isInternetExplorer=function(){var b=window.navigator.userAgent,c=-1!==b.indexOf(a.Constants.MsIe),d=-1!==b.indexOf(a.Constants.MsIe11);return!(!c&&!d)},CONFUSEDPETROLPRICES.isSafariOnMac=function(){var b=window.navigator.userAgent,c=-1!==b.indexOf(a.Constants.Macintosh),d=-1!==b.indexOf(a.Constants.Safari)&&-1===b.indexOf(a.Constants.Chrome),e=-1!==b.indexOf(a.Constants.IPad),f=-1!==b.indexOf(a.Constants.IPod),g=-1!==b.indexOf(a.Constants.IPhone);return!(!c&&!d||e||f||g)}}(CONFUSEDPETROLPRICES.UiElements,jQuery);var CONFUSEDCMS=CONFUSEDCMS||{},CONFUSEDPETROLPRICES=CONFUSEDPETROLPRICES||{};CONFUSEDPETROLPRICES.SearchFormValidation=CONFUSEDPETROLPRICES.SearchFormValidation||{},function(a,b){"use strict";a.Elements={SFFuelType:"input[name='sfFuelType']",SFFuelTypeSelected:"input[name='sfFuelType']:checked",SFFuelTypeError:"#sfFuelTypeError",SFRadiusError:"#sfRadiusError",SFPostcode:"#sfPostcode",SFPostcodeErrorEnabled:"#sfPostcodeErrorEnabled",SFPostcodeError:"#sfPostcodeError",RSFuelType:"#rsFuelType",RSFuelTypeSelected:"#rsFuelType option:selected",RSFuelTypeError:"#rsFuelTypeError",RSRadius:"#rsRadius",RSRadiusSelected:"#rsRadius option:selected",RSRadiusError:"#rsRadiusError",RSPostcode:"#rsPostcode",RSPostcodeErrorEnabled:"#rsPostcodeErrorEnabled",RSPostcodeError:"#rsPostcodeError"},a.ValidationConstants={FuelTypes:[1,2,4,5,6,7],Radius:[5,10,25],PostcodeRegex:"^([Gg][Ii][Rr] 0[Aa]{2})|((([A-Za-z][0-9]{1,2})|(([A-Za-z][A-Ha-hJ-Yj-y][0-9]{1,2})|(([A-Za-z][0-9][A-Za-z])|([A-Za-z][A-Ha-hJ-Yj-y][0-9]?[A-Za-z])))) {0,1}[0-9][A-Za-z]{2})$"},a.ErrorMessageConstants={FuelType:"Please select a fuel type",Radius:"Please enter a valid radius",Postcode:"Please enter a valid postcode"},a.Validation={FuelType:function(b){var c=parseInt(b,10);return!isNaN(c)&&-1!==jQuery.inArray(c,a.ValidationConstants.FuelTypes)},Radius:function(b){var c=parseInt(b,10);return!isNaN(c)&&-1!==jQuery.inArray(c,a.ValidationConstants.Radius)},Postcode:function(b){return new RegExp(a.ValidationConstants.PostcodeRegex).test(b)},MyLocation:function(a,b){return 0!==a&&0!==b}},CONFUSEDPETROLPRICES.bindValidation=function(){b(a.Elements.SFFuelType).change(function(){CONFUSEDPETROLPRICES.validateSFFuelType(b(a.Elements.SFFuelTypeSelected).val())}),b(a.Elements.SFPostcode).keyup(function(){b(a.Elements.SFPostcodeErrorEnabled).is(":checked")&&CONFUSEDPETROLPRICES.validateSFPostcode(b(a.Elements.SFPostcode).val())}),b(a.Elements.SFPostcode).blur(function(){CONFUSEDPETROLPRICES.enablePostcodeError(),CONFUSEDPETROLPRICES.validateSFPostcode(b(a.Elements.SFPostcode).val())}),b(a.Elements.RSFuelType).change(function(){CONFUSEDPETROLPRICES.validateRSFuelType(b(a.Elements.RSFuelTypeSelected).val())}),b(a.Elements.RSRadius).change(function(){CONFUSEDPETROLPRICES.validateRSRadius(b(a.Elements.RSRadiusSelected).val())}),b(a.Elements.RSPostcode).keyup(function(){b(a.Elements.RSPostcodeErrorEnabled).is(":checked")&&CONFUSEDPETROLPRICES.validateRSPostcode(b(a.Elements.RSPostcode).val())}),b(a.Elements.RSPostcode).blur(function(){CONFUSEDPETROLPRICES.enablePostcodeError(),CONFUSEDPETROLPRICES.validateRSPostcode(b(a.Elements.RSPostcode).val())})},CONFUSEDPETROLPRICES.validateSearchForm=function(a,b,c,d,e){var f,g=CONFUSEDPETROLPRICES.validateSFFuelType(a),h=CONFUSEDPETROLPRICES.validateSFRadius(b);return f=c!==CONFUSEDPETROLPRICES.Constants.MyLocation?CONFUSEDPETROLPRICES.validateSFPostcode(c):CONFUSEDPETROLPRICES.validateSFMyLocation(d,e),g&&h&&f},CONFUSEDPETROLPRICES.validateSFFuelType=function(c){return CONFUSEDPETROLPRICES.handleElementValidation(a.Validation.FuelType(c),b(a.Elements.SFFuelTypeError),a.ErrorMessageConstants.FuelType)},CONFUSEDPETROLPRICES.validateSFRadius=function(c){return CONFUSEDPETROLPRICES.handleElementValidation(a.Validation.Radius(c),b(a.Elements.SFRadiusError),a.ErrorMessageConstants.Radius)},CONFUSEDPETROLPRICES.validateSFPostcode=function(c){return CONFUSEDPETROLPRICES.handleElementValidation(a.Validation.Postcode(c),b(a.Elements.SFPostcodeError),a.ErrorMessageConstants.Postcode)},CONFUSEDPETROLPRICES.validateSFMyLocation=function(c,d){return CONFUSEDPETROLPRICES.handleElementValidation(a.Validation.MyLocation(c,d),b(a.Elements.SFPostcodeError),a.ErrorMessageConstants.Postcode)},CONFUSEDPETROLPRICES.validateRadiusSearch=function(a,b,c,d,e){var f,g=CONFUSEDPETROLPRICES.validateRSFuelType(a),h=CONFUSEDPETROLPRICES.validateRSRadius(b);return f=c!==CONFUSEDPETROLPRICES.Constants.MyLocation?CONFUSEDPETROLPRICES.validateRSPostcode(c):CONFUSEDPETROLPRICES.validateRSMyLocation(d,e),g&&h&&f},CONFUSEDPETROLPRICES.validateRSFuelType=function(c){return CONFUSEDPETROLPRICES.handleElementValidation(a.Validation.FuelType(c),b(a.Elements.RSFuelTypeError),a.ErrorMessageConstants.FuelType)},CONFUSEDPETROLPRICES.validateRSRadius=function(c){return CONFUSEDPETROLPRICES.handleElementValidation(a.Validation.Radius(c),b(a.Elements.RSRadiusError),a.ErrorMessageConstants.Radius)},CONFUSEDPETROLPRICES.validateRSPostcode=function(c){return CONFUSEDPETROLPRICES.handleElementValidation(a.Validation.Postcode(c),b(a.Elements.RSPostcodeError),a.ErrorMessageConstants.Postcode)},CONFUSEDPETROLPRICES.validateRSMyLocation=function(c,d){return CONFUSEDPETROLPRICES.handleElementValidation(a.Validation.MyLocation(c,d),b(a.Elements.RSPostcodeError),a.ErrorMessageConstants.Postcode)},CONFUSEDPETROLPRICES.handleElementValidation=function(a,b,c){return a?(b.html(""),b.hide(),!0):(b.html(c),
b.show(),!1)},CONFUSEDPETROLPRICES.enablePostcodeError=function(){b(a.Elements.SFPostcodeErrorEnabled).prop("checked",!0),b(a.Elements.RSPostcodeErrorEnabled).prop("checked",!0)},CONFUSEDPETROLPRICES.disablePostcodeError=function(){b(a.Elements.SFPostcodeErrorEnabled).prop("checked",!1),b(a.Elements.RSPostcodeErrorEnabled).prop("checked",!1)}}(CONFUSEDPETROLPRICES.SearchFormValidation,jQuery);var CONFUSEDCMS=CONFUSEDCMS||{};CONFUSEDCMS.ProductHeroCTA=CONFUSEDCMS.ProductHeroCTA||{},function(a,b){"use strict";a.Constants={CAR:0,VAN:1,BIKE:2},a.Vehicle=function(){var a=this;a.RegNumber=ko.observable(""),a.VehicleType=ko.observable("")},a.BaseUrl=function(){return b(".js-get-a-quote-btn").attr("href")},a.RegNumberLookup=function(){var c=this;c.Vehicle=new a.Vehicle,c.VehicleNotFound=ko.observable(!1),c.VanFound=ko.observable(!1),c.BikeFound=ko.observable(!1),c.ShowModalDimmer=ko.computed(function(){return c.VehicleNotFound()||c.VanFound()||c.BikeFound()?(b(".modal-dimmer").show(),!0):(b(".modal-dimmer").hide(),!1)}),c.InitialiseModule=function(){ko.applyBindings(c)},c.Reset=function(){c.VanFound(!1),c.BikeFound(!1),c.VehicleNotFound(!1)},c.EditReg=function(){c.Reset(),b(".js-get-a-quote-input").focus(),b(".js-get-a-quote-input").select()},c.Lookup=function(){var d=b(".js-get-a-quote-input").val(),e=a.BaseUrl();if(""===d)return void(window.location.href=e);c.Vehicle.VehicleType(a.Constants.CAR),c.Vehicle.RegNumber(d);var f=b(".js-get-a-quote-input").attr("data-quote-entry-url");b.ajax({url:"/api/lookupv2/vehiclelookup",contentType:"text/json",type:"POST",data:ko.toJSON({RegistrationNumber:c.Vehicle.RegNumber()}),success:function(b){switch(b){case a.Constants.CAR:return void(window.location.href=e+f+c.Vehicle.RegNumber());case a.Constants.VAN:c.VanFound(!0);break;case a.Constants.BIKE:c.BikeFound(!0);break;default:c.VehicleNotFound(!0)}},error:function(){c.VehicleNotFound(!0)}})}},a.PostcodeLookup=function(){var c=this;c.InitialiseModule=function(){ko.applyBindings(c)},c.CheckPostcode=function(a){if(a=b.trim(a),new RegExp("^([Gg][Ii][Rr] 0[Aa]{2})|((([A-Za-z][0-9]{1,2})|(([A-Za-z][A-Ha-hJ-Yj-y][0-9]{1,2})|(([A-Za-z][0-9][A-Za-z])|([A-Za-z][A-Ha-hJ-Yj-y][0-9]?[A-Za-z])))) {0,1}[0-9][A-Za-z]{2})$").test(a))return!0;if(b(".input-with-button + .error-message").length<1){b("<p/>",{text:"Please enter a valid postcode",class:"error-message"}).insertAfter(".input-with-button")}return!1},c.Lookup=function(){var d=b(".js-get-a-quote-input").val(),e=a.BaseUrl();if(""===d)return void(window.location.href=e);var f=b(".js-get-a-quote-input").attr("data-quote-entry-url");c.CheckPostcode(d)&&(window.location.href=e+f+d)}},CONFUSEDCMS.setupProductCtas=function(){if(b('input.js-get-a-quote-input[data-quote-product-id="2"]').length>0){var a=new CONFUSEDCMS.ProductHeroCTA.RegNumberLookup;a.InitialiseModule(),b("input.js-get-a-quote-input").on("keydown",function(b){13===b.keyCode&&(b.preventDefault(),a.Lookup())})}if(b('input.js-get-a-quote-input[data-quote-product-id="5"]').length>0){var c=new CONFUSEDCMS.ProductHeroCTA.PostcodeLookup;c.InitialiseModule(),b("input.js-get-a-quote-input").on("keydown",function(a){13===a.keyCode&&(a.preventDefault(),c.Lookup())})}}}(CONFUSEDCMS.ProductHeroCTA,jQuery);var CONFUSEDCMS=CONFUSEDCMS||{},CONFUSEDCARFINANCECALCULATORAPP=CONFUSEDCARFINANCECALCULATORAPP||{},Confused=Confused||{},newrelic=newrelic||{};!function(a,b,c){"use strict";if(a.Elements={ProviderLowRepresentativeExample:"#hdnProviderLowRepresentativeExample",ProviderLowTier1000To1999Percentage:"#hdnProviderLowTier1000To1999Percentage",ProviderLowTier2000To2999Percentage:"#hdnProviderLowTier2000To2999Percentage",ProviderLowTier3000To4999Percentage:"#hdnProviderLowTier3000To4999Percentage",ProviderLowTier5000To7499Percentage:"#hdnProviderLowTier5000To7499Percentage",ProviderLowTier7500To19999Percentage:"#hdnProviderLowTier7500To19999Percentage",ProviderLowTier20000To36000Percentage:"#hdnProviderLowTier20000To36000Percentage",ProviderModerateRepresentativeExample:"#hdnProviderModerateRepresentativeExample",ProviderModerateTier1000To1999Percentage:"#hdnProviderModerateTier1000To1999Percentage",ProviderModerateTier2000To2999Percentage:"#hdnProviderModerateTier2000To2999Percentage",ProviderModerateTier3000To4999Percentage:"#hdnProviderModerateTier3000To4999Percentage",ProviderModerateTier5000To7499Percentage:"#hdnProviderModerateTier5000To7499Percentage",ProviderModerateTier7500To19999Percentage:"#hdnProviderModerateTier7500To19999Percentage",ProviderModerateTier20000To36000Percentage:"#hdnProviderModerateTier20000To36000Percentage",ProviderHighRepresentativeExample:"#hdnProviderHighRepresentativeExample",ProviderHighTier1000To1999Percentage:"#hdnProviderHighTier1000To1999Percentage",ProviderHighTier2000To2999Percentage:"#hdnProviderHighTier2000To2999Percentage",ProviderHighTier3000To4999Percentage:"#hdnProviderHighTier3000To4999Percentage",ProviderHighTier5000To7499Percentage:"#hdnProviderHighTier5000To7499Percentage",ProviderHighTier7500To19999Percentage:"#hdnProviderHighTier7500To19999Percentage",ProviderHighTier20000To36000Percentage:"#hdnProviderHighTier20000To36000Percentage",CarFinanceCalculatorWidget:"#CarFinanceCalculatorWidget",CarFinanceCalculatorStartApplication:"#CarFinanceCalculatorStartApplication",CarFinanceCalculatorSpinner:"#CarFinanceCalculatorSpinner",CarFinanceCalculatorGetQuote:"#CarFinanceCalculatorGetQuote",CalculateButton:"#btnCalculate",RecalculateText:"#hdnRecalculateText",CalculateErrorHowMuch:"#CalculateErrorHowMuch",CalculateErrorHowLong:"#CalculateErrorHowLong",ProviderLowSection:"#ProviderLowSection",ProviderModerateSection:"#ProviderModerateSection",ProviderHighSection:"#ProviderHighSection",StartApplicationButton:"#btnStartApplication",GetAQuoteButton:"#btnGetAQuote",CalculationError:"#CalculationError",ProviderLowTitle:"#ProviderLowTitle",ProviderModerateTitle:"#ProviderModerateTitle",ProviderHighTitle:"#ProviderHighTitle",ProviderTitleOnMobile:"#ProviderTitleOnMobile"},a.Constants={CarFinanceCalculatorWidgetId:"CarFinanceCalculatorWidget",CalculateErrorMessageHowMuch:"Please select how much you want to borrow",CalculateErrorMessageHowLong:"Please select over how long",CarFinanceCalculatorSpinnerTimeout:1e3,CarFinanceCalculatorAppName:"CarFinanceCalculator",AprExampleTableTabActive:"apr-example-table__tab--active",ProviderLowTitleOnMobile:"ProviderLowTitleOnMobile",ProviderModerateTitleOnMobile:"ProviderModerateTitleOnMobile",ProviderHighTitleOnMobile:"ProviderHighTitleOnMobile",ProviderLow:"ProviderLow",ProviderModerate:"ProviderModerate",ProviderHigh:"ProviderHigh"},a.Tokens={HowMuch:"[HOWMUCH]",HowLong:"[HOWLONG]"},a.Utils={BindProviderLow:function(b){b.RepresentativeExample(c(a.Elements.ProviderLowRepresentativeExample).val()),b.Tier1000To1999Percentage(c(a.Elements.ProviderLowTier1000To1999Percentage).val()),b.Tier2000To2999Percentage(c(a.Elements.ProviderLowTier2000To2999Percentage).val()),b.Tier3000To4999Percentage(c(a.Elements.ProviderLowTier3000To4999Percentage).val()),b.Tier5000To7499Percentage(c(a.Elements.ProviderLowTier5000To7499Percentage).val()),b.Tier7500To19999Percentage(c(a.Elements.ProviderLowTier7500To19999Percentage).val()),b.Tier20000To36000Percentage(c(a.Elements.ProviderLowTier20000To36000Percentage).val())},BindProviderModerate:function(b){b.RepresentativeExample(c(a.Elements.ProviderModerateRepresentativeExample).val()),b.Tier1000To1999Percentage(c(a.Elements.ProviderModerateTier1000To1999Percentage).val()),b.Tier2000To2999Percentage(c(a.Elements.ProviderModerateTier2000To2999Percentage).val()),b.Tier3000To4999Percentage(c(a.Elements.ProviderModerateTier3000To4999Percentage).val()),b.Tier5000To7499Percentage(c(a.Elements.ProviderModerateTier5000To7499Percentage).val()),b.Tier7500To19999Percentage(c(a.Elements.ProviderModerateTier7500To19999Percentage).val()),b.Tier20000To36000Percentage(c(a.Elements.ProviderModerateTier20000To36000Percentage).val())},BindProviderHigh:function(b){b.RepresentativeExample(c(a.Elements.ProviderHighRepresentativeExample).val()),b.Tier1000To1999Percentage(c(a.Elements.ProviderHighTier1000To1999Percentage).val()),b.Tier2000To2999Percentage(c(a.Elements.ProviderHighTier2000To2999Percentage).val()),b.Tier3000To4999Percentage(c(a.Elements.ProviderHighTier3000To4999Percentage).val()),b.Tier5000To7499Percentage(c(a.Elements.ProviderHighTier5000To7499Percentage).val()),b.Tier7500To19999Percentage(c(a.Elements.ProviderHighTier7500To19999Percentage).val()),b.Tier20000To36000Percentage(c(a.Elements.ProviderHighTier20000To36000Percentage).val())},WriteNewRelicPageEvent:function(c,d){d=d||{},d=a.Utils.GetCustomerFromCookies(d),b&&void 0!==b.addPageAction&&b.addPageAction(CONFUSEDCARFINANCECALCULATORAPP.Constants.CarFinanceCalculatorAppName+c,d)},GetCustomerFromCookies:function(a){a=a||{};for(var b=document.cookie.split(";"),c="",d="",e=0;e<b.length;e++)-1!==b[e].indexOf("X-UniqueCustomerSessionID")&&(c=b[e].split("=")[1]),-1!==b[e].indexOf("X-UniqueCustomerCookieID")&&(d=b[e].split("=")[1]);return a.XUniqueCustomerSessionIDString=c,a.XUniqueCustomerCookieIDString=d,a},ShowProviderLowSection:function(){c(a.Elements.ProviderLowSection).show(),c(a.Elements.ProviderModerateSection).hide(),c(a.Elements.ProviderHighSection).hide(),c(a.Elements.ProviderLowTitle).addClass(a.Constants.AprExampleTableTabActive),c(a.Elements.ProviderModerateTitle).removeClass(a.Constants.AprExampleTableTabActive),c(a.Elements.ProviderHighTitle).removeClass(a.Constants.AprExampleTableTabActive)},ShowProviderModerateSection:function(){c(a.Elements.ProviderLowSection).hide(),c(a.Elements.ProviderModerateSection).show(),c(a.Elements.ProviderHighSection).hide(),c(a.Elements.ProviderLowTitle).removeClass(a.Constants.AprExampleTableTabActive),c(a.Elements.ProviderModerateTitle).addClass(a.Constants.AprExampleTableTabActive),c(a.Elements.ProviderHighTitle).removeClass(a.Constants.AprExampleTableTabActive)},ShowProviderHighSection:function(){c(a.Elements.ProviderLowSection).hide(),c(a.Elements.ProviderModerateSection).hide(),c(a.Elements.ProviderHighSection).show(),c(a.Elements.ProviderLowTitle).removeClass(a.Constants.AprExampleTableTabActive),c(a.Elements.ProviderModerateTitle).removeClass(a.Constants.AprExampleTableTabActive),c(a.Elements.ProviderHighTitle).addClass(a.Constants.AprExampleTableTabActive)},NumberWithCommas:function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},NumberWithDecimalPlace:function(a){return a=parseFloat(a),-1===a.toString().indexOf(".")&&(a=a.toFixed(1)),a}},a.Provider=function(){var a=this;a.RepresentativeExample=ko.observable(""),a.Tier1000To1999Percentage=ko.observable(0),a.Tier2000To2999Percentage=ko.observable(0),a.Tier3000To4999Percentage=ko.observable(0),a.Tier5000To7499Percentage=ko.observable(0),a.Tier7500To19999Percentage=ko.observable(0),a.Tier20000To36000Percentage=ko.observable(0),a.CalculationTierPercentage=ko.observable(0),a.CalculationMonthlyRepayment=ko.observable(0),a.CalculationTotalRepayment=ko.observable(0),a.TokenizedRepresentativeExample=ko.observable("")},a.CarFinanceCalculatorForm=function(){var b=this;b.ProviderLow=new a.Provider,b.ProviderModerate=new a.Provider,b.ProviderHigh=new a.Provider,b.HowMuch=ko.observable(""),b.HowLong=ko.observable(""),b.Initialise=function(){ko.applyBindings(b,document.getElementById(a.Constants.CarFinanceCalculatorWidgetId)),a.Utils.BindProviderLow(b.ProviderLow),a.Utils.BindProviderModerate(b.ProviderModerate),a.Utils.BindProviderHigh(b.ProviderHigh)},b.onHowMuch=function(){b.ValidateHowMuch()},b.onHowLong=function(){b.ValidateHowLong()},b.Calculate=function(){var d=b.ValidateHowMuch(),e=b.ValidateHowLong();d&&e&&(c(a.Elements.CarFinanceCalculatorStartApplication).hide(),c(a.Elements.CarFinanceCalculatorGetQuote).hide(),c(a.Elements.CalculationError).hide(),c(a.Elements.CarFinanceCalculatorSpinner).show(),setTimeout(function(){if(!b.DoCalculation())return CONFUSEDCARFINANCECALCULATORAPP.Utils.WriteNewRelicPageEvent("CalculationFailed"),c(a.Elements.CarFinanceCalculatorSpinner).hide(),void c(a.Elements.CalculationError).show();c(a.Elements.CalculateButton).html(c(a.Elements.RecalculateText).val()),a.Utils.ShowProviderLowSection(),c(a.Elements.CarFinanceCalculatorSpinner).hide(),c(a.Elements.CarFinanceCalculatorGetQuote).show(),c("body").animate({scrollTop:c(a.Elements.CarFinanceCalculatorWidget).offset().top})},a.Constants.CarFinanceCalculatorSpinnerTimeout))},b.ValidateHowMuch=function(){return b.HowMuch()?(c(a.Elements.CalculateErrorHowMuch).text(""),!0):(c(a.Elements.CalculateErrorHowMuch).text(a.Constants.CalculateErrorMessageHowMuch),!1)},b.ValidateHowLong=function(){return b.HowLong()?(c(a.Elements.CalculateErrorHowLong).text(""),!0):(c(a.Elements.CalculateErrorHowLong).text(a.Constants.CalculateErrorMessageHowLong),!1)},b.DoCalculation=function(){return!!CONFUSEDCARFINANCECALCULATORAPP.Helper.validateCalculationData(b.HowMuch(),b.HowLong(),b.ProviderLow,b.ProviderModerate,b.ProviderHigh)&&(b.ProviderLow.CalculationTierPercentage(CONFUSEDCARFINANCECALCULATORAPP.Helper.obtainTierPercentage(b.HowMuch(),b.ProviderLow)),b.ProviderModerate.CalculationTierPercentage(CONFUSEDCARFINANCECALCULATORAPP.Helper.obtainTierPercentage(b.HowMuch(),b.ProviderModerate)),b.ProviderHigh.CalculationTierPercentage(CONFUSEDCARFINANCECALCULATORAPP.Helper.obtainTierPercentage(b.HowMuch(),b.ProviderHigh)),null!==b.ProviderLow.CalculationTierPercentage()&&null!==b.ProviderModerate.CalculationTierPercentage()&&null!==b.ProviderHigh.CalculationTierPercentage()&&(b.ProviderLow.CalculationMonthlyRepayment(CONFUSEDCARFINANCECALCULATORAPP.Helper.obtainMonthlyRepayment(b.ProviderLow.CalculationTierPercentage(),b.HowMuch(),b.HowLong())),b.ProviderModerate.CalculationMonthlyRepayment(CONFUSEDCARFINANCECALCULATORAPP.Helper.obtainMonthlyRepayment(b.ProviderModerate.CalculationTierPercentage(),b.HowMuch(),b.HowLong())),b.ProviderHigh.CalculationMonthlyRepayment(CONFUSEDCARFINANCECALCULATORAPP.Helper.obtainMonthlyRepayment(b.ProviderHigh.CalculationTierPercentage(),b.HowMuch(),b.HowLong())),b.ProviderLow.CalculationTotalRepayment(CONFUSEDCARFINANCECALCULATORAPP.Helper.obtainTotalRepayment(b.ProviderLow.CalculationMonthlyRepayment(),b.HowLong())),b.ProviderModerate.CalculationTotalRepayment(CONFUSEDCARFINANCECALCULATORAPP.Helper.obtainTotalRepayment(b.ProviderModerate.CalculationMonthlyRepayment(),b.HowLong())),b.ProviderHigh.CalculationTotalRepayment(CONFUSEDCARFINANCECALCULATORAPP.Helper.obtainTotalRepayment(b.ProviderHigh.CalculationMonthlyRepayment(),b.HowLong())),b.ProviderLow.TokenizedRepresentativeExample(CONFUSEDCARFINANCECALCULATORAPP.Helper.obtainTokenizedRepresentativeExample(b.ProviderLow.CalculationTierPercentage(),b.ProviderLow.CalculationMonthlyRepayment(),b.ProviderLow.CalculationTotalRepayment(),b.HowMuch(),b.HowLong(),b.ProviderLow.RepresentativeExample())),b.ProviderModerate.TokenizedRepresentativeExample(CONFUSEDCARFINANCECALCULATORAPP.Helper.obtainTokenizedRepresentativeExample(b.ProviderModerate.CalculationTierPercentage(),b.ProviderModerate.CalculationMonthlyRepayment(),b.ProviderModerate.CalculationTotalRepayment(),b.HowMuch(),b.HowLong(),b.ProviderModerate.RepresentativeExample())),b.ProviderHigh.TokenizedRepresentativeExample(CONFUSEDCARFINANCECALCULATORAPP.Helper.obtainTokenizedRepresentativeExample(b.ProviderHigh.CalculationTierPercentage(),b.ProviderHigh.CalculationMonthlyRepayment(),b.ProviderHigh.CalculationTotalRepayment(),b.HowMuch(),b.HowLong(),b.ProviderHigh.RepresentativeExample())),CONFUSEDCARFINANCECALCULATORAPP.submitCalculation(b.ProviderLow,b.ProviderModerate,b.ProviderHigh,b.HowMuch(),b.HowLong()),!0))},b.onProviderLowTitle=function(){a.Utils.ShowProviderLowSection(),CONFUSEDCARFINANCECALCULATORAPP.submitProvider(a.Constants.ProviderLow,!1)},b.onProviderModerateTitle=function(){a.Utils.ShowProviderModerateSection(),CONFUSEDCARFINANCECALCULATORAPP.submitProvider(a.Constants.ProviderModerate,!1)},b.onProviderHighTitle=function(){a.Utils.ShowProviderHighSection(),CONFUSEDCARFINANCECALCULATORAPP.submitProvider(a.Constants.ProviderHigh,!1)},c(a.Elements.ProviderTitleOnMobile).change(function(){switch(c(a.Elements.ProviderTitleOnMobile).val()){case a.Constants.ProviderLowTitleOnMobile:a.Utils.ShowProviderLowSection(),CONFUSEDCARFINANCECALCULATORAPP.submitProvider(a.Constants.ProviderLow,!0);break;case a.Constants.ProviderModerateTitleOnMobile:a.Utils.ShowProviderModerateSection(),CONFUSEDCARFINANCECALCULATORAPP.submitProvider(a.Constants.ProviderModerate,!0);break;case a.Constants.ProviderHighTitleOnMobile:a.Utils.ShowProviderHighSection(),CONFUSEDCARFINANCECALCULATORAPP.submitProvider(a.Constants.ProviderHigh,!0);break;default:a.Utils.ShowProviderLowSection(),CONFUSEDCARFINANCECALCULATORAPP.submitProvider(a.Constants.ProviderLow,!0)}}),c(a.Elements.StartApplicationButton).click(function(d){d.preventDefault();var e=b.detokenizeLink(c(a.Elements.StartApplicationButton).attr("href"));CONFUSEDCARFINANCECALCULATORAPP.submitClickthrough("startapplication",e),window.open(e,"_self")}),c(a.Elements.GetAQuoteButton).click(function(d){d.preventDefault();var e=b.detokenizeLink(c(a.Elements.GetAQuoteButton).attr("href"));CONFUSEDCARFINANCECALCULATORAPP.submitClickthrough("getaquote",e),window.open(e,"_self")}),b.detokenizeLink=function(c){return c.replace(a.Tokens.HowMuch,b.HowMuch()).replace(a.Tokens.HowLong,b.HowLong())},b.MonthlyRepaymentWholePart=function(b){return a.Utils.NumberWithCommas(b().toFixed(2).toString().split(".")[0])},b.MonthlyRepaymentDecimalPart=function(a){return a().toFixed(2).toString().split(".")[1]},b.TierPercentageFormat=function(b){return a.Utils.NumberWithDecimalPlace(b())}},c(a.Elements.CarFinanceCalculatorWidget).length>0){(new CONFUSEDCARFINANCECALCULATORAPP.CarFinanceCalculatorForm).Initialise()}}(CONFUSEDCARFINANCECALCULATORAPP,newrelic,jQuery);var CONFUSEDCMS=CONFUSEDCMS||{},CONFUSEDCARFINANCECALCULATORAPP=CONFUSEDCARFINANCECALCULATORAPP||{},Confused=Confused||{};CONFUSEDCARFINANCECALCULATORAPP.Helper=CONFUSEDCARFINANCECALCULATORAPP.Helper||{},function(a,b){"use strict";a.Tokens={AMOUNT:"[AMOUNT]",MONTHS:"[MONTHS]",RATE:"[RATE]",MONTHLYREPAYMENT:"[MONTHLYREPAYMENT]",TOTALREPAYMENT:"[TOTALREPAYMENT]"},a.Utils={ReplaceAll:function(a,b,c){return a.split(b).join(c)}},a.validateCalculationData=function(c,d,e,f,g){return!(!b.isNumeric(c)||!b.isNumeric(d)||c<1e3||c>36e3||d<12||d>120)&&!!(a.validateCalculationProvider(e)&&a.validateCalculationProvider(f)&&a.validateCalculationProvider(g))},a.validateCalculationProvider=function(a){return!(null==a||!a.RepresentativeExample())&&!!(b.isNumeric(a.Tier1000To1999Percentage())&&b.isNumeric(a.Tier2000To2999Percentage())&&b.isNumeric(a.Tier3000To4999Percentage())&&b.isNumeric(a.Tier5000To7499Percentage())&&b.isNumeric(a.Tier7500To19999Percentage())&&b.isNumeric(a.Tier20000To36000Percentage()))},a.obtainTierPercentage=function(a,b){var c=parseInt(a);return c>=1e3&&c<=1999?b.Tier1000To1999Percentage():c>=2e3&&c<=2999?b.Tier2000To2999Percentage():c>=3e3&&c<=4999?b.Tier3000To4999Percentage():c>=5e3&&c<=7499?b.Tier5000To7499Percentage():c>=7500&&c<=19999?b.Tier7500To19999Percentage():c>=2e4&&c<=36e3?b.Tier20000To36000Percentage():null},a.obtainMonthlyRepayment=function(a,b,c){var d=parseFloat(a),e=parseInt(b),f=parseInt(c),g=Math.pow(d/100+1,1/12)-1;return e/(1/g-1/(g*Math.pow(g+1,f)))},a.obtainTotalRepayment=function(a,b){return parseFloat(a).toFixed(2)*parseInt(b)},a.obtainTokenizedRepresentativeExample=function(b,c,d,e,f,g){var h=a.Utils.ReplaceAll(g,a.Tokens.RATE,CONFUSEDCARFINANCECALCULATORAPP.Utils.NumberWithDecimalPlace(b));return h=a.Utils.ReplaceAll(h,a.Tokens.MONTHLYREPAYMENT,CONFUSEDCARFINANCECALCULATORAPP.Utils.NumberWithCommas(c.toFixed(2))),h=a.Utils.ReplaceAll(h,a.Tokens.TOTALREPAYMENT,CONFUSEDCARFINANCECALCULATORAPP.Utils.NumberWithCommas(d.toFixed(2))),h=a.Utils.ReplaceAll(h,a.Tokens.AMOUNT,CONFUSEDCARFINANCECALCULATORAPP.Utils.NumberWithCommas(e)),h=a.Utils.ReplaceAll(h,a.Tokens.MONTHS,f)}}(CONFUSEDCARFINANCECALCULATORAPP.Helper,jQuery);var CONFUSEDCMS=CONFUSEDCMS||{},CONFUSEDCARFINANCECALCULATORAPP=CONFUSEDCARFINANCECALCULATORAPP||{};!function(){"use strict";CONFUSEDCARFINANCECALCULATORAPP.submitCalculation=function(a,b,c,d,e){CONFUSEDCARFINANCECALCULATORAPP.submitPageEvent({EventType:"carfinancecalculator:calculation:clicked",EventInfo:{ProviderLowRate:a.CalculationTierPercentage(),ProviderLowMonthlyRepayment:a.CalculationMonthlyRepayment(),ProviderLowTotalRepayment:a.CalculationTotalRepayment(),ProviderModerateRate:b.CalculationTierPercentage(),ProviderModerateMonthlyRepayment:b.CalculationMonthlyRepayment(),ProviderModerateTotalRepayment:b.CalculationTotalRepayment(),ProviderHighRate:c.CalculationTierPercentage(),ProviderHighMonthlyRepayment:c.CalculationMonthlyRepayment(),ProviderHighTotalRepayment:c.CalculationTotalRepayment(),Amount:d,Months:e}})},CONFUSEDCARFINANCECALCULATORAPP.submitClickthrough=function(a,b){CONFUSEDCARFINANCECALCULATORAPP.submitPageEvent({EventType:"carfinancecalculator:"+a+":clicked",EventInfo:{Link:b}})},CONFUSEDCARFINANCECALCULATORAPP.submitProvider=function(a,b){CONFUSEDCARFINANCECALCULATORAPP.submitPageEvent({EventType:"carfinancecalculator:provider:clicked",EventInfo:{ProviderType:a,IsDropdown:b}})},CONFUSEDCARFINANCECALCULATORAPP.submitPageEvent=function(a){CONFUSEDCMS.services.MiService().pageEvent(a)}}();var CONFUSEDCMS=CONFUSEDCMS||{},CSSCONSTANTS=CSSCONSTANTS||{};!function(a){CONFUSEDCMS.expandingBands=function(){var b=a(".band-toggle-container"),c=b.find(".band-toggle"),d=b.next(".band--toggle-section");c.on("click",function(a){a.preventDefault(),c.hasClass("band-toggle--open")?(c.removeClass("band-toggle--open"),c.addClass("band-toggle--closed"),d.slideUp(),d.addClass("band--toggle-section--closed")):(c.removeClass("band-toggle--closed"),c.addClass("band-toggle--open"),d.slideDown(),d.removeClass("band--toggle-section--closed"))})}}(window.jQuery);var CONFUSEDCMS=CONFUSEDCMS||{};!function(a){CONFUSEDCMS.setupLazyLoading=function(){a({observeChanges:!0})}}(window.yall);var CONFUSEDCMS=CONFUSEDCMS||{},CONFUSEDWEBSITE=CONFUSEDWEBSITE||{},CONFUSEDCORE=CONFUSEDCORE||{},CSSCONSTANTS=CSSCONSTANTS||{};!function(a){!function(){if(document.getElementById("expertSearch")){var a={searchFormId:"expertSearch",buttonClass:"contextual-search__submit--expertSearch",searchTextId:"expert-help-question",customSearchKeyId:"googleCustomKey",invalidInputSelector:"#query-error"};CONFUSEDWEBSITE.setupSearch(a)}}(),function(){if(document.getElementById("helpHeader")){var a={searchFormId:"helpHeader",buttonClass:"searchTextHelp",searchTextId:"searchTextHelp",customSearchKeyId:"googleCustomKey",invalidInputSelector:"#query-error"};CONFUSEDWEBSITE.setupSearch(a)}}(),a(function(){var b=window.location.href;if(CONFUSEDCORE.MI.MiListener.postPageView("LogPageView",{page:b,referer:document.referrer}),CONFUSEDCMS.contactUsFormSetup(a),CONFUSEDWEBSITE.expandingPanel(),CONFUSEDWEBSITE.responsiveTables(),CONFUSEDWEBSITE.setupOverlaps(),CONFUSEDCMS.setupProductDrivers(),CONFUSEDCMS.responsiveTabs(),CONFUSEDCMS.setupProviderList(),CONFUSEDCMS.setupProductTestimonials(),CONFUSEDCMS.expandingBands(),CONFUSEDWEBSITE.setupEqualizeHeights(),CONFUSEDCMS.setupProductCtas(),a("div.mot-checker").length>0){var c=new CONFUSEDCMS.VehicleDetails.MotChecker,d=a(".js-mot-checker");c.InitialiseModule(d),CONFUSEDCMS.setUpVehicleDetailsCheckerValidation(d)}a(".img--infographic--animated").length>0&&CONFUSEDCMS.priceIndex(),a("div.owl-carousel").length>0&&CONFUSEDCMS.carousel(a),a(".cms-tabs__tab-list").length>0&&CONFUSEDCMS.tabs(a)})}(window.jQuery),function(){"loading"!==document.readyState?CONFUSEDCMS.setupLazyLoading():document.addEventListener("DOMContentLoaded",function(){CONFUSEDCMS.setupLazyLoading()})}();var CONFUSEDCORPORATE=CONFUSEDCORPORATE||{},CONFUSEDWEBSITE=CONFUSEDWEBSITE||{},CONFUSEDCORE=CONFUSEDCORE||{};!function(a){this.displayMainForm=function(){this.IsAuthenticatedUser||a("#LogInBanner").show(),a("#frmDetails").show(),a("#MessageDetails").show()},this.redirectToLogin=function(){var b=a("#querySelect").val(),c=a("#MoreInformation").val(),d=a("#Login_Link").attr("href");d+="%3Fproduct%3D"+b,""!==c&&(d+="%26moreInformation%3D"+c),window.location.href=d},a(document).ready(function(){var b=a("#querySelect"),c=a("#MoreInformation");a(b).change(function(c){"True"==a("option:selected",b).attr("data-more-info")?a("#MoreInformationSection").show():(a("#MoreInformationSection").hide(),displayMainForm())}),a(c).change(function(a){displayMainForm()}),a("#Login_Link").on("click",function(a){a.stopPropagation(),a.preventDefault(),redirectToLogin()}),a("#btnSubmit").click(function(){if(a("#frmBody").valid()&&a("#title").valid()){var b=a("#daySelect").val(),c=a("#monthSelect").val(),d=a("#yearSelect").val(),e=b+"/"+c+"/"+d,f={Product:a("#querySelect").val(),MoreInformation:a("#MoreInformation").val(),Title:a("#title").val(),FirstName:a("#FirstName").val(),Surname:a("#Surname").val(),EmailAddress:a("#Email").val(),Postcode:a("#Postcode").val(),DateOfBirth:e,ContactPhoneQuestion:a("input[name=contactByPhone]:checked").val(),ContactPhoneNumber:a("#phone").val(),HasPurchased:a("#hasPurchased").val(),QuerySubject:a("#subject").val(),QueryDescription:a("#messageContents").val(),HttpAttributeReturnUrl:a("#returnUrl").val(),HttpAttributePriority:a("#HttpAttributePriority").val(),HttpAttributeOrigin:a("#HttpAttributeOrigin").val(),HttpAttributeExternal:a("#HttpAttributeExternal").val()};a.ajax({url:"/api/contact-us/submit",type:"POST",processData:!1,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(f),success:function(b){if(b.Success){var c=a("#returnUrl").val();window.location.href=c}else a("#ErrorBanner").show(),a(document).scrollTop(a("#ErrorBanner").offset().top)}})}else{var g=a(window).height();a(document).scrollTop(a(".label-error:visible:first").offset().top-g/2)}})})}(window.jQuery);var CONFUSEDCMS=CONFUSEDCMS||{};!function(a){CONFUSEDCMS.carousel=function(){a(".owl-carousel").owlCarousel({margin:10,nav:!0,dots:!0,loop:!0,items:1,responsive:{0:{stagePadding:40},901:{stagePadding:0}}})}}(window.jQuery);var CONFUSEDCMS=CONFUSEDCMS||{};!function(a){CONFUSEDCMS.tabs=function(){var b=a(".cms-tabs__tab-list"),c=b.find("li"),d=c.length,e=b.find("a"),f=a(".cms-tabs__content__panel");b.addClass("cms-tabs__tab-list--"+d+"-col"),e.click(function(){var b=a(this).attr("data-tab");return e.removeClass("active"),a(this).addClass("active"),f.removeClass("active"),a("#tab-"+b).addClass("active"),!1})}}(window.jQuery),window.confused=window.confused||{},confused.fuelCost=function(a,b){function c(){v=u.find("#RegNumber").val(),i(v)?(h(),l(),u.find("#RegLookupAjaxSpinner").show(),g(v)):u.find("#regerror").slideDown(300)}function d(){m("#VehicleResultReg",x.reg.toUpperCase()),m("#VehicleMake",x.make.toUpperCase()),m("#VehicleModel",x.model.toUpperCase())}function e(a){x.reg=v,x.make=a.CarMake,x.model=a.CarModel,x.mpg=a.MpgValue,u.find("#MpgValue").val(x.mpg),d(),w.next()}function f(){u.find("#searcherror").slideDown(300),u.find("#regerror").slideUp(300),u.find("#RegLookupAjaxSpinner").hide()}function g(b){var c="{'registrationNumber': '"+b+"'}";a.ajax({url:"/api/GetVehicleFuelCostDetails",cache:!1,type:"POST",contentType:"application/json",dataType:"json",data:c,success:function(a){a.VehicleResultFound?(!0===a.VehicleValuesAssumed?(u.find(".mpgEstimated").hide(),u.find(".mpgAssumed").show()):(u.find(".mpgEstimated").show(),u.find(".mpgAssumed").hide()),u.find("#RegLookupAjaxSpinner").hide(),e(a)):f()},error:function(){f()}})}function h(){u.find(".error").hide()}function i(a){return!(""===a||!a.match("^[a-zA-Z0-9 -]{2,10}$"))}function j(a){return!(""===a||!a.match("^[0-9]*[.]{0,1}[0-9]*$"))}function k(){var b=a(this),c=b.next();return j(b.val())?(c.hasClass("error")&&b.next().hide(),!0):(c.hasClass("error")&&b.next().show(),!1)}function l(){a.each(x,function(a){x[a]=""}),d()}function m(a,b){u.find(a).text(b)}function n(){y.fuel.val(a("#fuelCostPerLitre").val()),y.annualMileage.val(a("#AverageMilesPerYear").val());var b=y.fuel.val()*B,c=y.annualMileage.val()/x.mpg,d=b*c;o({annualResult:d.toFixed(2),monthlyResult:(d/12).toFixed(2),weeklyResult:(d/52).toFixed(2)})}function o(a){m("#ResultsMake",x.make),m("#ResultsModel",x.model),m("#ResultsAnnualMileage",y.annualMileage.val()),m("#ResultsFuelCost","£"+y.fuel.val()),m("#annualCostResult","£"+a.annualResult),m("#monthlyCostResult","£"+a.monthlyResult),m("#weeklyCostResult","£"+a.weeklyResult)}function p(){var b=k.apply(a("#MpgValue"),[]),c=k.apply(a("#AverageMilesPerYear"),[]),d=k.apply(a("#fuelCostPerLitre"),[]);return b&&c&&d}function q(){var b=a(this),c=parseFloat(b.val());k.apply(b,[])&&a(".fuelCostInput").val(c.toFixed(2))}function r(){var b=a(this),c=parseFloat(b.val());k.apply(b,[])&&(x.mpg=c)}function s(){k.apply(a("#fuelCostToggle"),[])&&n()}function t(b){var c=parseFloat(a("#fuelCostToggle").val())+b;a("#fuelCostToggle").val(c.toFixed(2)).trigger("change")}var u,v,w,x={reg:"",make:"",model:"",mpg:""},y={},z=0,A=["panel1","panel2","panel3","panel4"],B=4.545;a(document).ready(function(){function e(){var b=a(this);!0!==b.attr("disabled")&&(b.attr("disabled",!0),setTimeout(function(){b.attr("disabled",!1)},1e3))}return u=a("#FuelCostCalculator"),w=function(b){function c(b){var c=a(this).is(":visible");return!c&&b?void a(this).fadeIn():c&&!b?void a(this).fadeOut():void 0}function e(){c.apply(g,[z>0&&3!==z]),c.apply(g.find(".TryAgain-Button"),[1===z]),c.apply(g.find(".Back-Button"),[z>1]),c.apply(g.find(".Continue-Button"),[1===z]),c.apply(h,[0===z||3===z]),c.apply(g.find(".calculatButtonDiv"),[2===z]),c.apply(u.find(".recalculatButtonDiv"),[3===z])}function f(a){function b(){a(),e(),u.find("#"+A[z]).fadeIn()}u.find("#"+A[z]).fadeOut({complete:b})}var g=u.find(".page-nav"),h=u.find("#widget-share");return b.next=function(){f(function(){z++})},b.previous=function(){f(function(){z--})},b.reset=function(){z=0,l(),d(),e(),u.find("#panel4").fadeOut({complete:function(){u.find("#panel1").fadeIn()}})},b}({}),y={mpg:u.find("#mpg"),annualMileage:u.find("#mileage"),fuel:u.find("#fuel")},u.find("button.nav-button, #findCar").click(e),u.find("#findCar").click(c),u.find("#RegNumber").keyup(function(a){13===a.which&&c()}),u.find(".Continue-Button").click(w.next),u.find(".Back-Button, .TryAgain-Button").click(w.previous),u.find("#Calculate").click(function(){p()&&(n(),w.next())}),u.find("#Reset").click(w.reset),u.find("#AverageMilesPerYear, #fuelCostPerLitre").blur(k),u.find(".fuelCostInput").change(q),u.find("#fuelCostToggle").change(s),u.find("#MpgValue").blur(r),u.find("#increaseFuelCost").click(function(){t(.01)}),u.find("#decreaseFuelCost").click(function(){t(-.01)}),b})}(jQuery,{});
//# sourceMappingURL=cms.min.js.map